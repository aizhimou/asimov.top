[{"categories":["Media"],"content":"æœ¬æ–‡ä¸»è¦å†…å®¹ç¿»è¯‘è‡ªä¸€ç¯‡ä»‹ç» FFmpeg å…¥é—¨çŸ¥è¯†çš„è‹±æ–‡ Web å¹»ç¯ç‰‡ï¼ŒåŠ å…¥äº†ä¸€äº›ä¸ªäººç†è§£ä¸å­¦ä¹ æ³¨é‡Šã€‚ æˆ‘ç¿»è¯‘è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œä¸€æ˜¯å­¦ä¹  FFmpeg ç›¸å…³çš„çŸ¥è¯†ï¼ŒäºŒæ˜¯ç»ƒä¹ è‹±æ–‡ç¿»è¯‘èƒ½åŠ›ã€‚ä½†æ˜¯å—é™äºä¸ªäººæ°´å¹³ï¼Œæœ‰äº›è‹±æ–‡ä¸“ä¸šåè¯ç¿»è¯‘æˆä¸­æ–‡æœ‰äº›æ€ªå¼‚ï¼Œç¢°åˆ°è§‰å¾—ç¿»è¯‘ä¸å¥½çš„åœ°æ–¹ï¼Œæ–‡ä¸­ä¼šé™„ä¸ŠåŸæ–‡è¯è¯­ï¼Œå»ºè®®ç»“åˆåŸæ–‡æ›´å¥½ç†è§£ã€‚ åŸæ–‡ä½œè€…æ˜¯ä¸€åè§†é¢‘è´¨é‡ä¸ä½“éªŒè´¨é‡ç ”ç©¶å‘˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ UniversitÃ¤t Ilmenau çš„ä¸€ååšå£«ç”Ÿå’ŒåŠ©ç†ç ”ç©¶å‘˜ã€‚åŸæ–‡å†™å¾—éå¸¸æ£’ï¼Œæ–‡æœ¬è´¨é‡å’Œæ’ç‰ˆéƒ½æ¯”æˆ‘çš„è¯‘æ–‡æ›´å¥½ï¼Œå»ºè®®æœ‰è‹±æ–‡åŸºç¡€çš„æœ‹å‹ç›´æ¥é˜…è¯»åŸæ–‡ï¼Œé“¾æ¥ï¼šFFMPEG ENCODING AND EDITING COURSE ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:0:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è¯¾ç¨‹ç›®æ ‡ åŸºæœ¬æ¦‚å¿µ å®‰è£… ffmpeg å’Œç›¸å…³å·¥å…· ç¼–ç è§†é¢‘ ä½¿ç”¨è¿‡æ»¤å™¨ï¼ˆæ»¤é•œï¼‰ åˆ†æè§†é¢‘ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:1:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å‰ç½®è¦æ±‚ è¿™ä»½å¹»ç¯ç‰‡ï¼ˆåŸæ–‡æ˜¯ web å¹»ç¯ç‰‡çš„å½¢å¼ï¼‰ å·²å®‰è£… ffmpegã€ffprobeã€ffplay ä¸€äº›æ ·ä¾‹è§†é¢‘ï¼Œæ¯”å¦‚ï¼šBig Buck Bunny ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:2:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"èµ„æº å¦‚æœä½ éœ€è¦ä¸€äº›æ ·ä¾‹è§†é¢‘ç”¨åšæµ‹è¯•ï¼Œå¯ä»¥å‚è€ƒ VQEG (Video Quality Experts Group) çš„è¯´æ˜ï¼šhttps://www.its.bldrdoc.gov/vqeg/video-datasets-and-organizations.aspx FFMPEG ç®€ä»‹ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:3:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å…³äº ç”¨äºå¤šåª’ä½“ç¼–è¾‘ã€è½¬æ¢â€¦ çš„å…è´¹å¼€æºè½¯ä»¶ å¼€å§‹äº 2000 å¹´ æŒç»­ç»´æŠ¤å’Œå¼€å‘è‡³ä»Š ç±»ä¼¼æˆ–ç›¸å…³ï¼ˆä¸”æœ‰ç”¨ï¼‰çš„æ¡†æ¶ï¼š ImageMagick MLT Framework ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:4:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å·¥å…· FFmpeg æ˜¯ä¸€ç³»åˆ—è½¯ä»¶åŒ…å’Œç±»åº“çš„ç»„åˆï¼ŒåŒ…æ‹¬ï¼š å‘½ä»¤è¡Œå·¥å…·ï¼šffmpegã€ffprobeã€ffplay ç±»åº“ï¼šlibavformat, libavcodec, libavfilter, â€¦ å…¶ä¸­ç±»åº“è¢«è®¸å¤šé¡¹ç›®ä½¿ç”¨ï¼ˆæ¯”å¦‚ VLCã€MLT Framework ç­‰ï¼‰å¹¶ä¸”å¯ä»¥åœ¨ C/C++ ä»£ç ä¸­ä½¿ç”¨ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:5:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç±»åº“ libavformatï¼šè¯»å–å’Œå†™å…¥å®¹å™¨æ ¼å¼ï¼ˆAVI, MKV, MP4, â€¦ï¼‰ libavcodecï¼šè¯»å–å’Œå†™å…¥ç¼–è§£ç å™¨ï¼ˆH.264, H.265, VP9, â€¦ï¼‰ libavfilterï¼šå„ç§ä¸ªæ ·çš„è§†é¢‘å’ŒéŸ³é¢‘è¿‡æ»¤å™¨ ä»¥åŠå…¶ä»–â€¦ å…³äºå¦‚ä½•ä»¥ç¼–ç¨‹çš„æ–¹å¼ä½¿ç”¨ç±»åº“çš„æ ·ä¾‹ï¼š http://leixiaohua1020.github.io/#ffmpeg-development-examples ä»¥åŠä¸€äº›å…¶ä»–æœ‰ç”¨çš„ï¼ˆé FFmpeg çš„ï¼‰ç±»åº“ï¼š OpenCV: é¢å‘æ›´å¤šç±»å‹çš„ä¿¡å·å¤„ç† Python: MoviePy, pyav, scikit-video ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:6:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æ¶æ„ ç®€åŒ–çš„ FFmpeg æ•´ä½“æ¶æ„ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:7:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å®‰è£… / ç¼–è¯‘ å®‰è£…æ–¹å¼ ä¼˜åŠ¿ åŠ£åŠ¿ ä»æºç ç¼–è¯‘ å¯ä»¥è‡ªå®šä¹‰æ‰€æœ‰é…ç½®ï¼Œå·¥å…·ï¼Œç¼–è§£ç å™¨ è´¹æ—¶é—´ï¼Œå‡çº§å›°éš¾ ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬ ç®€å•ä¸”å¿«é€Ÿ ä¸æä¾›æ‰€æœ‰ç¼–è§£ç å™¨ï¼Œéœ€è¦æ‰‹åŠ¨å‡çº§ åŒ…ç®¡ç†å™¨å®‰è£… ç®€å•ä¸”å¿«é€Ÿ å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿä¸æä¾›æ‰€æœ‰ç¼–è§£ç å™¨ è·å–æºä»£ç å’Œé¢„ç¼–è¯‘ç‰ˆæœ¬ï¼šhttp://ffmpeg.org/download.html Windows é¢„ç¼–è¯‘ç‰ˆæœ¬ï¼šhttps://ffmpeg.org/download.html#build-windows ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:8:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è·å–å¸®åŠ© å®˜æ–¹æ–‡æ¡£ï¼šhttps://ffmpeg.org/ffmpeg-all.html Wiki çŸ¥è¯†åº“ï¼šhttp://trac.ffmpeg.org/wiki IRC èŠå¤©å®¤ï¼š#ffmpeg é‚®ä»¶åˆ—è¡¨ï¼šhttps://lists.ffmpeg.org/mailman/listinfo/ffmpeg-user/ Stack Overflow: https://stackoverflow.com/ and use #ffmpeg Super User: http://superuser.com/ and use #ffmpeg â€¦ æˆ–è€…é—®æˆ‘ åŸºç¡€è§†é¢‘ç¼–ç æ¦‚å¿µ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:9:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å®¹å™¨æ ¼å¼ï¼ˆContainer Formatsï¼‰ å®¹å™¨åŒ…å«åª’ä½“æ•°æ®ã€‚æ¯”å¦‚ï¼š MP4: MPEG-4 Part 14 å®¹å™¨ï¼Œç”¨äº H.264, H.264, AAC éŸ³é¢‘, â€¦ MKV: å¯ä»¥åŒ…å«å‡ ä¹æ‰€æœ‰åª’ä½“ç¼–ç æ ¼å¼çš„ä¸‡èƒ½å®¹å™¨ WebM: MKV å®¹å™¨çš„å­é›†ï¼Œä¸»è¦ç”¨äºç½‘ç»œåª’ä½“æµ AVI: ä¼ ç»Ÿå®¹å™¨ åœ¨ FFmpeg ä¸­æŸ¥çœ‹æ”¯æŒçš„å®¹å™¨ï¼š $ ffmpeg -formats File formats: D. = Demuxing supported .E = Muxing supported -- D 3dostr 3DO STR E 3g2 3GP2 (3GPP2 file format) E 3gp 3GP (3GPP file format) D 4xm 4X Technologies E a64 a64 - video for Commodore 64 D aa Audible AA format files ... ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:10:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç¼–è§£ç å™¨ï¼ˆCodecsï¼‰ ç¼–è§£ç å™¨ = ç¼–ç å™¨ / è§£ç å™¨ å¦‚ä½•ç¼–ç å’Œè§£ç è§†é¢‘ã€éŸ³é¢‘â€¦çš„è§„èŒƒ é€šå¸¸ä¸æ˜¯å¦‚ä½•ç¼–ç  / å‹ç¼©æ•°æ®çš„è§„èŒƒ æœ‰æ—¶å€™ â€œç¼–è§£ç å™¨â€ è¢«ç”¨äºç›´æ¥æŒ‡ä»£ ç¼–ç  / è§£ç çš„è½¯ä»¶ è¯‘è€…æŒ‰ï¼šCodec å¯ä»¥ç†è§£ä¸ºç¼–ç åè®®ï¼Œä¸åŒçš„åè®®å¤„ç†æ•°æ®ï¼ˆéŸ³è§†é¢‘ï¼‰çš„è§„åˆ™ä¸ä¸€æ ·ï¼Œåè®®æœ‰å…è´¹å¼€æºçš„ï¼Œè‡ªç„¶ä¹Ÿæœ‰å•†ç”¨ç§æœ‰çš„ã€‚ æŸ¥çœ‹ FFmpeg æ”¯æŒçš„ç¼–è§£ç å™¨ï¼š $ ffmpeg -codecs Codecs: D..... = Decoding supported .E.... = Encoding supported ..V... = Video codec ..A... = Audio codec ..S... = Subtitle codec ...I.. = Intra frame-only codec ....L. = Lossy compression .....S = Lossless compression ------- D.VI.. 012v Uncompressed 4:2:2 10-bit D.V.L. 4xm 4X Movie D.VI.S 8bps QuickTime 8BPS video .EVIL. a64_multi Multicolor charset for Commodore 64 (encoders: a64multi ) .EVIL. a64_multi5 Multicolor charset for Commodore 64, extended with 5th color (colram) (encoders: a64multi5 ) D.V..S aasc Autodesk RLE D.VIL. aic Apple Intermediate Codec ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:11:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æœ€é‡è¦çš„æœ‰æŸç¼–è§£ç å™¨ï¼ˆLossy Codecsï¼‰ ç›®å‰ä¸»è¦ä½¿ç”¨çš„ï¼Œç”± ITU / ISO æ ‡å‡†åŒ–ï¼š ğŸ¥ H.262 / MPEG-2 Part H: ä¸»è¦æ˜¯å¹¿æ’­ã€ç”µè§†ä½¿ç”¨ï¼Œç”¨äºå‘åå…¼å®¹ ğŸ¥ H.264 / MPEG-4 Part 10: å½“ä»Šè§†é¢‘ç¼–ç å™¨çš„äº‹å®æ ‡å‡†ï¼ˆ2018å¹´ï¼‰ ğŸ¥ H.265 / HEVC / MPEG-H: H.264 çš„ç»§ä»»è€…ï¼Œè§†é¢‘è´¨é‡æå‡ 50% ğŸ”Š MP3 / MPEG-2 Audio Layer III: æ›¾ç»æ˜¯éŸ³é¢‘ç¼–ç çš„äº‹å®æ ‡å‡† ğŸ”Š AAC / ISO/IEC 14496-3:2009: é«˜çº§éŸ³é¢‘ç¼–ç æ ‡å‡† å…æˆæƒè´¹ï¼ˆå…ç‰ˆæƒçš„ï¼‰ä¸»è¦ç«äº‰è€…ï¼š ğŸ¥ VP8: ç”± Google æå‡ºçš„å¼€æºå…è´¹ç¼–è§£ç å™¨ï¼ˆå¦‚ä»Šä½¿ç”¨å¹¶ä¸å¤šï¼‰ ğŸ¥ VP9: VP8 çš„ç»§ä»»è€…ï¼Œå‡ ä¹å’Œ H.265 ä¸€æ ·å¥½ ğŸ¥ AV1: VP9 çš„ç»§ä»»è€…ï¼Œå£°ç§°æ¯” H.265 æ›´å¥½ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:12:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æœ€é‡è¦çš„æ— æŸç¼–è§£ç å™¨ï¼ˆLossless Codecsï¼‰ æ— æŸç¼–è§£ç å™¨åœ¨å­˜æ¡£ã€ç¼–è¾‘â€¦é¢†åŸŸéå¸¸æœ‰ç”¨ æ— æŸç¼–ç  = åœ¨è¾ƒå°çš„æ–‡ä»¶ä½“ç§¯ä¸‹æ²¡æœ‰å‹ç¼©æŸå¤± ğŸ¥ Raw YUV, HuffYUV, FFV1, ffvhuff â€¦ ğŸ”Š Raw PCM, FLAC, ALAC, â€¦ å½“ç„¶ï¼Œè¿˜æœ‰ â€œè§†è§‰æ— æŸâ€ ç¼–è§£ç å™¨ï¼š ğŸ¥ Apple ProRes, Avid DNxHD, JPEG2000, high-quality H.264/H.265, â€¦ High bitrate and usually only I-framesï¼ˆé«˜ç ç‡å¸§å†…å‹ç¼©ï¼‰ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:13:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç¼–ç å™¨ï¼ˆEncodersï¼‰ ç¼–ç å™¨æ˜¯è¾“å‡ºç¼–ç åå­—èŠ‚æµçš„å®é™…è½¯ä»¶ ç¼–ç å™¨ä¼šå½±å“è§†é¢‘çš„è´¨é‡å’Œæ€§èƒ½ï¼Œä¸€äº›ç¼–ç å™¨ä¼šå¥½äºå¦ä¸€äº›ï¼ˆæœ‰äº›å…è´¹ï¼Œæœ‰äº›ä¸å…è´¹ï¼‰ è¯‘è€…æŒ‰ï¼šEncoder å¯ä»¥ç†è§£ä¸º Codecï¼ˆç¼–ç åè®®ï¼‰çš„å…·ä½“å®ç°æ–¹å¼ï¼Œä¸åŒçš„å®ç°æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œæœ‰å…è´¹å¼€æºçš„å®ç°ï¼Œä¹Ÿæœ‰å•†ç”¨ç§æœ‰çš„å®ç°ã€‚ ä¾‹å¦‚ï¼š ğŸ¥ libx264: æœ€å—æ¬¢è¿çš„ H.264 ç¼–ç å™¨ ğŸ¥ NVENC: NVIDIA GPU ä¸“ç”¨çš„ H.264 ç¼–ç å™¨ ğŸ¥ libx265: å…è´¹å¼€æºçš„ HEVCï¼ˆH.265ï¼‰ç¼–ç å™¨ ğŸ¥ libvpx: Google æ¨å‡ºçš„ VP8 å’Œ VP9 ç¼–ç å™¨ ğŸ¥ libaom: AV1 ç¼–ç å™¨ ğŸ”Š libfdk-aac: AAC ç¼–ç å™¨ ğŸ”Š aac: åŸç”Ÿï¼ˆé»˜è®¤ï¼‰ FFmpeg AAC ç¼–ç å™¨ â€¦ æ€»çš„æ¥è¯´ï¼Œç¼–ç å™¨æ–¹é¢æœ‰å¾ˆå¤šç«äº‰ã€‚ æŸ¥çœ‹ FFmpeg æ”¯æŒçš„ç¼–ç å™¨ï¼š $ ffmpeg -encoders Encoders: V..... = Video A..... = Audio S..... = Subtitle .F.... = Frame-level multithreading ..S... = Slice-level multithreading ...X.. = Codec is experimental ....B. = Supports draw_horiz_band .....D = Supports direct rendering method 1 ------ V..... a64multi Multicolor charset for Commodore 64 (codec a64_multi) V..... a64multi5 Multicolor charset for Commodore 64, extended with 5th color (colram) (codec a64_multi5) V..... alias_pix Alias/Wavefront PIX image ... ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:14:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"åƒç´ æ ¼å¼ï¼ˆPixel Formatsï¼‰ è§†é¢‘æµä¸­åŸå§‹åƒç´ çš„è¡¨ç¤º æŒ‡å®šäº®åº¦ / è‰²å½©å’Œé¥±å’Œåº¦çš„é‡‡æ ·é¡ºåº æŸ¥çœ‹ FFmpeg æ”¯æŒçš„åƒç´ æ ¼å¼ï¼š âœ ~ ffmpeg -pix_fmts --hide_banner Pixel formats: I.... = Supported Input format for conversion .O... = Supported Output format for conversion ..H.. = Hardware accelerated format ...P. = Paletted format ....B = Bitstream format FLAGS NAME NB_COMPONENTS BITS_PER_PIXEL BIT_DEPTHS ----- IO... yuv420p 3 12 8-8-8 IO... yuyv422 3 16 8-8-8 IO... rgb24 3 24 8-8-8 IO... bgr24 3 24 8-8-8 IO... yuv422p 3 16 8-8-8 IO... yuv444p 3 24 8-8-8 IO... yuv410p 3 9 8-8-8 IO... yuv411p 3 12 8-8-8 ... è¯‘è€…æŒ‰ï¼šè¿™å—æˆ‘ä¹Ÿæ²¡çœ‹æ˜ç™½ï¼Œå…ˆæ”¾ç€å§ ğŸ˜‚ï¼Œæˆ‘æ¯”è¾ƒå…³å¿ƒè§†é¢‘ç¼–ç ï¼ˆæ•°æ®å‹ç¼©ï¼‰çš„éƒ¨åˆ† ç”¨ FFmpeg å‘½ä»¤è¡Œå·¥å…·ç¼–ç  ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:15:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"åŸºæœ¬è¯­æ³• ffmpeg \u003cglobal-options\u003e \u003cinput-options\u003e -i \u003cinput\u003e \u003coutput-options\u003e \u003coutput\u003e å…¨å±€å‚æ•°ï¼ˆglobal-optionsï¼‰ç”¨äºæ—¥å¿—è¾“å‡ºï¼Œè¦†ç›–æ–‡ä»¶ç­‰ è¾“å…¥å‚æ•°ï¼ˆinput-optionsï¼‰ç”¨äºè¯»å–æ–‡ä»¶ è¾“å‡ºå‚æ•°ï¼ˆoutput-optionsï¼‰ç”¨äºï¼š è½¬æ¢ï¼ˆç¼–ç æ ¼å¼ï¼Œè§†é¢‘è´¨é‡ç­‰ï¼‰ è¿‡æ»¤å™¨ï¼ˆfilteringï¼‰ æµæ˜ å°„ï¼ˆstream mappingï¼‰ â€¦ å®Œæ•´çš„å¸®åŠ© / å‚è€ƒæ–‡æ¡£ï¼šffmpeg -h full æˆ–è€… man ffmpeg ä½†æ˜¯å†…å®¹éå¸¸éå¸¸å¤šï¼ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:16:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è½¬ç å’Œè½¬æ¢ï¼ˆTRANSCODING AND TRANSMUXINGï¼‰ ä»ä¸€ç§ç¼–ç æ ¼å¼è½¬ç åˆ°å¦ä¸€ç§ç¼–ç æ ¼å¼ï¼ˆTranscodingï¼‰ï¼Œæ¯”å¦‚ç”¨ libx264 ç¼–ç å™¨è½¬ä¸º H.264 ç¼–ç æ ¼å¼ ffmpeg -i \u003cinput\u003e -c:v libx264 output.mp4 ä»ä¸€ç§è§†é¢‘å®¹å™¨è½¬æ¢ä¸ºå¦ä¸€ç§è§†é¢‘å®¹å™¨ï¼Œä¸ç”¨é‡æ–°ç¼–ç  ffmpeg -i input.mp4 -c copy output.mkv ffmpeng ä¼šä»è¾“å…¥ä¸­è·å–ä¸€ä¸ªè§†é¢‘ã€éŸ³é¢‘å’Œå­—å¹•æµå¹¶å°†å…¶æ˜ å°„åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ã€‚ æ³¨é‡Šï¼š -c è®¾ç½®ç¼–ç å™¨ï¼ˆå‚è€ƒ ffmpeg -encoders) -c å¤åˆ¶æ¯”ç‰¹æµï¼ˆcopy only copies bitstreamï¼‰ -c:v è®¾ç½®è§†é¢‘ç¼–ç å™¨ -c:a è®¾ç½®éŸ³é¢‘ç¼–ç å™¨ -an å’Œ -vn åˆ†åˆ«æ˜¯ç¦ç”¨éŸ³é¢‘å’Œè§†é¢‘æµ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:17:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è½¬ç çš„èƒŒåï¼ˆTRANSCODING BACKGROUNDï¼‰ èŠ‚é€‰è‡ª http://ffmpeg.org/ffmpeg-all.htmlï¼š ffmpeg [â€¦] read[s] input files and get packets containing encoded data from them. When there are multiple input files, ffmpeg tries to keep them synchronized [â€¦]. Encoded packets are then passed to the decoder. [â€¦] The decoder produces uncompressed frames [â€¦] which can be processed further by filtering [â€¦]. After filtering, the frames are passed to the encoder, which encodes them and outputs encoded packets. Finally those are passed to the muxer, which writes the encoded packets to the output file. è¯‘è€…æŒ‰ï¼šè¿™æ®µä¸“ä¸šåè¯å¤ªå¤šï¼Œå°è¯•ç¿»è¯‘äº†å‡ æ¬¡éƒ½æ„Ÿè§‰å¤ªåƒµç¡¬å¤ªå¥‡æ€ªäº†ã€‚å…¶å®å°±æ˜¯å‰é¢é‚£ä¸ªæ¶æ„å›¾çš„æ–‡å­—æè¿°ã€‚ å¤§æ¦‚æ„æ€æ˜¯ï¼šffmpeg ä»æ–‡ä»¶ä¸­è¯»å–ç¼–ç è¿‡çš„æ•°æ®åŒ…ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶ï¼Œffmpeg ä¼šå°è¯•åŒæ­¥å¤šä¸ªæ–‡ä»¶ã€‚ç„¶åè¿™äº›ç¼–ç è¿‡çš„æ•°æ®åŒ…ï¼ˆencoded packetsï¼‰ä¼šè¢«å‘é€åˆ°è§£ç å™¨ï¼ˆdecoderï¼‰ï¼Œè§£ç å™¨å°†è¿™äº›æ•°æ®åŒ…è§£ç ä¸ºåŸå§‹è§†é¢‘å¸§ï¼ˆuncompressed framesï¼‰ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨å„ç§è¿‡æ»¤å™¨ï¼ˆfiltersï¼‰æ¥å¤„ç†è¿™äº›è§†é¢‘å¸§ï¼ˆframesï¼‰ï¼Œç„¶åè¿™äº›å¤„ç†è¿‡åçš„è§†é¢‘å¸§ç‡ä¼šè¢«å‘é€åˆ°ç¼–ç å™¨ï¼ˆencoderï¼‰ï¼Œç¼–ç å™¨ä¼šå°†ä»–ä»¬ç¼–ç ä¸ºæ•°æ®åŒ…ï¼ˆencoded packetsï¼‰ï¼Œæœ€åè¿™äº›æ•°æ®åŒ…ä¼šè¢«å‘é€åˆ°æ··æµå™¨ï¼ˆmuxerï¼‰ï¼Œæœ€ç»ˆæ··æµå™¨å°†è¿™äº›æ•°æ®åŒ…è¾“å‡ºä¸ºæ–‡ä»¶ã€‚ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:17:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æŸ¥æ‰¾å’Œå‰ªåˆ‡ï¼ˆSEEKING AND CUTTINGï¼‰ ä» \u003cèµ·å§‹ç‚¹ï¼ˆstartï¼‰\u003e ç”¨ \u003cæŒç»­æ—¶é—´ï¼ˆdurationï¼‰\u003e æˆ–è€… \u003cç»“æŸç‚¹ï¼ˆendï¼‰\u003e æ¥å‰ªåˆ‡è§†é¢‘ ffmpeg -ss \u003cstart\u003e -i \u003cinput\u003e -t \u003cduration\u003e -c copy \u003coutput\u003e ffmpeg -ss \u003cstart\u003e -i \u003cinput\u003e -to \u003cend\u003e -c copy \u003coutput\u003e ä¾‹å¦‚ï¼š ffmpeg -ss 00:01:50 -i \u003cinput\u003e -t 10.5 -c copy \u003coutput\u003e ffmpeg -ss 2.5 -i \u003cinput\u003e -to 10 -c copy \u003coutput\u003e ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:18:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ä½¿ç”¨ SEEKNG æ³¨æ„äº‹é¡¹ é‡æ–°ç¼–ç è§†é¢‘æ—¶ï¼Œseeking æ€»æ˜¯å¯ä»¥ç²¾ç¡®åˆ°æ—¶é—´æˆ³ å½“æ‹·è´è§†é¢‘æµè€Œæ²¡æœ‰ç»è¿‡é‡æ–°ç¼–ç æ—¶ï¼ˆ-c copyï¼‰ï¼Œffmpeg å¯èƒ½ä¼šåŒ…å«æœªæ˜¾ç¤ºä½†æ˜¯å¿…è¦çš„å¸§ ä½¿ç”¨ -c copy å‰ªåˆ‡è§†é¢‘æ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé»‘å¸§å¼€å¤´çš„è§†é¢‘ï¼ˆåœ¨æŸäº›æ’­æ”¾å™¨ä¸Šï¼‰ è¯¦æƒ…å¯ä»¥æŸ¥çœ‹ï¼š http://trac.ffmpeg.org/wiki/Seeking https://superuser.com/questions/138331/using-ffmpeg-to-cut-up-video è¯‘è€…æŒ‰ï¼šä¹‹æ‰€ä»¥åœ¨å‰ªåˆ‡è§†é¢‘æ—¶ï¼Œè½¬ç äºä¸è½¬ç å­˜åœ¨æ—¶é—´å‡†ç¡®æ€§ä¸Šçš„å·®åˆ«ï¼Œæ˜¯å› ä¸ºè½¬ç æ—¶ï¼ŒåŸè§†é¢‘çš„æ¯ä¸€å¸§éƒ½ä¼šè¢« ffmpeg è¯»å–å‡ºæ¥ï¼ˆä¹Ÿå°±æ˜¯ decodeï¼‰ï¼Œå› æ­¤å¯ä»¥å‡†ç¡®çš„å®šä½åˆ°æ—¶é—´ç‚¹ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰è½¬ç ï¼Œç›´æ¥å¤åˆ¶è§†é¢‘æµçš„æ—¶å€™ï¼Œffmpeg å¹¶ä¸ä¼šé€å¸§åˆ†æè§†é¢‘ï¼Œè€Œæ˜¯é‡‡ç”¨â€œå…³é”®å¸§â€æ¥å®šä½æ—¶é—´ï¼Œå½“è®¾å®šçš„æ—¶é—´ç‚¹ä¸Šæ²¡æœ‰å…³é”®å¸§æ—¶ï¼Œå°±ä¼šå‡ºç°ä¸€äº›æ—¶é—´åå·®ã€‚ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:18:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è®¾ç½®è´¨é‡ è¾“å‡ºæ–‡ä»¶çš„è´¨é‡å–å†³äºç¼–ç å™¨é»˜è®¤è®¾ç½®äºåŸææ–™ï¼ˆä¹Ÿå°±æ˜¯åŸè§†é¢‘ï¼‰çš„è´¨é‡ ä¸è¦åœ¨æœªè®¾ç½®ä»»ä½•è´¨é‡æ°´å¹³çš„æƒ…å†µä¸‹è¿›è¡Œç¼–ç  é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªç›®æ ‡æ¯”ç‰¹ç‡æˆ–è€…è´¨é‡æ°´å¹³ ç›®æ ‡æ¯”ç‰¹ç‡å–å†³äºè§†é¢‘çš„ç±»å‹ï¼Œå¤§å°å’Œå¸§ç‡ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:19:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è®¾ç½®è´¨é‡çš„å‚æ•° å¯èƒ½ä¼šä½¿ç”¨åˆ°çš„å‚æ•°ï¼ˆä»…ç¤ºä¾‹ï¼‰ -b:v æˆ–è€… -b:a è®¾ç½®æ¯”ç‰¹ç‡ æ¯”å¦‚ï¼š-b:v 1000K = 1000kbit/s, -b:v 8M = 8Mbit/s q:v æˆ–è€… -q:a è®¾ç½®å›ºå®šè´¨é‡å‚æ•° æ¯”å¦‚ï¼š-q:a 2 è®¾ç½®ä¸ºåŸç”Ÿ AAC ç¼–ç å™¨ ä¸€äº›ç¼–ç æ–¹å¼çš„ç¤ºä¾‹ï¼š -crf ç”¨æ¥è®¾ç½® libx264/libx265 çš„ æ’å®šç ç‡å› å­ï¼ˆConstant Rate Factorï¼‰ vbr ä¸º FDK-AAC ç¼–ç å™¨è®¾ç½®å›ºå®šè´¨é‡ è¿˜æœ‰å¾ˆå¤šå…¶ä»–å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ ffmpeg -h encoder=libx264 for examples æŸ¥çœ‹ï¼Œå¦‚ä¸‹ âœ ~ ffmpeg -h encoder=libx264 for examples -hide_banner Encoder libx264 [libx264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10]: General capabilities: dr1 delay threads Threading capabilities: other Supported pixel formats: yuv420p yuvj420p yuv422p yuvj422p yuv444p yuvj444p nv12 nv16 nv21 yuv420p10le yuv422p10le yuv444p10le nv20le gray gray10le libx264 AVOptions: -preset \u003cstring\u003e E..V....... Set the encoding preset (cf. x264 --fullhelp) (default \"medium\") -tune \u003cstring\u003e E..V....... Tune the encoding params (cf. x264 --fullhelp) -profile \u003cstring\u003e E..V....... Set profile restrictions (cf. x264 --fullhelp) -fastfirstpass \u003cboolean\u003e E..V....... Use fast settings when encoding first pass (default true) -level \u003cstring\u003e E..V....... Specify level (as defined by Annex A) -passlogfile \u003cstring\u003e E..V....... Filename for 2 pass stats -wpredp \u003cstring\u003e E..V....... Weighted prediction for P-frames -a53cc \u003cboolean\u003e E..V....... Use A53 Closed Captions (if available) (default true) -x264opts \u003cstring\u003e E..V....... x264 options -crf \u003cfloat\u003e E..V....... Select the quality for constant quality mode (from -1 to FLT_MAX) (default -1) -crf_max \u003cfloat\u003e E..V....... In CRF mode, prevents VBV from lowering quality beyond this point. (from -1 to FLT_MAX) (default -1) -qp \u003cint\u003e E..V....... Constant quantization parameter rate control method (from -1 to INT_MAX) (default -1) -aq-mode \u003cint\u003e E..V....... AQ method (from -1 to INT_MAX) (default -1) ... ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:19:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ä»€ä¹ˆæ˜¯ CRFï¼Ÿ CRF = Constant Rate Factor åœ¨æ•´ä¸ªç¼–ç è¿‡ç¨‹ä¸­ï¼Œä¿æŒæ’å®šçš„è´¨é‡ åœ¨ä¸å¤ªæ³¨é‡æ–‡ä»¶å¤§å°çš„æƒ…å†µä¸‹ï¼Œé€‚åˆä»¥å›ºå®šçš„è´¨é‡å­˜å‚¨è§†é¢‘ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:19:2","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç¤ºä¾‹ï¼šè½¬ç ä¸º H.264ï¼ŒPart 1 ä»¥å›ºå®šè´¨é‡ï¼ˆCRFï¼‰ç¼–ç ï¼š ffmpeg -i \u003cinput\u003e -c:v libx264 -crf 23 -c:a aac -b:a 128k output.mkv é’ˆå¯¹ H.264 ç¼–ç ï¼ŒCRF åœ¨ 18 åˆ° 28 ä¹‹é—´çœ‹èµ·æ¥â€œæ¯”è¾ƒå¥½â€ï¼ŒCRF å€¼è¶Šä½è§†é¢‘è´¨é‡è¶Šå¥½ã€‚ï¼ˆ HEVC å’Œ VP9 ç¼–ç çš„ CRF å€¼ä¸åŒï¼‰ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:19:3","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç¤ºä¾‹ï¼šè½¬ç ä¸º H.264ï¼ŒPart 2 åŒé‡ç¼–ç ï¼ˆTwo-passï¼‰æ¨¡å¼ï¼š ffmpeg -y -i \u003cinput\u003e -c:v libx264 -b:v 8M -pass 1 -c:a aac -b:a 128k -f mp4 /dev/null ffmpeg -i \u003cinput\u003e -c:v libx264 -b:v 8M -pass 2 -c:a aac -b:a 128k output.mp4 Windows ç”¨æˆ·ï¼šç”¨ nul ä»£æ›¿ /dev/null æ›´å¤šç»†èŠ‚ï¼Œå‚è€ƒï¼šhttps://trac.ffmpeg.org/wiki/Encode/H.264 ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:19:4","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç ç‡æ§åˆ¶ ä¸åŒçš„æ§åˆ¶æ–¹å¼ï¼š å›ºå®šç ç‡ï¼ˆConstant Bitrateï¼šCBRï¼‰ åŠ¨æ€ç ç‡ï¼ˆVariable Bitrateï¼šVBRï¼‰ å¹³å‡ç ç‡ï¼ˆAverage Bitrateï¼šABRï¼‰ æ’å®šè´¨é‡å‚æ•°ï¼ˆConstant quantization parameterï¼šCQPï¼‰ åŸºäºå¿ƒé‡Œè§†è§‰ç‰¹å¾çš„æ’å®šè´¨é‡ï¼Œæ¯”å¦‚ x264/x265/libvpx-vp9 ç¼–ç å™¨ä¸­ä½¿ç”¨ CRFï¼ˆConstant quality, based on psychovisual propertiesï¼‰ é™åˆ¶å‹ç ç‡ï¼ˆConstrained Bitrateï¼šVBVï¼‰ å…·ä½“åœ¨å“ªç§æƒ…å†µä¸‹ä½¿ç”¨å“ªç§ç ç‡æ¨¡å¼ï¼Œå‚è€ƒï¼šhttps://slhck.info/video/2017/03/01/rate-control.html é‡è¦è¯´æ˜ï¼šåˆé€‚çš„ç ç‡å–å†³äºå†…å®¹ç‰¹å¾ï¼ è¯‘è€…æŒ‰ï¼šå¯¹è§†é¢‘æ¥è¯´ï¼Œç ç‡å¹¶éè¶Šé«˜è¶Šå¥½ï¼Œä¸åŒå†…å®¹ç‰¹å¾çš„è§†é¢‘å¯¹ç ç‡çš„è¦æ±‚å¹¶ä¸ä¸€æ ·ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šä»€ä¹ˆå†³å®šäº†ä½ çœ‹åˆ°çš„ç”»è´¨ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:20:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç ç‡æ§åˆ¶ç¤ºä¾‹ ä¸åŒç ç‡æ§åˆ¶æ¨¡å¼ä¸‹ï¼Œå¸§å¤§å°éšæ—¶é—´å˜åŒ–å›¾ï¼ˆå·²å¹³æ»‘åŒ–å¤„ç†ï¼‰ æ³¨æ„ ABR æ¨¡å¼ä¸‹ï¼Œåœ¨ä¸€å¼€å§‹å¯¹ç ç‡çš„é”™è¯¯ä¼°è®¡ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:20:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"é€Ÿåº¦ VS è´¨é‡ VS æ–‡ä»¶å¤§å°ï¼ˆSPEED VS. QUALITY VS. FILE SIZEï¼‰ æœ‰æŸç¼–ç æ¨¡å¼æ€»æ˜¯åœ¨è¿™ä¸‰è€…ä¹‹é—´é€‰æ‹© ä¾‹å¦‚ï¼š ä½ å¯ä»¥è®©è§†é¢‘è´¨é‡åˆå¥½ï¼Œç¼–ç åˆå¿«ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶ä¼šå¾ˆå¤§ ä½ å¯ä»¥è®©è§†é¢‘è´¨é‡åˆå¥½ï¼Œæ–‡ä»¶åˆå°ï¼Œä½†æ˜¯ç¼–ç é€Ÿåº¦ä¼šå¾ˆæ…¢ ä½ å¯ä»¥è®©æ–‡ä»¶åˆå°ï¼Œç¼–ç åˆå¿«ï¼Œä½†æ˜¯è§†é¢‘è´¨é‡å°±ä¼šæ¯”è¾ƒå·® ç¼–è€…æŒ‰ï¼šå‡¡äº‹éœ€è¦åšæŠ‰æ‹©çš„åœ°æ–¹ï¼Œä¸å¯èƒ½ä¸‰è§’æ€»åœ¨é‚£å„¿ç­‰ç€ä½ ã€‚è§†é¢‘ç¼–ç æ—¶å¦‚ä½•å¹³è¡¡é€Ÿåº¦ã€è´¨é‡å’Œæ–‡ä»¶å¤§å°ï¼Œæ˜¯æœ€é‡è¦ä¹Ÿæ˜¯æœ€å¤æ‚çš„è¯¾é¢˜ä¹‹ä¸€ï¼Œåé¢ä¼šå­¦ä¹ /æ’°å†™/ç¿»è¯‘æ›´å¤šçš„æ–‡ç« æ¥ä»‹ç»ã€‚ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:20:2","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"X264 ç¼–ç å™¨ä¸­çš„é€Ÿåº¦/è´¨é‡é¢„è®¾ ä½¿ç”¨é¢„è®¾æ¥é€‰æ‹© libx264 çš„ç¼–ç é€Ÿåº¦ ffmpeg -i \u003cinput\u003e -c:v libx264 -crf 23 -preset ultrafast -an output.mkv ffmpeg -i \u003cinput\u003e -c:v libx264 -crf 23 -preset medium -an output.mkv ffmpeg -i \u003cinput\u003e -c:v libx264 -crf 23 -preset veryslow -an output.mkv æ‰€æœ‰é¢„è®¾ï¼šultrafast, superfast, veryfast, faster, fast, medium, slow, slower, veryslow åŒç­‰è´¨é‡ä¸‹ï¼Œä¸€äº›ç¼–ç é€Ÿåº¦äºæ–‡ä»¶ä½“ç§¯çš„å¯¹æ¯”æ ·ä¾‹ï¼š Preset Encoding Time File Size ultrafast 4.85s 15M medium 24.13s 5.2M veryslow 112.23s 4.9M ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:20:3","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æ”¹å˜å¸§ç‡ ç®€å•çš„é€šè¿‡ä¸¢å¼ƒå¸§å’Œå¤åˆ¶å¸§çš„æ–¹å¼æ¥æ”¹å˜å¸§ç‡ï¼š ffmpeg -i \u003cinput\u003e -r 24 \u003coutput\u003e æ›´å¤æ‚çš„æ–¹æ³•æ¶‰åŠåˆ°è¿‡æ»¤å™¨ï¼ˆfilterï¼‰å‚è€ƒ fps, mpdecimate, minterpolate filters: ffmpeg -i \u003cinput\u003e -filter:v fps=24 \u003coutput\u003e ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:21:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è½¨é“æ˜ å°„ï¼ˆSTREAM MAPPINGï¼‰ æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ IDï¼Œä» 0 å¼€å§‹ ä¾‹å¦‚ï¼š 0:0 æ˜¯ç¬¬ä¸€ä¸ªè¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€æ¡è½¨é“ï¼ˆSteamï¼‰ 0:1 æ˜¯ç¬¬ä¸€ä¸ªè¾“å…¥æ–‡ä»¶çš„ç¬¬äºŒæ¡è½¨é“ 2:a:0 æ˜¯ç¬¬ä¸‰ä¸ªè¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€æ¡éŸ³è½¨ â€¦ ä½ å¯ä»¥å°†è¾“å…¥æ–‡ä»¶çš„è½¨é“æ˜ å°„åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ï¼ˆmap input streams to outputï¼‰ä¾‹å¦‚ï¼šå°†éŸ³é¢‘æ·»åŠ åˆ°è§†é¢‘ä¸­ï¼š ffmpeg -i input.mp4 -i input.m4a -c copy -map 0:v:0 -map 1:a:0 output.mp4 æ›´å¤šç»†èŠ‚è¯·å‚è€ƒï¼šhttp://trac.ffmpeg.org/wiki/Map ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:22:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç®€å•è¿‡æ»¤å™¨ï¼ˆSIMPLE FILTERINGï¼‰ FFmpeg æœ‰å¾ˆå¤šè§†é¢‘ã€éŸ³é¢‘ã€å­—å¹•çš„è¿‡æ»¤å™¨ï¼ˆfilterï¼‰ï¼š ffmpeg -i \u003cinput\u003e -filter:v \"\u003cfilter1\u003e,\u003cfilter2\u003e,\u003cfilter3\u003e\" \u003coutput\u003e ä¸€ä¸ªè¿‡æ»¤å™¨ï¼ˆæ»¤é•œï¼‰æœ‰ä¸€ä¸ªåç§°ï¼Œä¸€äº›å¯é€‰é¡¹ï¼Œä»¥åŠä¸€äº›é¢„è®¾å‚æ•°ï¼š -filter:v \u003cname\u003e=\u003coption1\u003e=\u003cvalue1\u003e:\u003coption2\u003e=\u003cvalue2\u003e ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:23:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"ç¼©æ”¾ï¼ˆSCALINGï¼‰ ç¼©æ”¾åˆ° 320 x 240 ffmpeg -i \u003cinput\u003e -vf \"scale=w=320:h=240\" \u003coutput\u003e ç¼©æ”¾åˆ°é«˜åº¦ 240 ä¸”ä¿æŒçºµæ¨ªæ¯”å¯è¢« 2 æ•´é™¤ ffmpeg -i \u003cinput\u003e -vf scale=w=-2:h=240 \u003coutput\u003e ç¼©æ”¾åˆ° 1280 x 720ï¼Œå¦‚æœéœ€è¦çš„è¯ç¼©æ”¾åˆ°æ›´å° ffmpeg -i \u003cinput\u003e -vf \"scale=1280:720:force_original_aspect_ratio=decrease\" \u003coutput\u003e æ›´å¤šå…³äºç¼©æ”¾çš„æŠ€å·§ï¼š http://trac.ffmpeg.org/wiki/Scaling%20(resizing)%20with%20ffmpeg https://superuser.com/questions/547296/ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:23:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å¡«å……ï¼ˆPADDINGï¼‰ å¡«å……é»‘è¾¹åˆ°æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚å°† 1920 x 800 çš„è§†é¢‘å¡«å……åˆ° 1920 x 1080ï¼š ffmpeg -i \u003cinput\u003e -vf \"pad=1920:1080:(ow-iw)/2:(oh-ih)/2\" \u003coutput\u003e ä½¿ç”¨å¤‡æ³¨ï¼š å¯ä»¥ä½¿ç”¨æ•°å­¦è¡¨è¾¾å¼ ow å’Œ oh æ˜¯è¾“å‡ºæ–‡ä»¶çš„å®½å’Œé«˜ iw å’Œ ih æ˜¯è¾“å…¥æ–‡ä»¶çš„å®½å’Œé«˜ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:23:2","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æ·¡å…¥æ·¡å‡ºï¼ˆFADINGï¼‰ åœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹ä½¿ç”¨æŒ‡å®šæŒç»­æ—¶é—´çš„ç®€å•æ·¡å…¥æ·¡å‡ºæ•ˆæœï¼š ffmpeg -i \u003cinput\u003e -filter:v \\ \"fade=t=in:st=0:d=5,fade=t=out:st=30:d=5\" \\ \u003coutput\u003e è¯‘è€…æŒ‰ï¼šä½¿ç”¨ FFmpeg å‘½ä»¤è¡Œæ—¶ï¼Œæœ‰æ—¶ä¸€è¡Œä»£ç å¤ªé•¿ä¸æ–¹ä¾¿ç¼–å†™å’ŒæŸ¥çœ‹ï¼Œå°±å¯ä»¥ä½¿ç”¨æ¢è¡Œç¬¦åˆ†è¡Œç¼–å†™ï¼Œä¸åŒçš„ Shell æœ‰ä¸åŒçš„æ¢è¡Œç¬¦ï¼Œä¾‹å¦‚ â€œ\\â€ æ˜¯ Bash çš„æ¢è¡Œç¬¦ï¼ŒWindows ä¸‹ CMD çš„æ¢è¡Œç¬¦æ˜¯ â€œ^â€ï¼Œè¯·æ³¨æ„æ›¿æ¢ã€‚ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:23:3","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æ–‡æœ¬ç»˜å›¾ / æ–‡å­—æ°´å°ï¼ˆDRAWING TEXTï¼‰ ç”¨äºåœ¨è§†é¢‘ä¸ŠåŠ ä¸Šæ–‡æœ¬çš„å¤æ‚ç³»ç»Ÿï¼š ffmpeg -i \u003cinput\u003e -vf \\ drawtext=\"text='Test Text':x=100:y=50:\\ fontsize=24:fontcolor=yellow:box=1:boxcolor=red\" \\ \u003coutput\u003e å­—ä½“ã€å¤§å°ã€ä½ç½®ã€é¢œè‰²â€¦éƒ½æœ‰éƒ½æœ‰å„ç§ç›¸å…³çš„å‚æ•° æ–‡å­—çƒ§å½•åŠŸèƒ½å¯ä»¥æ‹“å±•ï¼Œä¾‹å¦‚æŒ‰å¸§æ•°æˆ–è€…æ—¶é—´ç çƒ§å½• æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œå‚è€ƒï¼šhttp://ffmpeg.org/ffmpeg-all.html#drawtext-1 ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:23:4","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å¤æ‚è¿‡æ»¤å™¨ï¼ˆCOMPLEX FILTERINGï¼‰ å¤æ‚è¿‡æ»¤å™¨ä¸æ­¢ä¸€ä¸ªè¾“å…¥æˆ–è€…è¾“å‡ºï¼š ffmpeg -i \u003cinput1\u003e -i \u003cinput2\u003e -filter_complex \\ \"[0:v:0][1:v:0]overlay[outv]\" \\ -map \"[outv]\" \u003coutput\u003e è¿‡ç¨‹æ‹†è§£ï¼š æŒ‡å®šè¾“å…¥åˆ°è¿‡æ»¤é“¾ï¼ˆfilterchainï¼‰ï¼ˆä¾‹å¦‚ [0:v:0][1:v:0]ï¼‰ æŒ‡å®šè¿‡æ»¤é“¾ä¸­çš„æ»¤é•œï¼ˆä¾‹å¦‚ï¼šoverlayï¼‰ æŒ‡å®šè¿‡æ»¤é“¾çš„è¾“å‡ºæ ‡ç­¾ï¼ˆä¾‹å¦‚ï¼š[outv]ï¼‰ æ˜ å°„è¾“å‡ºæ ‡ç­¾åˆ°è¾“å‡ºæ–‡ä»¶ ä½¿ç”¨ ; ä¸€æ¬¡å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªè¿‡æ»¤é“¾ æ›´å¤šè¯¦ç»†å†…å®¹ï¼Œå‚è€ƒï¼šhttp://ffmpeg.org/ffmpeg-all.html#Filtergraph-syntax-1 ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:24:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æ‹¼æ¥è½¨é“ï¼ˆCONCATENATING STREAMSï¼‰ è§£ç ä¸‰ä¸ªè§†é¢‘/éŸ³é¢‘è½¨é“å¹¶æ‹¼æ¥åˆ°å¦ä¸€ä¸ªä¸­ï¼š ffmpeg -i \u003cinput1\u003e -i \u003cinput2\u003e -i \u003cinput3\u003e -filter_complex \\ \"[0:0][0:1][1:0][1:1][2:0][2:1]concat=n=3:v=1:a=1[outv][outa]\" \\ -map \"[outv]\" -map \"[outa]\" \u003coutput\u003e æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒï¼šhttp://trac.ffmpeg.org/wiki/Concatenateï¼ˆä¹Ÿé€‚ç”¨äºå…¶ä»–æ–¹æ³•ï¼‰ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:24:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"æ—¶é—´çº¿ç¼–è¾‘ï¼ˆTIMELINE EDITINGï¼‰ ä»…åœ¨ç‰¹å®šæ—¶é—´ç‚¹å¯ç”¨è¿‡æ»¤å™¨ ä¾‹å¦‚ï¼š åœ¨å·¦ä¸Šè§’æ˜¾ç¤ºæ°´å° ä»…åœ¨ç¬¬ 1 å’Œç¬¬ 2 ç§’æ˜¾ç¤º ffmpeg -i \u003cvideo\u003e -i \u003cwatermark\u003e -filter_complex \\ \"[0:v][1:v]overlay=10:10:enable='between(t,1,2)'[outv]\" \\ -map \"[outv]\" \u003coutput\u003e æ›´å¤šç”¨æ³•ï¼Œè¯·å‚è€ƒï¼šhttp://ffmpeg.org/ffmpeg-all.html#Timeline-editing ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:24:2","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å…¶ä»–è¿‡æ»¤å™¨ é™¤äº†å‰é¢ä»‹ç»çš„é‚£äº›è¿‡æ»¤å™¨ï¼Œffmpeg ç”Ÿæ€ä¸­è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šå…¶ä»–çš„è¿‡æ»¤å™¨ã€‚ ä¾‹å¦‚ï¼š ä½¿ç”¨é€‰æ‹©è¿‡æ»¤å™¨æ£€æµ‹åœºæ™¯å˜åŒ– å»é™¤æ°´å°ï¼ˆdelogoï¼‰ æ¨¡ç³Šã€è¾¹ç¼˜æ£€æµ‹å’Œå·ç§¯æ»¤æ³¢å™¨ è§†é¢‘ç¨³å®š çŸ¢é‡ç¤ºæ³¢å™¨ã€ç›´æ–¹å›¾å’Œå…¶ä»–ä¿¡æ¯ è‰²åº¦å’Œ alpha æ§åˆ¶ å­—å¹•ç¼–è¾‘ â€¦ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:25:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è®¡ç®—ç®€å•çš„è´¨é‡æŒ‡æ ‡ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:26:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"PSNR (Peak Signal To Noise Ratio) $ ffmpeg -i \u003cdegraded\u003e -i \u003creference\u003e -filter_complex psnr -f null /dev/null [Parsed_psnr_0 @ 0x7fdb187045c0] PSNR y:33.437789 u:39.814416 v:39.319141 average:34.698320 min:29.305186 max:inf è¯‘è€…æŒ‰ï¼šPSNR ä¸­æ–‡æ ‡å‡†è¯‘åä¸ºâ€œå³°å€¼ä¿¡å™ªæ¯”â€ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„è¡¡é‡å‹ç¼©å½±åƒä¿¡å™ªæ¯”çš„æŒ‡æ ‡ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒ ä¸­æ–‡ç»´åŸºç™¾ç§‘ï¼šå³°å€¼ä¿¡å™ªæ¯” ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:26:1","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"SSIM (Structural Similarity) $ ffmpeg -i \u003cdegraded\u003e -i \u003creference\u003e -filter_complex ssim -f null /dev/null [Parsed_ssim_0 @ 0x7fbf0500b660] SSIM Y:0.925477 (11.277116) U:0.948906 (12.916325) V:0.946795 (12.740513) All:0.932935 (11.735054) è¯‘è€…æŒ‰ï¼šSSIM ä¸­æ–‡ä¸€èˆ¬è¯‘ä¸ºâ€œç»“æ„ç›¸ä¼¼æ€§â€ï¼Œæ˜¯è¡¡é‡ä¸¤å¹…å›¾åƒç›¸ä¼¼åº¦çš„æŒ‡æ ‡ï¼Œå…¶è¯¦ç»†çš„ç§‘æ™®å’Œä½¿ç”¨å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šä½¿ç”¨SSIMé‡åŒ–è¯„ä»·è§†é¢‘ç¼–ç è´¨é‡ è¯‘è€…æŒ‰ï¼šé™¤äº†åŸä½œè€…åˆ—å‡ºçš„ PSNR å’Œ SSIM ä¸¤ä¸ªæŒ‡æ ‡å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª Netflix å’Œ å—åŠ å·å¤§å­¦è”åˆå¼€å‘çš„ VMAF ï¼ˆVideo Multimethod Assessment Fusionï¼‰æ˜¯ç›®å‰ Netflix ä¸»è¦ä½¿ç”¨çš„æŒ‡æ ‡ï¼Œè¯¦æƒ…è¿˜æ˜¯å¯ä»¥å‚è€ƒå‰æ–‡æåˆ°çš„è¿™ç¯‡æ–‡ç« ï¼šä»€ä¹ˆå†³å®šäº†ä½ çœ‹åˆ°çš„ç”»è´¨ ä½¿ç”¨ ffprobe è·å–åª’ä½“ä¿¡æ¯ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:26:2","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"åŸºæœ¬æ¦‚å¿µ åŸºç¡€è¯­æ³•ï¼š ffprobe \u003cinput\u003e [-select_streams \u003cselection\u003e] [-show_streams|-show_format|-show_frames|-show_packets] [-show_entries \u003centries\u003e] [-of \u003coutput-format\u003e] è§£é‡Šï¼š select_streams ç”¨äºæŒ‡å®šé€‰æ‹©è§†é¢‘æˆ–è€…éŸ³é¢‘ show_ ç”¨äºé€‰æ‹©æ˜¾ç¤ºå“ªç§ç±»å‹çš„ä¿¡æ¯ show_entries ç”¨äºé€‰æ‹©æ˜¾ç¤ºæ›´å°‘çš„ä¿¡æ¯ of ç”¨äºè®¾ç½®è¾“å‡ºæ ¼å¼ æ›´å¤šä¿¡æ¯ï¼Œå‚è€ƒï¼š https://ffmpeg.org/ffprobe.html http://trac.ffmpeg.org/wiki/FFprobeTips ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:27:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å®é™… ffpobe æ¡ˆä¾‹ Part 1 æ˜¾ç¤ºæ‰€æœ‰çš„æµï¼š ffprobe \u003cinput\u003e -show_streams æ˜¾ç¤ºè§†é¢‘æµä¿¡æ¯ï¼š ffprobe \u003cinput\u003e -select_streams v -show_format Show presentation timestamp and frame type of every frame, in CSV format (p=0 disables CSV section headers): ffprobe \u003cinput\u003e -select_streams v -show_frames \\ -show_entries frame=pkt_pts_time,pict_type -of csv=p=0 è¯‘è€…æŒ‰ï¼šç¬¬ä¸‰ä¸ªæ¡ˆä¾‹ä¸å¤ªæ‡‚ï¼Œæˆ‘è‡ªå·±è¯•äº†è¯•ï¼Œæ•ˆæœä¹Ÿæœ‰ç‚¹å¥‡æ€ªï¼Œå…ˆæ”¾ç€å§ ğŸ˜‚ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:28:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"å®é™… ffpobe æ¡ˆä¾‹ Part 2 æ›´æ”¹è¾“å‡ºä¸º JSON æ ¼å¼ï¼š ffprobe \u003cinput\u003e -select_streams v -show_packets -of json è·å–æ–‡ä»¶ä¸­æµçš„ç¼–å·ï¼ˆnk = 1 ç¦ç”¨ keysï¼‰ ffprobe \u003cinput\u003e -show_format -show_entries format=nb_streams -of compact=nk=1:p=0 ä»¥ç§’æˆ– HH:MM:SS.ms ä¸ºå•ä½è·å–è§†é¢‘é•¿åº¦ ffprobe \u003cinput\u003e -show_format -show_entries format=duration -of compact=nk=1:p=0 ffprobe -sexagesimal \u003cinput\u003e -show_format -show_entries format=duration -of compact=nk=1:p=0 ä»¥ Bit/s ä¸ºå•ä½è·å–éŸ³é¢‘æµ ffprobe \u003cinput\u003e -select_streams a -show_entries stream=bit_rate -of compact=nk=1:p=0 è¯‘è€…æŒ‰ï¼šå…¶å®è¿™ä¸€ç« èŠ‚çš„æ¡ˆä¾‹æˆ‘ä¸ªäººè§‰å¾—æ²¡æœ‰å¾ˆå¤§ä½œç”¨ï¼Œå¹³æ—¶æŸ¥çœ‹åª’ä½“æ–‡ä»¶çš„ä¿¡æ¯åŸºæœ¬ä¸Šä½¿ç”¨ ffprobe \u003cinput\u003e -hide_banner å°±å¤Ÿäº†ã€‚ æ£€æŸ¥è§†é¢‘ç¼–è§£ç å™¨ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:29:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è°ƒè¯•è¿åŠ¨å‘é‡ åœ¨ FFmpeg ä¸­ä½¿ç”¨ H.264 ç¼–è§£ç å™¨å¯è§†åŒ–è¿åŠ¨å‘é‡çš„ç®€å•æ–¹æ³•ï¼ˆä¸é€‚ç”¨äºå…¶ä»–ç¼–è§£ç å™¨ï¼‰ ffplay -flags2 +export_mvs input.mp4 -vf codecview=mv=pf+bf+bb ffmpeg -flags2 +export_mvs -i input.mp4 -vf codecview=mv=pf+bf+bb \u003coutput\u003e pf â€“ P å¸§çš„å‘å‰é¢„æµ‹è¿åŠ¨å‘é‡ bf â€“ B å¸§çš„å‘å‰é¢„æµ‹è¿åŠ¨å‘é‡ bb â€“ B å¸§çš„å‘åé¢„æµ‹è¿åŠ¨å‘é‡ è·Ÿå¤šå‚è€ƒï¼šhttp://trac.ffmpeg.org/wiki/Debug/MacroblocksAndMotionVectors è¯‘è€…æŒ‰ï¼šè¿åŠ¨å‘é‡è¿™æ–¹é¢çš„çŸ¥è¯†ç‚¹æˆ‘ä¹Ÿä¸æ‡‚ï¼Œæ¥æ—¥å†è¡¥å……å§ ğŸ˜‚ ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:30:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Media"],"content":"è§†é¢‘æµåˆ†æ å›¾å½¢åŒ–æ–¹å¼åˆ†æè§†é¢‘æµçš„å…¶ä»–è½¯ä»¶ï¼š Elecard Stream Analyzer (å•†ä¸š) CodecVisa (å•†ä¸š) Intel Video Pro Analyzer (å•†ä¸š) AOMAnalyzer (å…è´¹ï¼Œé’ˆå¯¹ AV1/VP9 ç¼–ç çš„è§†é¢‘) æ€»ç»“ é€šè¿‡è¿™èŠ‚è¯¾ç¨‹ï¼Œä½ åº”è¯¥å­¦åˆ°äº†ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š ç†è§£ FFmpeg åº“ï¼Œç¼–è§£ç å™¨ï¼Œå®¹å™¨ï¼Œç¼–ç å™¨â€¦ ç¼–ç è§†é¢‘å’ŒéŸ³é¢‘ ä½¿ç”¨åŸºç¡€çš„è¿‡æ»¤å™¨ è¯»å–æµä¿¡æ¯å’Œå…ƒæ•°æ® å¦‚æœä½ é‡åˆ°äº†å›°éš¾ï¼Œä¼šå¯»æ‰¾å¸®åŠ© ","date":"2021-06-12","objectID":"/ffmpeg-encoding-and-editing-course/:31:0","tags":["FFmpeg"],"title":"FFmpeg ç¼–ç å’Œç¼–è¾‘å…¥é—¨","uri":"/ffmpeg-encoding-and-editing-course/"},{"categories":["Program Language"],"content":"Overview å®¹å™¨ï¼Œå°±æ˜¯å¯ä»¥å®¹çº³å…¶å®ƒå¯¹è±¡çš„å¯¹è±¡ï¼Œä» JDK 1.2 å¼€å§‹ï¼ŒJava æä¾›äº† Java Collection Frameworkï¼ˆJCFï¼‰ ç»™å¼€å‘è€…æä¾›äº†ä¸€ä¸ªé€šç”¨çš„å®¹å™¨æ¡†æ¶ã€‚ å®¹å™¨ä¸­åªèƒ½æ”¾å¯¹è±¡ï¼Œå¯¹äºåŸºæœ¬ç±»å‹ï¼ˆintã€longã€float ç­‰ï¼‰éœ€è¦åŒ…è£…æˆå¯¹åº”çš„å¯¹è±¡ï¼ˆIntegerã€Longã€Floatï¼‰æ‰èƒ½æ”¾å…¥å®¹å™¨ã€‚å¤§å¤šæ•°æ—¶å€™è£…ç®±å’Œæ‹†ç®±éƒ½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œè¿™ä¼šé€ æˆä¸€å®šç¨‹åº¦ä¸Šçš„æ€§èƒ½å’Œç©ºé—´å¼€é”€ï¼Œä½†æ˜¯ç®€åŒ–äº†è®¾è®¡å’Œç¼–ç ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€‚ä½¿ç”¨å®¹å™¨å¤§æ¦‚æœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š é™ä½å­¦ä¹ éš¾åº¦ é™ä½ç¼–ç¨‹éš¾åº¦ é™ä½è®¾è®¡å’Œå®ç°ç›¸å…³ API çš„éš¾åº¦ æé«˜ç¨‹åºå¯å¤ç”¨æ€§ æé«˜ API ä¹‹é—´çš„äº’æ“ä½œæ€§ æé«˜ç¨‹åºæ€§èƒ½ï¼ˆå®¹å™¨çš„åº•å±‚æ•°æ®ç»“æ„å’Œç®—æ³•é€šå¸¸è¿‡äº†å¤§è§„æ¨¡çš„åŠŸèƒ½å’Œæ€§èƒ½éªŒè¯ï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹æ€§èƒ½ä¼šæ¯”æˆ‘ä»¬è‡ªå·±å†™çš„å¥½ï¼‰ Java é›†åˆæ¡†æ¶åˆ†ä¸º Collection å’Œ Map ä¸¤å¤§ç±»ï¼ŒCollection æ˜¯å­˜å‚¨å•å…ƒç´ çš„å®¹å™¨ï¼ŒMap æ˜¯å­˜å‚¨é”®å€¼å¯¹ï¼ˆä¸¤ä¸ªå¯¹è±¡ï¼‰çš„å®¹å™¨ã€‚ è¯¦æƒ…çš„ JCF ç±»å›¾å¦‚ä¸‹ï¼ŒåŒ…å«å¹¶å‘å’Œéå¹¶å‘å®ç°ï¼Œä»¥åŠåº•å±‚æ•°æ®ç»“æ„ï¼š åœ¨ J.U.C(java.util.concurrent) æä¾›å¹¶å‘å®¹å™¨ä¹‹å‰ï¼Œæ‰€æœ‰å®¹å™¨éƒ½åœ¨ java.util åŒ…ä¸‹ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€å¤šä¸ªçº¿ç¨‹å¹¶å‘è¯»å†™æ—¶å¯èƒ½ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚ å³ä½¿æä¾›äº†çº¿ç¨‹å®‰å…¨çš„å®ç°ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒç®€å•ç²—æš´çš„ä½¿ç”¨ Synchronized å…³é”®å­—å¯¹æ“ä½œåŠ é”ï¼Œæ¯”å¦‚çº¿ç¨‹å®‰å…¨çš„ Map å®¹å™¨ï¼šHashTableï¼Œå’Œçº¿ç¨‹å®‰å…¨çš„ Collection å®¹å™¨ï¼šVectorï¼Œå®é™…ä¸Šè¿™äº›å®¹å™¨åœ¨å¹¶å‘è¯»å†™çš„éœ€æ±‚ä¸‹ï¼Œåªèƒ½ä¿è¯å®‰å…¨ï¼Œä¸èƒ½ä¿è¯é«˜æ•ˆï¼Œå› æ­¤åŸºæœ¬éƒ½å·²ç»ä¸æ¨èä½¿ç”¨äº†ã€‚ ","date":"2021-05-02","objectID":"/the-java-collections-framework/:1:0","tags":["Collections","Java"],"title":"Java é›†åˆæ¡†æ¶ä¸€æ–‡é€š","uri":"/the-java-collections-framework/"},{"categories":["Program Language"],"content":"Non Concurrent Collections æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®é™…å¼€å‘ä¸­ä½¿ç”¨å¾—æœ€å¤šçš„ â€œå•çº¿ç¨‹å®¹å™¨â€ï¼Œå…¶ç±»å›¾ç»“æ„å¤§æ¦‚å¦‚ä¸‹å›¾ï¼š ","date":"2021-05-02","objectID":"/the-java-collections-framework/:2:0","tags":["Collections","Java"],"title":"Java é›†åˆæ¡†æ¶ä¸€æ–‡é€š","uri":"/the-java-collections-framework/"},{"categories":["Program Language"],"content":"Collection Collection æ¥å£æ˜¯ JDK ä¸­æ‰€æœ‰å•å…ƒç´ å®¹å™¨çš„ç¥–å…ˆæ¥å£ï¼Œå…¶ä¸‹ä¸»è¦æœ‰ä¸‰ä¸ªæ¥å£ï¼Œåˆ†åˆ«æ˜¯å¯é‡å¤é›†åˆå®¹å™¨æ¥å£ Listï¼Œä¸å¯é‡å¤é›†åˆå®¹å™¨æ¥å£ Setï¼Œå’Œé˜Ÿåˆ—å®¹å™¨æ¥å£ Queueï¼Œåˆ†åˆ«é€‚ç”¨äºä¸åŒåœºæ™¯ã€‚ List List æ˜¯ä¸€ä¸ªå…ƒç´ æœ‰åºã€å¯é‡å¤ã€å¯ä¸ºç©ºçš„é›†åˆæ¥å£ï¼Œé›†åˆä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰å¯¹åº”çš„é¡ºåºç´¢å¼•ï¼Œé»˜è®¤æŒ‰ç…§å…ƒç´ çš„æ·»åŠ é¡ºåºè®¾ç½®ä¸‹æ ‡ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡è®¿é—®æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œä½†æ˜¯ç”±äºä¸åŒå®ç°ç±»ä¸­åº•å±‚ä½¿ç”¨çš„æ•°æ®ç»“æ„ä¸åŒï¼Œæ·»åŠ ã€åˆ é™¤å’Œéšæœºè®¿é—®çš„æ—¶é—´å¤æ‚åº¦å„ä¸ç›¸åŒã€‚ ArrayList ArrayList æ˜¯åŸºäºæ•°ç»„å®ç°çš„å®¹å™¨ç±»ï¼Œæ¯ä¸ª ArrayList éƒ½æœ‰ä¸€ä¸ªå®¹é‡ï¼ˆcapacityï¼‰è¡¨ç¤ºåº•å±‚æ•°ç»„çš„å¤§å°ï¼Œå½“å®¹é‡ä¸è¶³æ—¶ï¼ŒArrayList ä¼šè‡ªåŠ¨æ‰©å®¹ï¼Œé»˜è®¤æ‰©å®¹æ­¥é•¿æ˜¯å½“å‰å®¹é‡çš„ 1.5 å€ã€‚ ç”±äº ArrayList çš„åº•å±‚æ•°æ®ç»“æ„æ˜¯æ•°ç»„ï¼Œéœ€è¦è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥è‡ªåŠ¨æ‰©å®¹å®é™…ä¸Šæ˜¯ç”³è¯·ä¸€ä¸ªåŸæ¥å¤§å° 1.5 å€çš„æ–°æ•°ç»„ï¼Œç„¶åå°†åŸæ•°ç»„ä¸­çš„æ•°æ®æ‹·è´åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œæ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚ å› æ­¤åœ¨ä½¿ç”¨ ArrayList æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªæŠ€å·§ï¼Œå°½é‡é¿å…æˆ–å‡å°‘æ‰©å®¹æ“ä½œï¼Œæé«˜æ•ˆç‡ï¼š åœ¨åˆå§‹åŒ–æ—¶ï¼Œå°½é‡è®¾ç½®ä¸€ä¸ªåˆç†çš„åˆå§‹å¤§å°ï¼Œå‡å°‘æ‰©å®¹é¢‘ç‡ã€‚ åœ¨æ·»åŠ å¤§é‡å…ƒç´ ä¹‹å‰ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ ensureCapacity(int minCapacity) å¢å¤§å®¹é‡ï¼Œå‡å°‘é€’å¢å¼æ‰©å®¹çš„æ¬¡æ•°ã€‚ åŸºäºæ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒArrayList éšæœºè®¿é—®çš„çš„æ•ˆç‡éå¸¸é«˜ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œè€Œæ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ç¨ä½ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ ArrayList è¯¦ç»†çš„æºç è§£æå‚è€ƒè¿™é‡Œ LinkedList LinkedList æ˜¯åŸºäºé“¾è¡¨å®ç°çš„å®¹å™¨ç±»ï¼ŒåŒæ—¶å®ç°äº† List æ¥å£å’Œ Queue æ¥å£çš„é›†åˆï¼Œè¿™æ„å‘³å®ƒæ—¢å¯ä»¥å½“åšé¡ºåºå®¹å™¨ï¼ˆListï¼‰ä½¿ç”¨ï¼Œåˆå¯ä»¥å½“åšé˜Ÿåˆ—ï¼ˆQueueï¼‰ä½¿ç”¨ï¼Œè¿˜å¯ä»¥å½“åšæ ˆï¼ˆStackï¼‰æ¥ä½¿ç”¨ã€‚ å®é™…ä¸Šï¼Œå½“æˆ‘ä»¬éœ€è¦æ ˆæˆ–è€…é˜Ÿåˆ—æ—¶ï¼Œåº”è¯¥é¦–é€‰ ArrayDequeï¼Œåœ¨æ ˆå’Œé˜Ÿåˆ—çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼ŒArrayDeque æ¯” LinkedList æ€§èƒ½æ›´å¥½ã€‚æ‰€ä»¥ LinkedList æ›´å¤šçš„æ—¶å€™è¿˜æ˜¯ç”¨æ¥å½“åšé¡ºåºé›†åˆï¼ˆListï¼‰æ¥ä½¿ç”¨ã€‚ åŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼ŒLinkedList æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡éå¸¸é«˜ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œè€Œéšæœºè®¿é—®çš„æ•ˆç‡ç¨ä½ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œè€Œä¸”ä¸å­˜åœ¨æ‰©å®¹æ—¶çš„æ•°æ®æ‹·è´å¯¼è‡´çš„æ•ˆç‡é—®é¢˜ã€‚ LinkedList è¯¦ç»†çš„æºç è§£æï¼Œå‚è€ƒè¿™é‡Œ Vector Vector åŸºæœ¬å’Œ ArrayList åŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯å†…éƒ¨ä½¿ç”¨ synchronized å¯¹æ‰€æœ‰è¯»å†™æ“ä½œéƒ½åšäº†åŒæ­¥ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯åº”ä¸º synchronized æœ¬èº«å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼æ•ˆç‡å¹¶ä¸é«˜ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ Vector å¯èƒ½ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œåº”è¯¥ä½¿ç”¨ JUC ä¸­æä¾›çš„ CopyOnWriteArrayListã€‚ Stack Stack ç»§æ‰¿è‡ª Vectorï¼Œæ˜¯ä¸€ä¸ªä½¿ç”¨æ•°ç»„å®ç°çš„æ ˆç»“æ„ï¼Œç”±äºåŠŸèƒ½å’Œæ€§èƒ½é™åˆ¶ï¼Œç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨äº†ï¼Œå¦‚æœéœ€è¦æ ˆç»“æ„ï¼Œåº”è¯¥ä½¿ç”¨ Queue æ¥å£ä¸‹çš„ ArrayDeque å®ç°ç±»ï¼Œå‚è€ƒä¸‹æ–‡ ArrayDeque çš„ä»‹ç»ã€‚ Set Set æ¥å£ä¸­çš„æ–¹æ³•åŸºæœ¬å’Œ List ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äº Set é›†åˆä¸­ä¸å…è®¸é‡å¤å…ƒç´ ï¼Œå¦‚æœæ·»åŠ ç›¸åŒçš„å…ƒç´ åˆ° Set é›†åˆä¸­ï¼Œç¬¬äºŒæ¬¡æ·»åŠ æ—¶ add() æ–¹æ³•ä¼šè¿”å› falseï¼Œæ•°æ®ä¼šæ·»åŠ å¤±è´¥ï¼ŒSet æ¥å£ä¹Ÿä¸å¼ºåˆ¶ä¿è¯é›†åˆä¸­å…ƒç´ çš„é¡ºåºï¼Œä¸åŒçš„å®ç°ç±»æ ¹æ®è‡ªèº«çš„å®ç°æ–¹å¼å†³å®šæ˜¯å¦ä¿æŒé¡ºåºï¼Œå¹¶ä¸”ä¹Ÿä¸é™åˆ¶å…ƒç´ æ˜¯å¦å¯ä¸ºç©ºï¼Œä¸åŒçš„å®ç°ç±»å¯å¦ä¸ºç©ºçš„ç‰¹ç‚¹ä¸åŒã€‚ Set æ¥å£çš„å®ç°å…¶å®å°±æ˜¯æŠŠå¯¹åº”çš„ Map æ¥å£çš„å®ç°è¿›è¡Œä¸€å±‚åŒ…è£…ï¼Œæ¯”å¦‚ HashSet æ˜¯å¯¹ HashMap çš„åŒ…è£…ï¼ŒTreeSet æ˜¯å¯¹ TreeMap çš„åŒ…è£…ï¼ŒLinkedHashSet æ˜¯å¯¹ LinkedHashMap çš„åŒ…è£…ã€‚ HashSet HashSet å®é™…ä¸Šæ˜¯å¯¹ HashMap çš„ä¸€ä¸ªåŒ…è£…ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š public class HashSet\u003cE\u003e { ...... //HashSeté‡Œé¢æœ‰ä¸€ä¸ªHashMap private transient HashMap\u003cE,Object\u003e map; // Dummy value to associate with an Object in the backing Map private static final Object PRESENT = new Object(); public HashSet() { map = new HashMap\u003c\u003e(); } ...... public boolean add(E e) { //ç®€å•çš„æ–¹æ³•è½¬æ¢ return map.put(e, PRESENT)==null; } ...... } æ‰€ä»¥å…¶å®ç°åŸç†å’Œ HashMap ä¸€è‡´ï¼Œå‚è€ƒä¸‹æ–‡ HashMap çš„å®ç°ä¸ç‰¹ç‚¹ã€‚ TreeSet TreeSet å®é™…ä¸Šä¹Ÿæ˜¯å¯¹ TreeMap çš„ä¸€ä¸ªåŒ…è£…ï¼Œå¦‚ä¸‹ä»£ç ï¼š public class TreeSet\u003cE\u003e extends AbstractSet\u003cE\u003e implements NavigableSet\u003cE\u003e, Cloneable, java.io.Serializable { ...... private transient NavigableMap\u003cE,Object\u003e m; // Dummy value to associate with an Object in the backing Map private static final Object PRESENT = new Object(); public TreeSet() { // TreeSeté‡Œé¢æœ‰ä¸€ä¸ªTreeMap this.m = new TreeMap\u003cE,Object\u003e(); } ...... public boolean add(E e) { //ç®€å•çš„æ–¹æ³•è½¬æ¢ return m.put(e, PRESENT)==null; } ...... } æ‰€ä»¥å…¶å®ç°åŸç†å’Œ TreeMap ä¸€è‡´ï¼Œå‚è€ƒä¸‹æ–‡ TreeMap çš„å®ç°ä¸ç‰¹ç‚¹ã€‚ LinkedHashSet LinkedHashSet å®é™…ä¸Šä¹Ÿæ˜¯å¯¹ LinkedHashMap çš„åŒ…è£…ï¼ŒåŸºæœ¬å°±æ˜¯è¿™æ ·ï¼š public class LinkedHashSet\u003cE\u003e extends HashSet\u003cE\u003e implements Set\u003cE\u003e, Cloneable, java.io.Serializable { ...... // LinkedHashSeté‡Œé¢æœ‰ä¸€ä¸ªLinkedHashMap public LinkedHashSet(int initialCapacity, float loadFactor) { map = new LinkedHashMap\u003c\u003e(initialCapacity, loadFactor); } ...... //ç®€å•çš„æ–¹æ³•è½¬æ¢ public boolean add(E e) { return map.put(e, PRESENT)==null; } ...... } æ‰€ä»¥å…¶å®ç°åŸç†å’Œ LinkedHashMap ä¸€è‡´ï¼Œå‚è€ƒä¸‹æ–‡ LinkedHashMap çš„å®ç°ä¸ç‰¹ç‚¹ã€‚ Queue Queue æ˜¯ JDK ä¸­é˜Ÿåˆ—ä¹Ÿç»§æ‰¿è‡ª Collection æ¥å£ï¼Œé™¤äº† Collection æ¥å£ä¸­çš„æ–¹æ³•ï¼Œè¿˜é¢å¤–æä¾›äº†ä¸¤ç»„å…± 6 ä¸ªæ–¹æ³•ï¼Œè§„èŒƒé˜Ÿåˆ—ç‰¹å¾çš„èƒ½åŠ›ï¼Œä¸€ç»„æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å®ç°ï¼Œä¸€ç»„æ˜¯è¿”å›å€¼çš„å®ç°ï¼ˆæ²¡æœ‰åˆ™è¿”å› nullï¼‰ hrows exception Returns special value Insert add(e) offer(e) Remove remove(e) poll(e) Examine element(e) peek(e) Deque \u0026 ArrayDeque Deque æ˜¯ï¼ˆdouble ended queueï¼‰çš„ç®€ç§°ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯åŒç«¯é˜Ÿåˆ—ï¼Œæ˜¯ç»§æ‰¿è‡ª Queue æ¥å£çš„å­æ¥å£ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ•°æ®ç»“æ„ä¸­ï¼Œé˜Ÿåˆ—ï¼ˆQueueï¼‰å’Œæ ˆï¼ˆStackï¼‰çš„æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œé˜Ÿåˆ—çš„å‡ºå…¥å£åˆ†åˆ«åœ¨ä¸¤ç«¯ï¼Œæ‰€ä»¥æ˜¯å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ï¼Œè€Œæ ˆçš„å‡ºå…¥å£åœ¨åŒä¸€ç«¯ï¼Œæ‰€ä»¥æ˜¯åè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ã€‚è€ŒåŒç«¯é˜Ÿåˆ—çš„ä¸¤ç«¯åˆ†åˆ«éƒ½å¯ä»¥åšå‡ºå…¥å£ï¼Œå¦‚æœå°ä½å…¶ä¸­çš„ä¸€ç«¯ï¼Œé‚£å°±å˜æˆäº†æ ˆï¼Œæ‰€ä»¥åŒç«¯é˜Ÿåˆ—ä¹Ÿå¯ä»¥ç›´æ¥å½“åšæ ˆæ¥ç”¨ã€‚ å½“åšé˜Ÿåˆ—ä½¿ç”¨æ—¶ï¼Œä¸‹è¡¨åˆ—å‡ºäº† Deque ä¸ Queue ç›¸å¯¹åº”çš„æ¥å£ï¼š Queue Method Equivalent Deque Method è¯´æ˜ add(e) addLast(e) å‘é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ offer(e) offerLast(e) å‘é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œå¤±è´¥åˆ™è¿”å›false remove() removeFirst() è·å–å¹¶åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ poll() pollFirst() è·å–å¹¶åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå¤±è´¥åˆ™è¿”å›null element() getFirst() è·å–ä½†ä¸åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ peek() peekFirst() è·å–ä½†ä¸åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå¤±è´¥åˆ™è¿”å›null å½“åšæ ˆä½¿ç”¨æ—¶ï¼Œä¸‹è¡¨åˆ—å‡ºäº† Deque å’Œ ä¸ Stackï¼ˆå·²é€€ä¼‘çš„æ ˆç»“æ„å®ç°ï¼‰å¯¹åº”çš„æ¥å£ï¼š Stack Method Equivalent Deque Method è¯´æ˜ push(e) addFirst(e) å‘æ ˆé¡¶æ’å…¥å…ƒç´ ï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ æ—  offerFirst(e) å‘æ ˆé¡¶æ’å…¥å…ƒç´ ï¼Œå¤±è´¥åˆ™è¿”å›false pop() removeFirst() è·å–å¹¶åˆ é™¤æ ˆé¡¶å…ƒç´ ï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ æ—  pollFi","date":"2021-05-02","objectID":"/the-java-collections-framework/:2:1","tags":["Collections","Java"],"title":"Java é›†åˆæ¡†æ¶ä¸€æ–‡é€š","uri":"/the-java-collections-framework/"},{"categories":["Program Language"],"content":"Map Map æ¥å£å¯ä»¥çœ‹ä½œæ˜¯å’Œ Collection å¹³çº§çš„å€Ÿå£ï¼Œæ˜¯ JDK ä¸­æ‰€æœ‰é”®å€¼å¯¹å®¹å™¨çš„ç¥–å…ˆæ¥å£ï¼ŒæŒ‰ç…§æ˜¯å¦ä¿æŒå®¹å™¨ä¸­å…ƒç´ çš„é¡ºåºï¼Œå¤§æ¦‚å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š å®ç°äº† SortedMap æ¥å£çš„â€œæœ‰åº Mapâ€ï¼Œä»¥åŠä¸€ä¸ªç‰¹æ®Šçš„ EnumMap æ²¡æœ‰å®ç° SortedMap æ¥å£çš„ â€œæ— åº Mapâ€ HashMap HashMap æ˜¯ Map æ¥å£æœ€é‡è¦çš„å®ç°ç±»ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æ—¥å¸¸ Java å¼€å‘ä¸­æœ€å¸¸ç”¨çš„é”®å€¼å¯¹æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚å¯ä»¥æ”¾å…¥ key ä¸º null çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ”¾å…¥ value ä¸º null çš„å…ƒç´ ã€‚ HashMap æ˜¯åŸºäº æ•£åˆ—è¡¨ï¼ˆHash Tableï¼‰ æ•°æ®ç»“æ„çš„å®¹å™¨ï¼Œä½†æ˜¯æ•£åˆ—è¡¨å¿…é¡»è¦è§£å†³æ•£åˆ—å†²çªçš„é—®é¢˜ï¼Œæ•£åˆ—å†²çªç›®å‰ä¸»è¦æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼šå¼€æ”¾å¯»å€æ³•ï¼ˆopen addressingï¼‰å’Œé“¾è¡¨æ³•ï¼ˆchainingï¼‰ï¼ŒHashMap ä½¿ç”¨é“¾è¡¨æ³•è§£å†³æ•£åˆ—å†²çªé—®é¢˜ã€‚ ç†è®ºä¸Š HashMap çš„è¯»ã€å†™ã€åˆ é™¤çš„æ•ˆç‡éƒ½æ˜¯ $O(1)$ï¼Œéå¸¸é«˜æ•ˆï¼Œä½†æ˜¯ç”±äºæ•£åˆ—å†²çªé—®é¢˜çš„å­˜åœ¨ï¼ŒHashMap å®é™…æ€§èƒ½è¡¨ç°å¯èƒ½ä¸å¤ªç¨³å®šï¼Œè€Œä¸”ä¸ä¸€å®šèƒ½è¾¾åˆ°ç†è®ºæ•ˆç‡ã€‚ å½±å“ HashMap æ€§èƒ½çš„ä¸¤ä¸ªæœ€é‡è¦çš„å‚æ•°æ˜¯ï¼šåˆå§‹å®¹é‡ï¼ˆinitial capacityï¼‰å’Œè´Ÿè½½ç³»æ•°ï¼ˆload factoryï¼‰ åˆå§‹å®¹é‡æŒ‡å®šäº†åˆå§‹ table çš„å¤§å°ï¼Œå¤æ‚ç³»æ•°æŒ‡å®šäº† bucket è‡ªåŠ¨æ‰©å®¹çš„ä¸´ç•Œå€¼ã€‚å½“ entry çš„ä¸ªæ•°è¶…è¿‡ capacity * load_factory æ—¶ï¼Œå®¹å™¨å°†è‡ªåŠ¨æ‰©å®¹å¹¶é‡æ–°æ•£åˆ—ã€‚å¯¹äºæ’å…¥å…ƒç´ è¾ƒå¤šçš„ HashMapï¼Œå°†åˆå§‹å®¹é‡è®¾ç½®å¾—å¤§ä¸€äº›å¯ä»¥å‡å°‘è‡ªåŠ¨æ‰©å®¹ï¼ˆåŒ ArrayList çš„åŸç†ï¼‰å’Œé‡æ–°æ•£åˆ—çš„æ¬¡æ•°ã€‚ ä¸ºäº†ä¼˜åŒ– HashMap çš„å®é™…æ€§èƒ½ï¼Œå…¶å…·ä½“å®ç°åœ¨ JDK 8 å‰åæœ‰ä¸€äº›å·®åˆ«ã€‚ HashMap è¯¦ç»†çš„æºç è§£æï¼Œå‚è€ƒè¿™é‡Œ Before JDK 8 åœ¨ JDK 8 ä¹‹å‰ï¼ŒHashMap åº•å±‚ç”¨æ•°æ®ç»“æ„æ˜¯æ•°ç»„+é“¾è¡¨ï¼Œç”¨æ•°ç»„åš bucketsï¼Œå®é™…æ•°æ®å­˜å‚¨åœ¨æ¯ä¸ª bucket åçš„é“¾è¡¨ä¸­ï¼Œå…¶å¤§è‡´ç»“æ„å¦‚ä¸‹ï¼š è¿™æ˜¯éå¸¸ç»å…¸çš„æ•£åˆ—å†²çªè§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯åœ¨æ•°æ®é‡å¾ˆå¤§æˆ–è€…æ•£åˆ—ä¸å¤Ÿå‡åŒ€çš„æ—¶å€™ï¼Œå®¹æ˜“å¯¼è‡´æ•°æ®èŠ‚ç‚¹é“¾è¡¨è¿‡é•¿ï¼Œä¼šé™ä½æ•£åˆ—è¡¨çš„è¯»å–æ€§èƒ½ï¼Œè¾¾ä¸åˆ°ç†æƒ³çŠ¶æ€ä¸‹çš„ $O(1)$ æ—¶é—´å¤æ‚åº¦ï¼Œç”šè‡³æ˜¯è¾¾åˆ° $O(n)$ çº§åˆ«ã€‚ After JDK 8 åœ¨ JDK 8ï¼ˆå«ï¼‰ä¹‹åï¼ŒHashMap æœ€å¤§çš„å˜åŒ–å°±åœ¨åº•å±‚æ•°æ®ç»“æ„ä¸Šå¼•å…¥äº†çº¢é»‘æ ‘ï¼Œä¸ºäº†é™ä½æ•°æ®èŠ‚ç‚¹çš„æŸ¥è¯¢å¼€é”€ï¼Œåœ¨èŠ‚ç‚¹æ•°æ®è¾¾åˆ° 8 ä¸ªçš„æ—¶å€™ï¼Œä¼šå°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ï¼Œè¿™æ ·åœ¨èŠ‚ç‚¹æ•°æ®æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥é™åˆ° $O(log_n)$ å…¶ç»“æ„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š çº¢é»‘æ ‘æ˜¯ä¸€ä¸ªæ€§èƒ½éå¸¸ç¨³å®šçš„è¿‘ä¼¼å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆbinary seach treeï¼‰ç»“æ„ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®ç¡®å®æ¯”è¾ƒå¤šï¼ˆå¯èƒ½æ˜¯å› ä¸ºæ•£åˆ—å‡½æ•°è®¾è®¡å¾—ä¸å¥½ï¼Œä¹Ÿå¯èƒ½æ˜¯æ•°æ®é‡å®åœ¨å¤ªå¤§ï¼‰çš„æ—¶å€™ï¼Œè½¬æˆçº¢é»‘æ ‘ç»“æ„æ˜¯ä¸€ä¸ªéå¸¸é è°±çš„æå‡ HashMap æ•´ä½“æ€§èƒ½çš„æ–¹æ³•ã€‚ è™½ç„¶çº¢é»‘æ ‘å®ç°èµ·æ¥æ¯”é“¾è¡¨å¤æ‚çš„å¤šï¼Œä½†æ˜¯å¥½åœ¨ JDK çš„å·¥ç¨‹å¸ˆä»¬å·²ç»å¸®æˆ‘ä»¬æœ€å¥½äº†è¿™éƒ¨åˆ†çš„å·¥ä½œï¼Œæˆ‘ä»¬åªéœ€è¦å‡çº§åˆ° JDK 8ï¼Œå°±å¯ä»¥ä¸æ”¹ä¸€å¤„ä»£ç ï¼Œäº«å— HashMap çš„æ€§èƒ½æå‡ã€‚ HashTable HashTable åŸºæœ¬å’Œ HashMap å·®ä¸å¤šï¼Œåªæ˜¯å†…éƒ¨å„ä¸ªæ–¹æ³•ç”¨ Synchronized å®ç°äº†åŒæ­¥ï¼Œåœ¨å¤šçº¿ç¨‹è¯»å†™çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´ã€‚ ä½†æ˜¯ HashTable å¤šçº¿ç¨‹è¯»å†™çš„æ€§èƒ½å¹¶ä¸å¥½ï¼Œæ‰€ä»¥ï¼Œå¦‚æœç¡®å®éœ€è¦å¤šçº¿ç¨‹è¯»å†™å®‰å…¨çš„ Map å®¹å™¨ï¼Œåº”è¯¥ä½¿ç”¨ J.U.C æä¾›çš„ ConcurrentMap æ¥å£çš„å®ç°ç±»ï¼Œæ¯”å¦‚ ConcurrentHashMapï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨ HashTableï¼ŒHashTable è¯¥é€€ä¼‘äº†ã€‚ LinkedHashMap LinkedHashMap æ˜¯ HashMap çš„ç›´æ¥å­ç±»ï¼Œæ‰€ä»¥ key å’Œ value åŒæ ·å¯ä»¥ä¸ºç©ºã€‚çœ‹è¿™ä¸ªåå­—å¤§æ¦‚å°±èƒ½çŒœåˆ°ï¼Œè¿™æ˜¯ LinkedList å’Œ HashMap çš„ç»“åˆï¼Œå¯ä»¥å°† LinkedHashMap çœ‹ä½œæ˜¯ç”¨ LinkedList å¼ºåŒ–è¿‡çš„ HashMapã€‚å¦‚ä¸‹æ˜¯ LinkedHashMap çš„ç»“æ„å›¾ï¼š ä»å›¾ä¸Šèƒ½çœ‹å‡ºæ¥ï¼ŒLinkedHashMap å’Œ HashMap ä¸»ä½“ç»“æ„ä¸Šå®Œå…¨ä¸€è‡´ï¼ŒåŒºåˆ«åœ¨äº LinkedHashMap ä½¿ç”¨åŒå‘é“¾è¡¨å®ç°äº†å†²çªé“¾è¡¨ï¼Œå¹¶ä¸”è¿™ä¸ªåŒå‘é“¾è¡¨å°†æ‰€æœ‰çš„ entry éƒ½è¿äº†èµ·æ¥ï¼Œè¿™æ ·åšç›¸æ¯” HashMap æœ‰ä¸¤ä¸ªé¢å¤–çš„å¥½å¤„ï¼š å¯ä»¥ä¿è¯å…ƒç´ çš„è¿­ä»£é¡ºåºå’Œæ’å…¥é¡ºåºç›¸åŒã€‚ è¿­ä»£æ•´ä¸ª Map çš„æ—¶å€™ï¼Œä¸éœ€è¦åƒ HashMap é‚£æ ·è¿­ä»£æ•´ä¸ª tableï¼Œè€Œæ˜¯åªéœ€è¦éå† header æŒ‡å‘çš„åŒå‘é“¾è¡¨å³å¯ï¼Œä¹Ÿå°±æ˜¯ LinkedHashMap çš„è¿­ä»£æ—¶é—´å’Œ Table çš„å¤§å°æ— å…³ï¼Œè€Œæ˜¯åªä¸å®é™…ä¸Š entry çš„æ•°é‡æœ‰å…³ã€‚ ç”±äºä¸»ä½“ç»“æ„å’Œ HashMap ä¸€æ ·ï¼Œæ‰€ä»¥å½±å“ LinkedHashMap æ€§èƒ½çš„ä¹Ÿæ˜¯åˆå§‹å®¹é‡ï¼ˆinitial capacityï¼‰å’Œè´Ÿè½½ç³»æ•°ï¼ŒåŸå› ä¹Ÿå’Œ HashMap ä¸€æ ·ã€‚ LinkedHashMap é™¤äº†ä¿è¯è¿­ä»£é¡ºåºä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„ç”¨æ³•ï¼šè½»æ¾å®ç°ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ç­–ç•¥çš„ç¼“å­˜ç»“æ„ï¼Œæ³¨æ„ï¼Œæ˜¯ç¼“å­˜ï¼Œä¸æ˜¯é˜Ÿåˆ—ã€‚ LinkedHashMap æœ‰ä¸€ä¸ª HashMap ä¸­æ²¡æœ‰çš„å­ç±»æ–¹æ³•ï¼šboolean removeEldestEntry(Map.Entry\u003cK,V\u003e eldest)ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯å‘Šè¯‰ Map æ˜¯å¦è¦åˆ é™¤â€œæœ€è€â€çš„ Entryï¼Œæ‰€è°“æœ€è€å°±æ˜¯å½“å‰ Map ä¸­æœ€æ—©æ’å…¥çš„ Entryï¼Œå¦‚æœè¯¥æ–¹æ³•è¿”å› trueï¼Œæœ€è€çš„é‚£ä¸ªå…ƒç´ å°±ä¼šè¢«åˆ é™¤ã€‚è€Œä¸”åœ¨æ¯æ¬¡æ’å…¥æ–°å…ƒç´ çš„ä¹‹åLinkedHashMap ä¼šè‡ªåŠ¨è¯¢é—® removeEldestEntry() æ˜¯å¦è¦åˆ é™¤æœ€è€çš„å…ƒç´ ã€‚è¿™æ ·åªéœ€è¦åœ¨å­ç±»ä¸­é‡è½½è¯¥æ–¹æ³•ï¼Œå½“å…ƒç´ ä¸ªæ•°è¶…è¿‡ä¸€å®šæ•°é‡æ—¶è®©removeEldestEntry() è¿”å› trueï¼Œå°±èƒ½å¤Ÿå®ç°ä¸€ä¸ªå›ºå®šå¤§å°çš„FIFOç­–ç•¥çš„ç¼“å­˜ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š /** ä¸€ä¸ªå›ºå®šå¤§å°çš„ FIFO æ›¿æ¢ç­–ç•¥çš„ç¼“å­˜ */ class FIFOCache\u003cK, V\u003e extends LinkedHashMap\u003cK, V\u003e{ private final int cacheSize; public FIFOCache(int cacheSize){ this.cacheSize = cacheSize; } // å½“ Entry ä¸ªæ•°è¶…è¿‡ cacheSize æ—¶ï¼Œåˆ é™¤æœ€è€çš„ Entry @Override protected boolean removeEldestEntry(Map.Entry\u003cK,V\u003e eldest) { return size() \u003e cacheSize; } } LinkedHashMap æ›´åŠ è¯¦ç»†çš„æºç è§£æï¼Œå‚è€ƒ è¿™é‡Œ TreeMap TreeMap å®ç°äº† SortedMap æ¥å£ï¼Œæ„å‘³ç€å®¹å™¨å†…éƒ¨ä¼šæŒ‰ç…§ key çš„å¤§å°å¯¹ Map ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œè€Œ key å¤§å°çš„åˆ¤æ–­ï¼Œæ—¢å¯ä»¥é€šè¿‡å…¶è‡ªèº«çš„è‡ªç„¶é¡ºåºï¼ˆnatural orderingï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ—¶ä¼ å…¥çš„æ¯”è¾ƒå™¨ Comparatorã€‚ TreeMap åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ï¼ˆRed-Black Treeï¼‰å®ç°ï¼Œè¿™æ„å‘³ç€å…¶è¯»å–ã€æ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(log_n)$ï¼Œè€Œä¸”å¾—ç›Šäºçº¢é»‘æ ‘ç‹¬ç‰¹çš„ç»“æ„ï¼ŒTreeMap çš„æ€§èƒ½ç¨³å®šæ€§ä¹Ÿå¾ˆå¥½ã€‚å…¶ç»“æ„å¤§è‡´å¦‚ä¸‹å›¾ï¼š å‡ºäºæ€§èƒ½åŸå› ï¼ŒTreeMap æ˜¯éåŒæ­¥çš„ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½åœ¨å¤šçº¿ç¨‹è¯»å†™æƒ…å†µä¸‹ä½¿ç”¨ï¼Œå¦‚æœéœ€è¦â€œå¤šçº¿ç¨‹å®‰å…¨çš„ TreeMapâ€ï¼Œå¯ä»¥ç”¨ Collections.synchronizedSortedMap åšå¦‚ä¸‹åŒ…è£…ï¼š SortedMap m = Collections.synchronizedSortedMap(new TreeMap(...)); åŒæ ·è¿˜æ˜¯ç”±äº Synchronized æœ¬èº«æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ J.U.C åŒ…ä¸­æä¾›çš„ ConcurrentSkipListMap å®ç°ã€‚ å¦‚ä¸Š HashMap ä¸­æ‰€è¿°ï¼Œçº¢é»‘æ ‘æœ¬èº«çš„å®ç°å’Œæ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œæ¶‰åŠåˆ°å„ç§å·¦æ—‹å³æ—‹å’Œé¢œè‰²è°ƒæ•´ï¼Œè¯¦ç»†æºç åˆ†æå‚è€ƒè¿™é‡Œ EnumMap EnumMap æ˜¯ä¸€ä¸ªæœ‰ç‚¹ç‰¹åˆ«çš„ Map æ¥å£å®ç°ç±»ï¼Œä»–æ˜¯ä¸€ä¸ªé’ˆå¯¹æšä¸¾ï¼ˆenumï¼‰ç±»å‹ key ä¼˜åŒ–è¿‡çš„ Mapï¼Œåœ¨è¦å­˜å‚¨çš„é”®å€¼å¯¹æ‰€æœ‰çš„ key éƒ½æ˜¯ enum ç±»å‹çš„æ—¶å€™ï¼Œä½¿ç”¨ EnumMap ä¼šæ¯” HashMap æ›´é«˜æ•ˆã€‚ æˆ‘ä»¬çŸ¥é“ HashMap æ˜¯é€šè¿‡æ•£åˆ—å‡½æ•°è®¡ç®— key çš„å€¼ï¼Œç„¶åå‚¨å­˜åˆ°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å°±ä¼šäº§ç”Ÿä¸¤ä¸ªå¯èƒ½ä¼šå½±å“æ€§èƒ½çš„ç‚¹ï¼šæ•£åˆ—å‡½æ•°æ€§èƒ½å’Œæ•£åˆ—å†²çªçš„è§£å†³ã€‚ å¦‚æœæˆ‘ä»¬è¦å­˜å‚¨çš„æ•°æ®çš„ key éƒ½æ˜¯ enum ç±»å‹çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ¯ä¸ªæšä¸¾ç±»å‹ç”Ÿæˆçš„å¸¸é‡åºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯ ordinalï¼Œè¿™ä¸ªå€¼æ˜¯ä¸ä¼šå†²çªçš„ï¼Œé‚£ä¹ˆå°±åªéœ€è¦å°†è¿™ä¸ªå€¼è®¾ç½®ä¸ºæ•°ç»„çš„ä¸‹æ ‡å°±å¯ä»¥äº†ï¼Œè¿™æ ·ä¸€æ¥å°±å¯ä»¥ç›´æ¥é¿å…ä½¿ç”¨æ•£åˆ—å‡½æ•°ï¼Œå°±å¯ä»¥å¤§å¹…æé«˜è¯»å†™æ€§èƒ½ï¼Œè¯»ã€å†™ã€åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(1)$ æ‰€ä»¥ï¼Œå¦‚æœè¦å­˜å‚¨åˆ° Map ä¸­çš„çš„æ•°æ® key éƒ½æ˜¯ enum ç±»å‹ï¼Œå»ºè®®ä½¿ç”¨ EnumMap ä»£æ›¿ HashMapï¼Œå¯ä»¥æœ‰æ•ˆæé«˜ç»¼åˆæ€§èƒ½ã€‚ WeakHashMap å¦‚æœè¯´ EnumMap æ˜¯ä¸ªæœ‰ç‚¹ç‰¹åˆ«çš„ Mapï¼Œé‚£ä¹ˆ WeekHashMap å°±æ˜¯ååˆ†ç‰¹åˆ«çš„ Mapã€‚å®ƒçš„ç‰¹åˆ«ä¹‹å¤„åœ¨äº WeekHashMap ä¸­çš„å…ƒç´ ï¼ˆentryï¼‰å¯èƒ½éšæ—¶è¢« GC è‡ªåŠ¨åˆ é™¤ï¼Œå³ä¾¿æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨çš„è°ƒç”¨ remove() æˆ–è€… clear() å‡½æ•°ã€‚ æ›´ç›´è§‚çš„æ¥è¯´ï¼Œå³ä¾¿æˆ‘ä»¬æ²¡æœ‰æ˜¾ç¤ºçš„åˆ é™¤å…¶ä¸­çš„å…ƒç´ ï¼Œä¹Ÿæœ‰å¯èƒ½éšæ—¶å‘ç”Ÿå¦‚ä¸‹çš„æƒ…å†µï¼š è°ƒç”¨ä¸¤æ¬¡size()æ–¹æ³•è¿”å›ä¸åŒçš„å€¼ï¼› ä¸¤æ¬¡è°ƒç”¨isEmpty()æ–¹æ³•","date":"2021-05-02","objectID":"/the-java-collections-framework/:2:2","tags":["Collections","Java"],"title":"Java é›†åˆæ¡†æ¶ä¸€æ–‡é€š","uri":"/the-java-collections-framework/"},{"categories":["Program Language"],"content":"Concurrent Collections J.U.C åŒ…çš„å‡ºç°ç»™ Java å¹¶å‘ç¼–ç¨‹æ•ˆç‡å¸¦æ¥äº†å·¨å¤§çš„æå‡ï¼Œå…¶ä¸­å°±æä¾›äº†ä¸å°‘åœ¨å¹¶å‘æƒ…å†µä¸‹æ—¢ä¿è¯æ•°æ®å®‰å…¨ï¼Œåˆä¿è¯æ•ˆç‡çš„é›†åˆï¼Œè®©å¤è€çš„ Vector å’Œ HashTable ç›´æ¥é€€ä¼‘ï¼ å®¹æˆ‘å…ˆå­¦å­¦å†æ¥æ›´æ–° :) æœ¬æ–‡ä¸»è¦å‚è€ƒ Java å…¨æ ˆçŸ¥è¯†ä½“ç³» - Javaé›†åˆæ¡†æ¶ å’Œ Oracle Java Docs - Collections Framework Overview ","date":"2021-05-02","objectID":"/the-java-collections-framework/:3:0","tags":["Collections","Java"],"title":"Java é›†åˆæ¡†æ¶ä¸€æ–‡é€š","uri":"/the-java-collections-framework/"},{"categories":["Database"],"content":"Clickhouse åœ¨ç¦»çº¿æ•°æ®åˆ†ææŠ€æœ¯é¢†åŸŸæ—©å·²å£°åè¿œæ‰¬ï¼Œå¦‚æœè¿˜ä¸çŸ¥é“å¯ä»¥ ç‚¹è¿™é‡Œ äº†è§£ä¸‹ã€‚ æœ€è¿‘ç”±äºé¡¹ç›®éœ€æ±‚ä½¿ç”¨åˆ°äº† clickhouse åšåˆ†ææ•°æ®åº“ï¼Œäºæ˜¯ç”¨æµ‹è¯•ç¯å¢ƒåšäº†ä¸€ä¸ªå•è¡¨ 6 äº¿æ•°æ®é‡çš„æ€§èƒ½æµ‹è¯•ï¼Œè®°å½•ä¸€ä¸‹æµ‹è¯•ç»“æœï¼Œæœ‰åšè¶…å¤§æ•°æ®é‡åˆ†ææŠ€æœ¯é€‰å‹éœ€æ±‚çš„æœ‹å‹å¯ä»¥å‚è€ƒä¸‹ã€‚ ","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:0:0","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Database"],"content":"æœåŠ¡å™¨ä¿¡æ¯ CPUï¼šIntel Xeon Gold 6240 @ 8x 2.594GHz å†…å­˜ï¼š32G ç³»ç»Ÿï¼šCentOS 7.6 Linuxå†…æ ¸ç‰ˆæœ¬ï¼š3.10.0 ç£ç›˜ç±»å‹ï¼šæœºæ¢°ç¡¬ç›˜ æ–‡ä»¶ç³»ç»Ÿï¼šext4 ","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:1:0","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Database"],"content":"Clickhouse ä¿¡æ¯ éƒ¨ç½²æ–¹å¼ï¼šå•æœºéƒ¨ç½² ç‰ˆæœ¬ï¼š20.8.11.17 ","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:2:0","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Database"],"content":"æµ‹è¯•æƒ…å†µ æµ‹è¯•æ•°æ®å’Œæµ‹è¯•æ–¹æ³•æ¥è‡ª clickshouse å®˜æ–¹çš„ Star Schema Benchmark æŒ‰ç…§å®˜æ–¹æŒ‡å¯¼é€ å‡ºäº†æµ‹è¯•æ•°æ®ä¹‹åï¼Œå…ˆçœ‹ä¸€ä¸‹æ•°æ®é‡å’Œç©ºé—´å ç”¨æƒ…å†µã€‚ ","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:3:0","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Database"],"content":"æ•°æ®é‡å’Œç©ºé—´å ç”¨ è¡¨å åˆ—æ•° æ•°æ®è¡Œæ•° åŸå§‹å¤§å° å‹ç¼©å¤§å° å‹ç¼©ç‡ supplier 6 200,000 11.07 MiB 7.53 MiB 68 customer 7 3,000,000 168.83 MiB 114.72 MiB 68 part 8 1,400,000 34.29 MiB 24.08 MiB 70 lineorder 16 600,037,902 24.03 GiB 16.67 GiB 69 lineorder_flat 37 688,552,212 111.38 GiB 61.05 GiB 55 å¯ä»¥çœ‹åˆ° clickhouse çš„å‹ç¼©ç‡å¾ˆé«˜ï¼Œå‹ç¼©ç‡éƒ½åœ¨ 50 ä»¥ä¸Šï¼ŒåŸºæœ¬å¯ä»¥è¾¾åˆ° 70 å·¦å³ã€‚æ•°æ®ä½“ç§¯çš„å‡å°å¯ä»¥éå¸¸æœ‰æ•ˆçš„å‡å°‘ç£ç›˜ç©ºé—´å ç”¨ã€æé«˜ I/O æ€§èƒ½ï¼Œè¿™å¯¹æ•´ä½“æŸ¥è¯¢æ€§èƒ½çš„æå‡éå¸¸æœ‰æ•ˆã€‚ supplierã€customerã€partã€lineorder ä¸ºä¸€ä¸ªç®€å•çš„ã€Œä¾›åº”å•†-å®¢æˆ·-è®¢å•-åœ°åŒºã€çš„æ˜Ÿå‹æ¨¡å‹ï¼Œlineorder_flat ä¸ºæ ¹æ®è¿™ä¸ªæ˜Ÿå‹æ¨¡å‹æ•°æ®å…³ç³»åˆå¹¶çš„å¤§å®½è¡¨ï¼Œæ‰€æœ‰åˆ†æéƒ½ç›´æ¥åœ¨è¿™å¼ å¤§å®½è¡¨ä¸­æ‰§è¡Œï¼Œå‡å°‘ä¸å¿…è¦çš„è¡¨å…³è”ï¼Œç¬¦åˆæˆ‘ä»¬å®é™…å·¥ä½œä¸­çš„åˆ†æå»ºè¡¨é€»è¾‘ã€‚ ä»¥ä¸‹æ€§èƒ½æµ‹è¯•çš„æ‰€æœ‰åˆ†æ SQL éƒ½åœ¨è¿™å¼ å¤§å®½è¡¨ä¸­è¿è¡Œï¼Œæœªè¿›è¡Œè¡¨å…³è”æŸ¥è¯¢ã€‚ ","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:3:1","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Database"],"content":"æŸ¥è¯¢æ€§èƒ½æµ‹è¯•è¯¦æƒ… Query 1.1 SELECT sum(LO_EXTENDEDPRICE * LO_DISCOUNT) AS revenue FROM lineorder_flat WHERE (toYear(LO_ORDERDATE) = 1993) AND ((LO_DISCOUNT \u003e= 1) AND (LO_DISCOUNT \u003c= 3)) AND (LO_QUANTITY \u003c 25) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€revenueâ”€â” â”‚ 44652567249651 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1 rows in set. Elapsed: 0.242 sec. Processed 91.01 million rows, 728.06 MB (375.91 million rows/s., 3.01 GB/s.) æ‰«æè¡Œæ•°ï¼š91,010,000 å¤§çº¦9100ä¸‡ è€—æ—¶(ç§’)ï¼š0.242 æŸ¥è¯¢åˆ—æ•°ï¼š2 ç»“æœè¡Œæ•°ï¼š1 Query 1.2 SELECT sum(LO_EXTENDEDPRICE * LO_DISCOUNT) AS revenue FROM lineorder_flat WHERE (toYYYYMM(LO_ORDERDATE) = 199401) AND ((LO_DISCOUNT \u003e= 4) AND (LO_DISCOUNT \u003c= 6)) AND ((LO_QUANTITY \u003e= 26) AND (LO_QUANTITY \u003c= 35)) â”Œâ”€â”€â”€â”€â”€â”€â”€revenueâ”€â” â”‚ 9624332170119 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1 rows in set. Elapsed: 0.040 sec. Processed 7.75 million rows, 61.96 MB (191.44 million rows/s., 1.53 GB/s.) æ‰«æè¡Œæ•°ï¼š7,750,000 775ä¸‡ è€—æ—¶(ç§’)ï¼š0.040 æŸ¥è¯¢åˆ—æ•°ï¼š2 è¿”å›è¡Œæ•°ï¼š1 Query 2.1 SELECT sum(LO_REVENUE), toYear(LO_ORDERDATE) AS year, P_BRAND FROM lineorder_flat WHERE (P_CATEGORY = 'MFGR#12') AND (S_REGION = 'AMERICA') GROUP BY year, P_BRAND ORDER BY year ASC, P_BRAND ASC â”Œâ”€sum(LO_REVENUE)â”€â”¬â”€yearâ”€â”¬â”€P_BRANDâ”€â”€â”€â” â”‚ 64420005618 â”‚ 1992 â”‚ MFGR#121 â”‚ â”‚ 63389346096 â”‚ 1992 â”‚ MFGR#1210 â”‚ â”‚ ........... â”‚ .... â”‚ ..........â”‚ â”‚ 39679892915 â”‚ 1998 â”‚ MFGR#128 â”‚ â”‚ 35300513083 â”‚ 1998 â”‚ MFGR#129 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 280 rows in set. Elapsed: 8.558 sec. Processed 600.04 million rows, 6.20 GB (70.11 million rows/s., 725.04 MB/s.) æ‰«æè¡Œæ•°ï¼š600,040,000 å¤§çº¦6äº¿ è€—æ—¶(ç§’)ï¼š8.558 æŸ¥è¯¢åˆ—æ•°ï¼š3 ç»“æœè¡Œæ•°ï¼š280 Query 2.2 SELECT sum(LO_REVENUE), toYear(LO_ORDERDATE) AS year, P_BRAND FROM lineorder_flat WHERE ((P_BRAND \u003e= 'MFGR#2221') AND (P_BRAND \u003c= 'MFGR#2228')) AND (S_REGION = 'ASIA') GROUP BY year, P_BRAND ORDER BY year ASC, P_BRAND ASC â”Œâ”€sum(LO_REVENUE)â”€â”¬â”€yearâ”€â”¬â”€P_BRANDâ”€â”€â”€â” â”‚ 66450349438 â”‚ 1992 â”‚ MFGR#2221 â”‚ â”‚ 65423264312 â”‚ 1992 â”‚ MFGR#2222 â”‚ â”‚ ........... â”‚ .... â”‚ ......... â”‚ â”‚ 39907545239 â”‚ 1998 â”‚ MFGR#2227 â”‚ â”‚ 40654201840 â”‚ 1998 â”‚ MFGR#2228 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 56 rows in set. Elapsed: 1.242 sec. Processed 600.04 million rows, 5.60 GB (482.97 million rows/s., 4.51 GB/s.) æ‰«æè¡Œæ•°ï¼š600,040,000 å¤§çº¦6äº¿ è€—æ—¶(ç§’)ï¼š1.242 æŸ¥è¯¢åˆ—æ•°ï¼š3 ç»“æœè¡Œæ•°ï¼š56 Query 3.1 SELECT C_NATION, S_NATION, toYear(LO_ORDERDATE) AS year, sum(LO_REVENUE) AS revenue FROM lineorder_flat WHERE (C_REGION = 'ASIA') AND (S_REGION = 'ASIA') AND (year \u003e= 1992) AND (year \u003c= 1997) GROUP BY C_NATION, S_NATION, year ORDER BY year ASC, revenue DESC â”Œâ”€C_NATIONâ”€â”€â”¬â”€S_NATIONâ”€â”€â”¬â”€yearâ”€â”¬â”€â”€â”€â”€â”€â”€revenueâ”€â” â”‚ INDIA â”‚ INDIA â”‚ 1992 â”‚ 537778456208 â”‚ â”‚ INDONESIA â”‚ INDIA â”‚ 1992 â”‚ 536684093041 â”‚ â”‚ ..... â”‚ ....... â”‚ .... â”‚ ............ â”‚ â”‚ CHINA â”‚ CHINA â”‚ 1997 â”‚ 525562838002 â”‚ â”‚ JAPAN â”‚ VIETNAM â”‚ 1997 â”‚ 525495763677 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 150 rows in set. Elapsed: 3.533 sec. Processed 546.67 million rows, 5.48 GB (154.72 million rows/s., 1.55 GB/s.) æ‰«æè¡Œæ•°ï¼š546,670,000 å¤§çº¦5äº¿4åƒå¤šä¸‡ è€—æ—¶(ç§’)ï¼š3.533 æŸ¥è¯¢åˆ—æ•°ï¼š4 ç»“æœè¡Œæ•°ï¼š150 Query 3.2 SELECT C_CITY, S_CITY, toYear(LO_ORDERDATE) AS year, sum(LO_REVENUE) AS revenue FROM lineorder_flat WHERE (C_NATION = 'UNITED STATES') AND (S_NATION = 'UNITED STATES') AND (year \u003e= 1992) AND (year \u003c= 1997) GROUP BY C_CITY, S_CITY, year ORDER BY year ASC, revenue DESC â”Œâ”€C_CITYâ”€â”€â”€â”€â”€â”¬â”€S_CITYâ”€â”€â”€â”€â”€â”¬â”€yearâ”€â”¬â”€â”€â”€â”€revenueâ”€â” â”‚ UNITED ST6 â”‚ UNITED ST6 â”‚ 1992 â”‚ 5694246807 â”‚ â”‚ UNITED ST0 â”‚ UNITED ST0 â”‚ 1992 â”‚ 5676049026 â”‚ â”‚ .......... â”‚ .......... â”‚ .... â”‚ .......... â”‚ â”‚ UNITED ST9 â”‚ UNITED ST9 â”‚ 1997 â”‚ 4836163349 â”‚ â”‚ UNITED ST9 â”‚ UNITED ST5 â”‚ 1997 â”‚ 4769919410 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 600 rows in set. Elapsed: 1.000 sec. Processed 546.67 million rows, 5.56 GB (546.59 million rows/s., 5.56 GB/s.) æ‰«æè¡Œæ•°ï¼š546,670,000 å¤§çº¦5äº¿4åƒå¤šä¸‡ è€—æ—¶(ç§’)ï¼š1.00 æŸ¥è¯¢åˆ—æ•°ï¼š4 ç»“æœè¡Œæ•°ï¼š600 Query 4.1 SELECT toYear(LO_ORDERDATE) AS year, C_NATION, sum(LO_REVENUE - LO_SUPPLYCOST) AS profit FROM lineorder_flat WHERE (C_REGION = 'AMERICA') AND (S_REGION = 'AMERICA') AND ((P_MFGR = 'MFGR#1') OR (P_MFGR = 'MFGR#2')) GROUP BY year, C_NATION ORDER BY year ASC, C_NATION ASC â”Œâ”€yearâ”€â”¬â”€C_NATIONâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€profitâ”€â” â”‚ 1992 â”‚ ARGENTINA â”‚ 1041983042066 â”‚ â”‚ 1992 â”‚","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:3:2","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Database"],"content":"æ€§èƒ½æµ‹è¯•ç»“æœæ±‡æ€» æŸ¥è¯¢è¯­å¥ SQLç®€è¦è¯´æ˜ æ‰«æè¡Œæ•° è¿”å›è¡Œæ•° æŸ¥è¯¢åˆ—æ•° è€—æ—¶(ç§’) Q1.1 ä¹˜ç§¯ã€æ±‡æ€»ã€4ä¸ªæ¡ä»¶ã€é¦–æ¬¡è¿è¡Œ 91,010,000 1 2 0.242 Q1.2 Q1.1å¢åŠ 1ä¸ªæ¡ä»¶è¿è¡Œ 7,750,000 1 2 0.040 Q2.1 æ±‡æ€»ã€å‡½æ•°ã€2åˆ—åˆ†ç»„ã€2åˆ—æ’åºã€é¦–æ¬¡è¿è¡Œ 600,040,000 280 3 8.558 Q2.2 Q2.1å¢åŠ 1ä¸ªæ¡ä»¶è¿è¡Œ 600,040,000 56 3 1.242 Q3.1 æ±‡æ€»ã€å‡½æ•°ã€3åˆ—åˆ†ç»„ã€2åˆ—æ’åºã€é¦–æ¬¡è¿è¡Œ 546,670,000 150 4 3.533 Q3.2 Q3.1æ›´æ¢æ¡ä»¶è¿è¡Œ 546,670,000 600 4 1 Q4.1 ç›¸å‡ã€æ±‡æ€»ã€å‡½æ•°ã€2åˆ—åˆ†ç»„ã€2åˆ—æ’åºã€é¦–æ¬¡è¿è¡Œ 600,040,000 35 4 5.006 Q4.2 Q4.1å¢åŠ 2ä¸ªæ¡ä»¶è¿è¡Œ 144,420,000 100 4 0.826 åœ¨å½“å‰è½¯ç¡¬ä»¶ç¯å¢ƒä¸‹ï¼Œæ‰«æ 6 äº¿å¤šè¡Œæ•°æ®ï¼Œå¸¸è§çš„åˆ†æè¯­å¥é¦–æ¬¡è¿è¡Œæœ€æ…¢åœ¨ 8 ç§’å·¦å³èƒ½è¿”å›ç»“æœï¼Œç›¸åŒçš„åˆ†æé€»è¾‘æ›´æ¢æ¡ä»¶å†æ¬¡æŸ¥è¯¢çš„æ—¶å€™æ•ˆç‡æœ‰æ˜æ˜¾çš„æå‡ï¼Œå¯ä»¥ç¼©çŸ­åˆ° 1 ç§’å·¦å³ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„åˆ—æŸ¥è¯¢æ²¡æœ‰åŠ å‡ä¹˜é™¤ã€èšåˆç­‰é€»è¾‘ï¼Œæ‰«æå…¨è¡¨ 6 äº¿å¤šè¡Œæ•°æ®é¦–æ¬¡æŸ¥è¯¢åŸºæœ¬å¯ä»¥åœ¨ 2 ç§’å†…æ‰§è¡Œå®Œæˆã€‚ ä»¥ä¸Šæ˜¯å•æœºéƒ¨ç½² Clickhouse çš„æ€§èƒ½è¡¨ç°æƒ…å†µï¼Œåœ¨ä¸æå‡å•æœºç¡¬ä»¶æ€§èƒ½çš„æ¡ä»¶ä¸‹ï¼Œå¦‚æœä½¿ç”¨åˆç†çš„é›†ç¾¤éƒ¨ç½²ï¼Œæ€§èƒ½è¿˜èƒ½è¿›ä¸€æ­¥æé«˜ã€‚ è¿™ä¸ªè¡¨ç°ï¼Œæ¯‹åº¸ç½®ç–‘æ˜¯ç›®å‰ç¦»çº¿æ•°æ®åˆ†ææ•°æ®åº“é¢†åŸŸçš„æ€§èƒ½ç‹è€…ã€‚ ","date":"2021-03-16","objectID":"/clickhouse-billion-level-data-performance-test/:4:0","tags":["BigData","Clickhouse","OLAP"],"title":"Clickhouse äº¿çº§æ•°æ®æ€§èƒ½æµ‹è¯•","uri":"/clickhouse-billion-level-data-performance-test/"},{"categories":["Computer Science"],"content":"ç®€ä»‹ æ•°ç»„æ˜¯ä¸€ä¸ªçº¿æ€§è¡¨ç±»å‹çš„æ•°æ®æ•°æ®ï¼Œå®ƒç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„ç±»å‹ç›¸åŒçš„æ•°æ®ã€‚ æ•°ç»„ä¸­ä½¿ç”¨ä¸‹æ ‡æ¥è¡¨ç¤ºæŸä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹è®¡æ•°ã€‚ä¾‹å¦‚æ•°ç»„ array ä¸­ç¬¬ 6 ä¸ªå…ƒç´ ï¼Œè¡¨ç¤ºä¸ºï¼šarray[5] ","date":"2021-03-02","objectID":"/data-structures-array/:1:0","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"è¯»å– ","date":"2021-03-02","objectID":"/data-structures-array/:2:0","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"éšæœºè®¿é—® åŸºäºè¿ç»­å†…å­˜ç©ºé—´å’Œç±»å‹ç›¸åŒä¸¤ä¸ªç‰¹å¾ï¼Œä½¿å¾—éšæœºè®¿é—®æ•°ç»„ä¸­çš„æ•°æ®æˆä¸ºå¯èƒ½ã€‚ å‡è®¾æ•°ç»„ array çš„èµ·å§‹å†…å­˜åœ°å€ä¸º startï¼Œå› ä¸ºå‚¨å­˜çš„æ•°æ®ç±»å‹ç›¸åŒï¼Œå› æ­¤æ¯å—æ•°æ®å ç”¨çš„å†…å­˜å¤§å°ä¹Ÿç›¸åŒï¼Œå‡è®¾ä¸º sizeï¼Œé‚£ä¹ˆè¯»å–ä¸‹æ ‡ä¸º i çš„æ•°æ®çš„å†…å­˜åœ°å€çš„å…¬å¼ä¸ºï¼šarray[i] = start + i * size è®¡ç®—æœºå¯ä»¥é€šè¿‡è¿™æ ·çš„å…¬å¼ç›´æ¥è¯»å–è¿™ä¸ªå†…å­˜åœ°å€ä¸­å‚¨å­˜çš„æ•°æ®ï¼Œä¸éœ€è¦ä»»ä½•é¢å¤–çš„æ“ä½œï¼Œä¸€å‘å‘½ä¸­ï¼Œæ‰€ä»¥å…¶æ—¶é—´å¤æ‚åº¦ä¸º $\\mathbf{O(1)}$ ","date":"2021-03-02","objectID":"/data-structures-array/:2:1","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"è®¿é—®è¶Šç•Œ ç”±äºè®¿é—®æ•°ç»„éœ€è¦æŒ‡å®šä¸‹æ ‡ï¼Œé‚£ä¹ˆå½“æŒ‡å®šçš„ä¸‹æ ‡ä¸å­˜åœ¨æ—¶ï¼Œä¼šå‘ç”Ÿè¯»å–é”™è¯¯ï¼Œç§°ä¸ºè®¿é—®è¶Šç•Œã€‚è¿™ä¸ªé”™è¯¯åœ¨ä¸åŒçš„è¯­è¨€ä¸­ï¼Œæœ‰ä¸åŒçš„è¡¨ç°ã€‚ å¦‚æœæ˜¯ Java è¿™ç§è¯­è¨€å±‚åšäº†è¶Šç•Œæ£€æŸ¥çš„è¯­è¨€ï¼Œå°±ä¼šæŠ›å‡º java.lang.ArrayIndexOutOfBoundsExceptionï¼Œä½†æ˜¯å¦‚æœæ˜¯ C è¯­è¨€çš„è¯ï¼Œå¯èƒ½ä¼šå‘ç”Ÿä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼Œæ¯”å¦‚æ— é™å¾ªç¯ã€‚æ‰€ä»¥è®¿é—®æ•°ç»„æ—¶ï¼Œéœ€è¦è­¦æƒ•è®¿é—®è¶Šç•Œé”™è¯¯ã€‚ ","date":"2021-03-02","objectID":"/data-structures-array/:2:2","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æŸ¥æ‰¾ æœ‰äº›åœ°æ–¹è¯´æ•°ç»„é€‚åˆæŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œè¿™å…¶å®æ˜¯ä¸å¯¹çš„ã€‚ éšæœºè¯»å–çš„å‰ææ˜¯çŸ¥é“å…ƒç´ çš„ä¸‹æ ‡ï¼Œéšæœºè¯»å–å¹¶ä¸æ˜¯æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾æ˜¯è¦åœ¨æ•°ç»„ä¸­æ‰¾åˆ°æŸä¸ªç›®æ ‡å…ƒç´ ï¼Œåœ¨æ‰¾åˆ°ä¹‹å‰æ˜¯ä¸çŸ¥é“ä¸‹æ ‡çš„ï¼Œæ‰€ä»¥æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸æ˜¯ $\\mathbf{O(1)}$ã€‚ æŸ¥æ‰¾æœ‰ä¸åŒçš„å®ç°ç®—æ³•ï¼Œå³ä¾¿æ˜¯æ’å¥½åºçš„æ•°ç»„ï¼Œç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ $O(log_n)$ ","date":"2021-03-02","objectID":"/data-structures-array/:2:3","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æ’å…¥ å¦‚æœæˆ‘ä»¬è¦åœ¨ä¸€ä¸ªé•¿åº¦ä¸º 10ï¼Œä¸”å‰ 5 ä¸ªä½ç½®éƒ½å·²ç»æœ‰æ•°æ®çš„æ•°ç»„ä¸­ï¼Œæ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ åˆ°ç¬¬ 3 ä¸ªä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ ä¾‹å¦‚ç°æœ‰æ•°ç»„ [bily,tony,jack,oliver,james]ï¼Œæˆ‘ä»¬è¦å°†æ–°åŒå­¦ harry æ’å…¥åˆ° jack ç°åœ¨çš„ä½ç½®ä¸Šï¼Œè¿™é‡Œéœ€è¦åˆ†ä¸¤ç§æƒ…å†µæ¥çœ‹ ","date":"2021-03-02","objectID":"/data-structures-array/:3:0","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æœ‰åºæ’å…¥ å¦‚æœæ’å…¥ä¹‹åéœ€è¦ä¿æŒå…ƒç´ çš„é¡ºåºï¼Œæ’å…¥åçš„æ•°ç»„åº”è¯¥æ˜¯è¿™æ · [bily,tony,harry,jack,oliver,james]ï¼Œé‚£ä¹ˆç¬¬ 3 ä½åŠä»¥åçš„æ‰€æœ‰å…ƒç´ éƒ½éœ€è¦å¾€åæŒªä¸€ä½ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½æ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œå°±æ˜¯æ’å…¥çš„å…ƒç´ åˆšå¥½åœ¨æœ€åä¸€ä½çš„æƒ…å†µï¼Œä¸éœ€è¦ç§»åŠ¨ä»»ä½•å…ƒç´ ï¼› æœ€åæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ï¼Œå°±æ˜¯æ’å…¥çš„å…ƒç´ åœ¨ç¬¬ä¸€ä½çš„æƒ…å†µï¼Œæ‰€æœ‰å…ƒç´ éƒ½éœ€è¦ç§»åŠ¨ä¸€æ¬¡ï¼› é‚£ä¹ˆå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿå› ä¸ºæ’å…¥åˆ°æ¯ä¸ªä½ç½®çš„æ¦‚ç‡éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ $\\frac{1+2+\\cdots+n}{n}=\\mathbf{O(n)}$ ","date":"2021-03-02","objectID":"/data-structures-array/:3:1","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æ— é¡ºæ’å…¥ å¦‚æœæ’å…¥ä¹‹åä¸éœ€è¦ä¿æŒå…ƒç´ çš„é¡ºåºï¼Œé‚£ä¹ˆæ’å…¥æ—¶ç›´æ¥äº¤æ¢ jack å’Œ harry çš„ä½ç½®å³å¯ï¼š[bily,tony,harry,oliver,james,jack] æ­¤æ—¶æ— è®ºå°†æ–°å…ƒç´ æ’å…¥åˆ°å“ªä¸ªä½ç½®ä¸Šï¼Œéƒ½åªéœ€è¦æ“ä½œæ–°æ—§ä¸¤ä¸ªå…ƒç´ ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ $\\mathbf{O(1)}$ ","date":"2021-03-02","objectID":"/data-structures-array/:3:2","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æ‰©å®¹ å› ä¸ºæ•°ç»„ä½¿ç”¨çš„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¹‹å‰å°±éœ€è¦æå‰å‘è®¡ç®—æœºç”³è¯·å†…å­˜ï¼Œä¹Ÿå°±æ˜¯åœ¨å£°æ˜æ•°ç»„æ—¶ï¼Œéœ€è¦ç¡®å®šæ•°ç»„çš„å¤§å°ã€‚ å½“æ•°ç»„ä¸­çš„ç©ºé—´è€—å°½æ—¶ï¼Œå°±æ— æ³•æ’å…¥æ–°å…ƒç´ ï¼Œæ­¤æ—¶éœ€è¦æ‰‹åŠ¨ç»™æ•°ç»„è¿›è¡Œâ€œæ‰©å®¹â€ï¼Œä¹Ÿå°±æ˜¯æ–°ç”³è¯·ä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œç„¶åå°†åŸæ¥çš„æ•°æ®æ¬è¿‡å»ï¼Œå†æ’å…¥æ–°æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $\\mathbf{O(n)}$ ","date":"2021-03-02","objectID":"/data-structures-array/:3:3","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"åˆ é™¤ ","date":"2021-03-02","objectID":"/data-structures-array/:4:0","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"ç«‹å³åˆ é™¤ è¿˜æ˜¯å› ä¸ºæ•°ç»„ä½¿ç”¨è¿ç»­å†…å­˜ç©ºé—´çš„ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨åˆ é™¤äº†å…¶ä¸­ä¸€ä¸ªå…ƒç´ åï¼Œè¿™ä¸ªä½ç½®ä¸èƒ½ç©ºç€ï¼Œå¦åˆ™å†…å­˜ç©ºé—´å°±ä¸è¿ç»­äº†ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠåé¢çš„æ•°æ®éƒ½å¾€å‰æŒªä¸€ä½ã€‚ è¿™ä¸ªæ“ä½œå’Œä¿æŒé¡ºåºæ’å…¥æ˜¯æ¯”è¾ƒç±»ä¼¼çš„ï¼Œå¦‚æœåˆ é™¤çš„åˆšå¥½æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé‚£æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n)$ï¼Œå¦‚æœåˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‚£æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n)$ï¼Œè€Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ $\\mathbf{O(n)}$ ","date":"2021-03-02","objectID":"/data-structures-array/:4:1","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"å»¶ååˆ é™¤ é™¤äº†è¸è¸å®å®çš„ç«‹å³åˆ é™¤å¤–ï¼Œä¸ºäº†ä¼˜åŒ–æ•°ç»„åˆ é™¤æ“ä½œçš„æ€§èƒ½ï¼Œå·¥ç¨‹å¸ˆä»¬æœ‰ä¸€äº›å·§æ€å¦™æƒ³ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦åœ¨æ•°ç»„ [bily,tony,harry,jack,oliver,james] ä¸­ä¾æ¬¡åˆ é™¤ bily å’Œtonyï¼Œå¦‚æœæ“ä½œä¸€æ¬¡å°±åˆ é™¤ä¸€æ¬¡ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆä¸¤æ¬¡æ•°æ®æ¬è¿ï¼Œé€ æˆæ€§èƒ½æŸè€—ã€‚ å®é™…ä¸Šï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåˆ é™¤å°±æ˜¯ä¸ºäº†è®©è¢«åˆ é™¤çš„æ•°æ®æ— æ³•è¢«è¯»å–ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸¤ä¸ªæ•°æ®æ ‡è®°ä¸ºå·²åˆ é™¤ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„åˆ é™¤ï¼Œè®©å…¶æ— æ³•è¢«è¯»å–ï¼Œç„¶åç­‰åˆ°æ•°æ®ç©ºé—´ä¸å¤Ÿçš„æ—¶å€™ï¼Œå†ä¸€æ¬¡æ€§åˆ é™¤æ‰€æœ‰è¢«æ ‡è®°ä¸ºå·²åˆ é™¤çš„æ•°æ®ï¼Œåªéœ€è¦è¿›è¡Œä¸€æ¬¡æ•°æ®æ¬è¿æ“ä½œã€‚ åœ¨æ“ä½œé¢‘ç¹çš„æƒ…å†µä¸‹ä¸­ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§æé«˜æ•°ç»„æ“ä½œçš„æ€§èƒ½è¡¨ç°ã€‚ è¿™ä¸ªå…ˆæ ‡è®°å†å»¶è¿Ÿåˆ é™¤çš„æ€è·¯ï¼Œå…¶å®å°±æ˜¯ Java è™šæ‹Ÿæœºä¸­æ ‡è®°æ¸…é™¤åƒåœ¾å›æ”¶ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚æ•°æ®ç»“æ„å’Œç®—æ³•çš„é­…åŠ›å°±åœ¨äºæ­¤ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯è¦å»æ­»è®°ç¡¬èƒŒæŸä¸ªæ•°æ®ç»“æ„æˆ–è€…ç®—æ³•ï¼Œè€Œæ˜¯è¦å­¦ä¹ å®ƒèƒŒåçš„æ€æƒ³å’Œå¤„ç†æŠ€å·§ï¼Œè¿™äº›ä¸œè¥¿æ‰æ˜¯å¯æ‹“å±•å¯è¿ç§»ï¼Œæ‰æ˜¯æœ€æœ‰ä»·å€¼çš„ã€‚ ","date":"2021-03-02","objectID":"/data-structures-array/:4:2","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æ€»ç»“ æ•°ç»„æ˜¯ä¸€ç§é€‚åˆå¤šè¯»å°‘å†™çš„æ•°æ®ç»“æ„ï¼Œéšæœºè®¿é—®æ•ˆç‡å¾ˆé«˜ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œä½†æ˜¯æ’å…¥å’Œåˆ é™¤æ“ä½œç›¸å¯¹ä½æ•ˆï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ æ•°æ®æœ¬èº«æ˜¯ä¸€ç§å¾ˆåŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œæä¾›çš„ API æ¯”è¾ƒæœ‰é™ï¼Œå¤æ‚æ“ä½œå¹¶ä¸æ–¹ä¾¿ã€‚å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æä¾›äº†ä»¥æ•°ç»„ä¸ºåŸºç¡€çš„å®¹å™¨ï¼Œæä¾›äº†æ›´å¤šçš„ APIï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼Œå¦‚æœä¸æ˜¯å¯¹æ€§èƒ½æœ‰éå¸¸é«˜çš„è¦æ±‚ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨å®¹å™¨æ›´æ–¹ä¾¿ã€‚ åŸºäºæ•°ç»„æœ¬èº«çš„ç‰¹ç‚¹ï¼Œåœ¨ä½¿ç”¨æ•°æ®å®¹å™¨ï¼ˆä¾‹å¦‚ Java ä¸­çš„ ArrayListï¼‰æ—¶ï¼Œå°½é‡æå‰è®¾ç½®å¤§å°ï¼Œå¯ä»¥æé«˜æ•ˆç‡ã€‚ ","date":"2021-03-02","objectID":"/data-structures-array/:5:0","tags":["DataStructure"],"title":"æ•°æ®ç»“æ„ä¹‹æ•°ç»„","uri":"/data-structures-array/"},{"categories":["Computer Science"],"content":"æ‰§è¡Œæ•ˆç‡å’Œèµ„æºæ¶ˆè€—æ˜¯è¯„ä»·ä¸€ä¸ªç®—æ³•ä¼˜åŠ£æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªç‚¹ï¼Œåˆ†åˆ«ä»£è¡¨è¿è¡Œè¿™ä¸ªç®—æ³•æ‰€éœ€è¦æ¶ˆè€—çš„æ—¶é—´å’Œç©ºé—´ã€‚ åˆ†æè¿è¡Œä¸€ä¸ªç®—æ³•éœ€è¦æ¶ˆè€—å¤šå°‘æ—¶é—´çš„è¡Œä¸ºå«åšæ—¶é—´å¤æ‚åº¦åˆ†æï¼ŒåŒç†ï¼Œåˆ†æè¿è¡Œä¸€ä¸ªç®—æ³•éœ€è¦æ¶ˆè€—å¤šå°‘ç©ºé—´çš„è¡Œä¸ºå«åšç©ºé—´å¤æ‚åº¦åˆ†æã€‚ å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥å°†ç®—æ³•è¿è¡Œä¸€éï¼Œè®°å½•ä¸‹è¿è¡Œè¿‡ç¨‹ä¸­æ¶ˆè€—çš„æ—¶é—´å’Œç©ºé—´ï¼Œå°±å¯ä»¥å¾—åˆ°è¿™ä¸ªç®—æ³•å‡†ç¡®çš„èµ„æºæ¶ˆè€—æƒ…å†µã€‚è¿™ç§æ€è·¯ç¡®å®æ˜¯å¯ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç®¡è¿™ç§æ–¹æ³•å«åšäº‹åç»Ÿè®¡æ³•ã€‚ ä½†æ˜¯è¿™æ ·å¾—å‡ºæ¥çš„ç»“æœå˜é‡å¤ªå¤šï¼Œæ¯”å¦‚æµ‹è¯•ç¯å¢ƒçš„ç¡¬ä»¶æ€§èƒ½ï¼Œè½¯ä»¶ï¼ˆæ“ä½œç³»ç»Ÿ / SDK ç­‰ï¼‰ç‰ˆæœ¬ï¼Œæµ‹è¯•çš„æ•°æ®è§„æ¨¡ï¼Œç”šè‡³æ˜¯å®ç°ç®—æ³•æ‰€ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œéƒ½å¯¹ç»“æœéƒ½æœ‰æˆ–å¤šæˆ–å°‘çš„å½±å“ã€‚è€Œå¦‚æœæƒ³è¦æµ‹è¯•æ¡ä»¶è¦†ç›–å°½å¯èƒ½å¤šçš„æƒ…å†µï¼Œå°±ä¼šäº§ç”Ÿæå…¶å·¨å¤§çš„å·¥ä½œé‡ï¼Œå³ä¾¿æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ç®—æ³•ï¼Œéƒ½éœ€è¦éå¸¸å¤§é‡çš„æµ‹è¯•ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¯å–çš„æ–¹æ³•ã€‚ å› æ­¤ï¼Œäº‹åç»Ÿè®¡æ³•ä¸€èˆ¬åªé€‚åˆåœ¨ç‰¹å®šç¯å¢ƒä¸‹ç»™ç‰¹å®šçš„ç¨‹åºåšæ€§èƒ½æµ‹è¯•ï¼ˆä¾‹å¦‚å¾ˆå¤šç¨‹åºåœ¨ä¸Šçº¿ä¹‹å‰éƒ½è¦åšå‹åŠ›æµ‹è¯•ï¼‰ï¼Œä¸é€‚åˆç”¨æ¥å¯¹ä¸€ä¸ªé€šç”¨å‹çš„ç®—æ³•æˆ–ç¨‹åºåšæ— å·®åˆ«çš„æ€§èƒ½è¯„ä¼°ã€‚ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:0:0","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":["Computer Science"],"content":"å¤§ O è¡¨ç¤ºæ³• ä¸ºäº†åœ¨ç¨‹åºè¿è¡Œå‰ï¼Œä¸ä¾èµ–å…·ä½“æµ‹è¯•ç»“æœï¼Œå°±èƒ½æ— å·®åˆ«çš„è¯„ä¼°ä¸€ä¸ªç®—æ³•çš„æ‰§è¡Œæ•ˆç‡ï¼Œå·¥ç¨‹å¸ˆä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ•°å­¦ä¸­çš„æ¦‚å¿µï¼šå¤§ O ç¬¦å·ï¼Œåˆç§°æ¸è¿›ç¬¦å· å¤§ O è¡¨ç¤ºæ³•æ˜¯ç›®å‰åšç®—æ³•å¤æ‚åº¦åˆ†ææ—¶æ‰€ä½¿ç”¨çš„è¡Œä¸šæ ‡å‡†ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå®ƒè¡¨ç¤ºçš„ä¸æ˜¯æŸä¸ªå…·ä½“çš„å€¼ï¼Œè€Œæ˜¯ä¸€ç§è¶‹åŠ¿ã€‚ æ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®— 1 + 2 + 3 + â€¦ + n çš„ç´¯åŠ å¼çš„å‡½æ•°ï¼š int foo(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { sum = sum + i; } return sum; } å‡å®šè®¡ç®—æœºæ¯æ‰§è¡Œä¸€è¡Œä»£ç æ‰€æ¶ˆè€—çš„æ—¶é—´ä¸º $t$ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¬¬äºŒè¡Œæ˜¯ä¸€ä¸ªç®€å•çš„èµ‹å€¼æ“ä½œï¼Œæ¶ˆè€—æ—¶é—´ä¸º $t$ï¼Œç¬¬å››ã€äº”è¡Œæ˜¯ä¸€ä¸ªå¾ªç¯æ“ä½œï¼Œæ¶ˆè€—æ—¶é—´ä¸º $2n*t$ï¼Œé‚£ä¹ˆç¨‹åºæ€»æ¶ˆè€—æ—¶é—´ä¸º $T(n)= t + 2nt$ å†çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š int bar(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { for(int j = 1; j \u003c= n; j++) { sum = sum + i * j; } } return sum; } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¬¬äºŒè¡Œè€—è´¹çš„æ—¶é—´ä¸º $t$ï¼Œä¸‰ã€å››ã€äº”è¡Œæ˜¯ä¸€ä¸ªåŒå±‚å¾ªç¯ï¼Œå…¶ä¸­ç¬¬å››ã€äº”è¡Œè€—è´¹çš„æ—¶é—´æ˜¯ $2n^2t$ï¼Œç¬¬ä¸‰è¡Œè€—è´¹çš„æ—¶é—´æ˜¯ $nt$ï¼Œé‚£ä¹ˆæ€»çš„æ—¶é—´æ¶ˆè€—ä¸º $T(n)=t+nt+2n^2t$ é€šè¿‡ä¸¤ä¸ªä¾‹å­ï¼Œå¯ä»¥å‘ç°ä¸€ä¸ªæ˜æ˜¾çš„è§„å¾‹ï¼šä»£ç çš„æ€»æ‰§è¡Œæ—¶é—´ $T(n)$ ä¸æ¯è¡Œä»£ç çš„æ‰§è¡Œæ¬¡æ•° $n$ æˆæ­£æ¯”ã€‚ åˆ©ç”¨å¤§ O ç¬¦å·ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªè§„å¾‹è¡¨ç¤ºä¸ºï¼š$$T(n) = O(f(n))$$ è¿™ä¸ªè¡¨è¾¾å¼ç§°ä¹‹ä¸º å¤§ O è¡¨è¾¾å¼ï¼Œå…¶ä¸­ï¼š$T(n)$ è¡¨ç¤ºç¨‹åºæ€»çš„æ‰§è¡Œæ—¶é—´ï¼Œ$f(n)$ è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œçš„æ€»æ¬¡æ•°ï¼Œ$n$ è¡¨ç¤ºæ•°æ®è§„æ¨¡çš„å¤§å°ï¼Œ$O$ è¡¨ç¤º $T(n)$ ä¸ $f(n)$ æˆæ­£æ¯”ã€‚ æ‰€ä»¥ï¼Œå¤§ O è¡¨è¾¾å¼å®é™…ä¸Šå¹¶ä¸æ˜¯ä»£è¡¨ç¨‹åºå…·ä½“æ‰§è¡Œçš„æ—¶é—´ï¼Œè€Œæ˜¯è¡¨ç¤ºä»£ç æ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ï¼Œå› æ­¤ï¼Œä¹Ÿå«åšæ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼ˆasymptotic time complexityï¼‰ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚ åœ¨å¤§ O è¡¨è¾¾å¼ä¸­ï¼Œå½“ $n$ è¶‹è¿‘äºæ— é™å¤§æ—¶ï¼Œå…¬å¼ä¸­çš„å¸¸é‡ã€ç³»æ•°ã€ä½é˜¶éƒ¨åˆ†å¯¹å¢é•¿è¶‹åŠ¿çš„å½±å“éå¸¸å°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› ä¸ºç°ä»£è®¡ç®—æœºçš„æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œé€šå¸¸èƒ½è¾¾åˆ°æ¯ç§’å‡ ç™¾äº¿æ¬¡ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦è®°å½•ä¸€ä¸ªæœ€å¤§é‡çº§å³å¯ã€‚ å› æ­¤ï¼Œç¬¬ä¸€ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¾—å‡ºçš„ $T(n)=t+2nt$ï¼Œå¿½ç•¥å¸¸é‡ $t$ å’Œç³»æ•° $2t$ ä¹‹åï¼Œç”¨å¤§ O è¡¨ç¤ºæ³•ä¸ºï¼š$T(n)=O(n)$ ç¬¬äºŒä¸ªä¾‹å­ä¸­çš„ $T(n)=t+nt+2n^2t$ å¿½ç•¥å¸¸é‡å’Œç³»æ•°ï¼Œä¿ç•™æœ€å¤§é‡çº§åï¼Œç”¨å¤§ O è¡¨ç¤ºæ³•ä¸ºï¼š$T(n)=O(n^2)$ ï¼ˆè¿™ä¸ªä¾‹å­åœ¨åæ–‡â€œåŠ æ³•æ³•åˆ™â€ä¸­ä¼šæœ‰æ›´è¯¦ç»†çš„è§£é‡Šï¼‰ è¿™ç§åˆ†ææ€è·¯æ¥æºäºæ•°å­¦ä¸­çš„ æ¸è¿›åˆ†æ æ–¹æ³•ï¼Œè®¡ç®—æœºç§‘å­¦å®é™…ä¸Šå°±æ˜¯ä»æ•°å­¦ä¸­ç‹¬ç«‹å‡ºæ¥çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œåœ¨è§£å†³æ¯”è¾ƒåº•å±‚å’ŒæŠ½è±¡å±‚é¢çš„é—®é¢˜ä¸Šï¼Œç”¨çš„åŸºæœ¬éƒ½æ˜¯æ•°å­¦æ–¹æ³•ã€‚ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:1:0","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":["Computer Science"],"content":"æ—¶é—´å¤æ‚åº¦åˆ†æ æ—¶é—´ï¼Œæ˜¯ä¸–é—´æœ€å®è´µçš„èµ„æºã€‚ åœ¨ç®—æ³•çš„å¤æ‚åº¦åˆ†æä¸­ï¼Œæ—¶é—´å¤æ‚åº¦åˆ†æé€šå¸¸æ¯”ç©ºé—´å¤æ‚åº¦åˆ†ææ›´é‡è¦ï¼Œä¹Ÿæ›´å¤æ‚ã€‚å› ä¸ºè®¡ç®—æœºçš„ç©ºé—´ï¼ˆç¡¬ä»¶ï¼‰æ˜¯å¯ä»¥æ‰©å®¹çš„ï¼Œè€Œäººç±»ç›®å‰çš„ç§‘æŠ€èƒ½åŠ›ï¼Œè¿˜è¿œè¿œè¾¾ä¸åˆ°â€œæ‰©å®¹æ—¶é—´â€çš„æ°´å¹³ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å…ˆé‡ç‚¹å…³æ³¨æ—¶é—´å¤æ‚åº¦åˆ†æã€‚ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:2:0","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":["Computer Science"],"content":"åˆ†ææŠ€å·§ åˆ†æä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬éƒ½éœ€è¦æŒ‰ç…§å…·ä½“é€»è¾‘å…·ä½“åˆ†æï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€äº›å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–åˆ†æçš„æŠ€å·§ï¼Œä¸‹é¢åˆ†äº«ä¸¤ä¸ªæœ€å¸¸ç”¨çš„åˆ†ææŠ€å·§ã€‚ ä¹˜æ³•æ³•åˆ™ å¦‚ä¸‹ç¤ºä¾‹ï¼š int foo(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { sum = sum + bar(i); } return sum; } int bar(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { sum = sum + i; } return sum; } è¿™å…¶å®æ˜¯ä¸€ä¸ªæ‹†æˆä¸¤ä¸ªå‡½æ•°çš„åµŒå¥—å¾ªç¯ï¼Œå¦‚æœå‡½æ•° foo() çš„å¾ªç¯ä½“ä¸­æ˜¯ä¸€ä¸ªç®€å•çš„æ“ä½œï¼Œé‚£ä¹ˆä¸¤ä¸ªå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(n)$ï¼Œä½†æ˜¯å‡½æ•° foo() çš„å¾ªç¯ä½“ä¸­è°ƒç”¨äº†å‡½æ•° bar()ï¼Œè€Œå‡½æ•°bar()çš„æ—¶é—´å¤æ‚åº¦æ˜¯$O(n)$ï¼Œå› æ­¤å‡½æ•° foo() çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n)*O(n) = O(n^2)$ å¦‚ä¸Šæ‰€ç¤ºï¼Œå¤æ‚åº¦åˆ†æçš„ä¹˜æ³•æ³•åˆ™æŠ½è±¡ä¸ºæ•°å­¦å…¬å¼å°±æ˜¯ï¼š å½“ç¢°åˆ°åµŒå¥—å¾ªç¯ä»£ç æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¹˜æ³•æ³•åˆ™å¸®åŠ©æˆ‘ä»¬åˆ†æå¤æ‚åº¦ï¼šåµŒå¥—ä»£ç çš„å¤æ‚åº¦ç­‰äºåµŒå¥—å†…å¤–ä»£ç å¤æ‚åº¦çš„ä¹˜ç§¯ã€‚ ä¾‹å¦‚å¤–å±‚å¾ªç¯æ—¶é—´å¤æ‚åº¦ä¸º $O(f(n))$ï¼Œå†…å±‚å¾ªç¯æ—¶é—´å¤æ‚åº¦ä¸º $O(g(n))$ï¼Œé‚£ä¹ˆæ€»çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(f(n)*g(n))$ åŠ æ³•æ³•åˆ™ å¦‚ä¸‹ç¤ºä¾‹ï¼š int cal(int n) { int sum = 0; for(int i = 1; i \u003c= 100; i++) { sum = sum + i; } sum = sum + foo(n); sum = sum + bar(n); return sum; } int foo(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { sum = sum + i; } return sum; } int bar(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { sum = sum + foo(n); } return sum; } æ ¹æ®ä¸Šé¢çš„è®¡ç®—è§„åˆ™ï¼Œæˆ‘ä»¬çŸ¥é“å‡½æ•° foo() çš„æ—¶é—´å¤æ‚åº¦ $T_1(n) = O(n)$ï¼Œå‡½æ•° bar() çš„æ—¶é—´å¤æ‚åº¦ $T_2(n) = O(n^2)$ï¼Œè€Œå‡½æ•° cal() ä¸­çš„ç¬¬ä¸€æ®µæ˜¯ä¸ª 100 æ¬¡çš„å¾ªç¯ï¼Œè™½ç„¶æ˜¯ä¸ªå¾ªç¯ï¼Œä½†æ˜¯ä¸ªå·²çŸ¥æ¬¡æ•°çš„å¸¸é‡å¾ªç¯ï¼Œä¸æ•°æ®è§„æ¨¡ $n$ æ— å…³ã€‚ åŒæ—¶ï¼Œéšç€æ•°æ®è§„æ¨¡çš„å¢å¤§ï¼Œ$O(n^2)$ çš„æ—¶é—´å¤æ‚åº¦ä¼šè¿œé«˜äº $O(n)$ï¼Œæ­¤æ—¶åªéœ€è¦å–å¤æ‚åº¦æœ€é«˜çš„å€¼å³å¯ï¼Œå› æ­¤æ€»å¤æ‚åº¦ å¦‚ä¸Šæ‰€ç¤ºï¼Œå¤æ‚åº¦åˆ†æçš„åŠ æ³•æ³•åˆ™æŠ½è±¡ä¸ºæ•°æ®å…¬å¼å°±æ˜¯ï¼š å½“ç¢°åˆ°ç¨‹åºä¸­åŒ…å«å¤šä¸ªå­å‡½æ•°/ç®—æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŠ æ³•æ³•åˆ™å¸®åŠ©æˆ‘ä»¬åˆ†æå¤æ‚åº¦ï¼šæ€»å¤æ‚åº¦ç­‰äºé‡çº§æœ€å¤§çš„é‚£æ®µä»£ç çš„å¤æ‚åº¦ã€‚ æŠ€å·§ å¦‚æœåœ¨å¤šæ®µä»£ç ä¸­ï¼Œæ— æ³•ç¡®å®šå“ªä¸€æ®µå¤æ‚åº¦æœ€å¤§ï¼Œé‚£ä¹ˆç›´æ¥ç›¸åŠ å³å¯ã€‚ å¦‚ $T_1=O(n)$ï¼Œ$T_2=O(m)$ï¼Œåœ¨æ— æ³•ç¡®å®š $m$ å’Œ $n$ è°æ›´å¤§æ—¶ï¼Œåˆ™ $T(n)=O(n+m)$ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¤æ‚çš„ç®—æ³•æˆ–è€…ç¨‹åºéƒ½æ˜¯ç”±ç®€å•çš„ç®—æ³•æ­¥éª¤ç»„åˆè€Œæˆï¼Œè¿™ä¸¤ä¸ªæŠ€å·§æœ‰åŠ©äºæˆ‘ä»¬åœ¨åˆ†æå¤æ‚ç®—æ³•çš„æ—¶å€™ç†æ¸…æ€è·¯ï¼Œä¸è¢«ç»•æ™•ã€‚ç†è§£è¿™ä¸¤ä¸ªæ³•åˆ™ä¹‹åä¼šå‘ç°ï¼Œéƒ½æ˜¯å¾ˆè‡ªç„¶çš„è§„å¾‹ï¼Œæ‰€ä»¥ä¸ç”¨åˆ»æ„å»è®°å¿†å’Œå¥—ç”¨ï¼Œå¤šåˆ†æå‡ ä¸ªå®ä¾‹ï¼Œè‡ªç„¶å°±ç†Ÿæ‚‰äº†ï¼Œè€Œä¸”å¯ä»¥æ€»ç»“å‡ºæ›´é€‚åˆè‡ªå·±æ€ç»´ä¹ æƒ¯çš„æŠ€å·§ã€‚ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:2:1","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":["Computer Science"],"content":"åˆ†æå®ä¾‹ è™½ç„¶ä»£ç åƒå˜ä¸‡åŒ–ï¼Œä½†æ˜¯å¾—ç›Šäºæ•°å­¦æ€æƒ³çš„é«˜åº¦æŠ½è±¡æ€§ï¼Œä»¥ä¸‹å‡ ç§å½¢å¼å°±èƒ½å›Šæ‹¬ç»å¤§éƒ¨åˆ†ç®—æ³•çš„å¤æ‚åº¦ï¼ˆæŒ‰æ—¶é—´å¤æ‚åº¦é‡çº§å‡åºæ’åˆ—ï¼‰ï¼š å¸¸æ•°é˜¶ï¼š$O(1)$ å¯¹æ•°é˜¶ï¼š$O(log\\ n)$ çº¿æ€§é˜¶ï¼š$O(n)$ çº¿æ€§å¯¹æ•°é˜¶ï¼š$O(n*log\\ n)$ kæ¬¡æ–¹é˜¶ï¼š$O(n^k)$ æŒ‡æ•°é˜¶ï¼š$O(k^n)$ é˜¶ä¹˜é˜¶ï¼š$O(n!)$ ä»¥ä¸Š 7 ç§é‡çº§çš„å¤æ‚åº¦ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šå¤šé¡¹å¼é‡çº§å’Œéå¤šé¡¹å¼é‡çº§ï¼Œå…¶ä¸­éå¤šé¡¹å¼é‡çº§åªæœ‰ä¸¤ä¸ªï¼š$O(k^n)$ å’Œ $O(n!)$ã€‚ æ—¶é—´å¤æ‚åº¦ä¸ºéå¤šé¡¹å¼é‡çº§çš„ç®—æ³•é—®é¢˜ä¹Ÿå«åš NPï¼ˆNon-Deterministic Polynomial éç¡®å®šå¤šé¡¹å¼ï¼‰é—®é¢˜ éšç€æ•°æ®è§„æ¨¡çš„å¢å¤§ï¼Œéå¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦é‡çº§çš„ç®—æ³•ï¼Œæ‰§è¡Œæ—¶é—´ä¼šæ€¥å‰§å¢åŠ ï¼Œæ‰€ä»¥ï¼Œéå¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦çš„ç®—æ³•ä¸€èˆ¬æ•ˆç‡éƒ½å¾ˆä½ï¼Œé™¤éæ˜¯ç¡®å®šæ€§çš„å°è§„æ¨¡æ•°æ®åº”ç”¨åœºæ™¯ï¼Œå¤§å¤šæ˜¯æƒ…å†µä¸‹éƒ½ä¸åº”è¯¥ä½¿ç”¨ï¼Œå¦åˆ™å®¹æ˜“é€ æˆç¨‹åºæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚ æˆ‘ä»¬ä¸»è¦çœ‹ä¸‹å‡ ç§å¸¸è§çš„å¤šé¡¹å¼æ—¶é—´å¤æ‚åº¦çš„ä¾‹å­ï¼š å¸¸æ•°é˜¶ é¦–å…ˆè¿˜æ˜¯è¦é‡ç”³ä¸€ä¸‹å¤§ O è¡¨è¾¾å¼çš„æ¦‚å¿µï¼šè¡¨ç¤ºç¨‹åºæ‰§è¡Œæ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿çš„å˜åŒ–è¶‹åŠ¿ã€‚ æ‰€ä»¥ $O(1)$ å¹¶ä¸æ˜¯è¯´åªæ‰§è¡Œä¸€è¡Œä»£ç ï¼Œè€Œæ˜¯æŒ‡æ‰§è¡Œæ—¶é—´ä¸ä¼šéšç€æ•°æ®è§„æ¨¡çš„å¢å¤§è€Œæ— å¢å¤§ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š int sum() { int i = 1; int j = 2; return i + j; } å³ä¾¿éœ€è¦æ‰§è¡Œ 3 è¡Œä»£ç ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ $O(1)$ï¼Œè€Œä¸æ˜¯ $O(3)$ é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä¸€æ®µä»£ç é‡Œæ²¡æœ‰å¾ªç¯ã€é€’å½’ï¼Œå…¶æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(1)$ï¼Œå…¶å‡½æ•°å›¾å½¢å¦‚ä¸‹ çº¿æ€§é˜¶ çº¿æ€§é˜¶ä¹Ÿæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„æ—¶é—´å¤æ‚åº¦é‡çº§ï¼Œæ¯”å¦‚æ–‡ç« ä¸€å¼€å§‹æˆ‘ä»¬å°±åˆ†æè¿‡çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼š int foo(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { sum = sum + i; } return sum; } è¿™å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ $O(n)$ å¤æ‚åº¦çš„ä¾‹å­ï¼Œç¨‹åºæ‰§è¡Œæ—¶é—´çš„å¢é•¿å¹…åº¦å’Œæ•°æ®è§„æ¨¡çš„å¢é•¿å¹…åº¦ä¿æŒä¸€è‡´ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç®€å•çš„å•å±‚å¾ªç¯çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(n)$ ï¼Œå…¶å‡½æ•°å›¾å½¢å¦‚ä¸‹ï¼š å¯¹æ•°é˜¶ å¯¹æ•°é˜¶æ˜¯ä¹Ÿæ˜¯å¾ˆå¸¸è§ï¼Œä½†æ˜¯åˆ†æèµ·æ¥å¤æ‚ä¸€äº›çš„æ—¶é—´å¤æ‚åº¦ç±»å‹ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š int foo(int n) { int i = 1; while (i \u003c n) { i = i * 2; } return i; } // è¿™æ®µä»£ç çš„é€»è¾‘æ˜¯ï¼š i åœ¨å¾ªç¯ä¸­ä¸æ–­ä¹˜ 2 ï¼Œç›´åˆ° i \u003e= n æ—¶ï¼Œé€€å‡ºå¾ªç¯ æ ¹æ®ä¸Šæ–‡çš„åˆ†æï¼Œæˆ‘ä»¬åªè¦åˆ†æå‡ºè¿™ä¸ªå¾ªç¯æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œå°±èƒ½ç®—å‡ºè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ å®é™…ä¸Šå°±æ˜¯ç­‰æ¯”æ•°åˆ—ï¼šï¼Œä¹Ÿå°±æ˜¯ $2^x = n$ æ±‚è§£ $x$ï¼Œé«˜ä¸­æ•°å­¦ç»™äº†æˆ‘ä»¬ç­”æ¡ˆï¼š$x = log_2n$ ï¼Œæ‰€ä»¥è¿™ä¸ªå¾ªç¯æ‰§è¡Œäº† $log_2n$ éï¼Œå› æ­¤è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(log_2n)$ å¦‚æœæˆ‘ä»¬æŠŠä¸Šè¿°ä¾‹å­ä¸­çš„å¸¸é‡ä¹˜æ•° 2 æ¢æˆ 3ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦å°±å˜æˆäº† $O(log_3n)$ æ ¹æ®å¯¹æ•°çš„é“¾å¼è¿ç®—ï¼Œæˆ‘ä»¬çŸ¥é“ $log_3n = log_32 * log_2n$ï¼Œé‚£ä¹ˆ $O(log_3n) = O(log_32 * log_2n)$ï¼Œå…¶ä¸­ $log_32$ æ˜¯ä¸€ä¸ªå¸¸é‡ç³»æ•°ï¼ŒåŸºäºä¸Šæ–‡æˆ‘ä»¬çš„åˆ†æï¼Œåœ¨å¤§ O è¡¨ç¤ºæ³•ä¸­ï¼Œå¯ä»¥å¿½ç•¥ç³»æ•°ï¼Œå³ï¼š $O(C*f(n)) = O(f(n))$ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ $O(log_kn)$ è¿™æ ·çš„å¯¹æ•°é˜¶å¤æ‚åº¦ä¸­ï¼Œæ— è®ºåº•æ•°å¸¸é‡ $k$ æ˜¯å¤šå°‘ï¼Œå¤æ‚åº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»Ÿä¸€å¿½ç•¥åº•æ•°ï¼Œå°†å¯¹æ•°é˜¶å¤æ‚åº¦è¡¨ç¤ºä¸ºï¼š$O(log\\ n)$ï¼Œå…¶å‡½æ•°å›¾åƒå›¾ä¸‹ï¼š çº¿æ€§å¯¹æ•°é˜¶ ç†è§£äº†å¯¹æ•°é˜¶ $O(log\\ n)$ ä¹‹åï¼Œç†è§£çº¿æ€§å¯¹æ•°é˜¶å°±å®¹æ˜“å¾ˆå¤šäº†ã€‚å°†ä¸€ä¸ª $O(log\\ n)$ å¤æ‚åº¦çš„æ­¥éª¤ï¼Œæ‰§è¡Œ $n$ éï¼Œå…¶å¤æ‚åº¦å°±æ˜¯ $O(nlog\\ n)$ å¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ $O(nlog_n)$ æ—¶é—´å¤æ‚åº¦ç¨‹åºçš„ç¤ºä¾‹ï¼š int foo(int n) { for(int j = 1; j \u003c= n; j++) { int i = 1; while (i \u003c= n) { i = i * 2; } } } // è¿™æ®µä»£ç ä¸­ï¼Œå¤–é¢å¥—çš„è¿™å±‚ for å¾ªç¯å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ï¼Œä»…ä½œä¸ºæ¼”ç¤ºè¯´æ˜ æ ¹æ®å‰æ–‡æˆ‘ä»¬æåˆ°çš„ä¹˜æ³•æ³•åˆ™ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦å¾ˆå®¹æ˜“è®¡ç®—å¾—å‡ºï¼š $T(n) = O(n) * O(log_n) = O(nlog_n)$ è¿™å°±æ˜¯çº¿æ€§å¯¹æ•°é˜¶ï¼Œå…¶å‡½æ•°å›¾åƒå¦‚ä¸‹ï¼š K æ¬¡æ–¹é˜¶ è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„æ—¶é—´å¤æ‚åº¦ä¹‹ä¸€ï¼Œ$K$ æ˜¯å¸¸æ•°ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„å¹³æ–¹é˜¶æ—¶é—´å¤æ‚åº¦ç¤ºä¾‹ï¼š int foo(int n) { int sum = 0; for(int i = 1; i \u003c= n; i++) { for(int j = 1; j \u003c= n; j++) { sum = sum + i * j; } } } åˆ©ç”¨ä¸Šæ–‡ä»‹ç»çš„ä¹˜æ³•æ³•åˆ™ï¼Œå¾ˆå¿«å°±èƒ½è®¡ç®—å‡ºè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼š $T(n)=O(n)*O(n)=O(n^2)$ å…¶å‡½æ•°å›¾åƒå›¾ä¸‹ï¼š âš ï¸ æ³¨æ„ï¼šæ¬¡æ–¹é˜¶ $O(n^k)$ å®¹æ˜“å’ŒæŒ‡æ•°é˜¶ $O(k^n)$ æ··æ·†ï¼Œå®ƒä»¬éƒ½æ˜¯æŒ‡æ•°å‡½æ•°ï¼ŒåŒºåˆ«åœ¨äºæ•°æ®è§„æ¨¡ $n$ æ˜¯åº•æ•°è¿˜æ˜¯æŒ‡æ•°ï¼Œå¦‚æœæ•°æ®è§„æ¨¡ $n$ æ˜¯æŒ‡æ•°çš„è¯ï¼Œå¤æ‚åº¦ä¼šæ€¥å‰§ä¸Šå‡ï¼Œå‚è€ƒå‰æ–‡çš„ NP é—®é¢˜ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:2:2","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":["Computer Science"],"content":"åˆ†æè¿›é˜¶ ä»¥ä¸Šéƒ½æ˜¯ä¸€äº›é€»è¾‘ç›¸å¯¹ç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨å®é™…ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œé€šå¸¸ä¼šæœ‰ä¸€äº›æå‡æ•ˆç‡çš„æ“ä½œå’ŒæŠ€å·§ï¼Œè¿™ä¼šè®©æˆ‘ä»¬åœ¨åˆ†ææ—¶é—´å¤æ‚çš„è¿‡ç¨‹ä¸­è¦è€ƒè™‘çš„å› ç´ æ›´å¤šä¸€äº›ã€‚ å¦‚ä¸‹ç¤ºä¾‹ï¼š // array æ˜¯ä¸€ä¸ªæ•°ç»„ int find(int[] array, int x) { for (int i = 0; i \u003c array.length -1 ; i++) { if (array[i] == x) { return i; } } return -1; } // è¿™ä¸ªå‡½æ•°çš„é€»è¾‘æ˜¯æ‰¾å‡ºæ•°ç»„ array ä¸­ç›®æ ‡æ•°å€¼ x çš„ä¸‹æ ‡ä½ç½®ï¼Œå¦‚æœæ•°ç»„ä¸­æ²¡æœ‰ç›®æ ‡å€¼ x ï¼Œå°±è¿”å› -1 è¿™æ®µç¨‹åºæ˜¯åœ¨éå†æ•°ç»„ï¼Œä½†åˆä¸å®Œå…¨æ˜¯åœ¨éå†æ•°ç»„ã€‚å› ä¸ºå¾ªç¯ä¸­é—´çš„è¿™ä¸ª return å¯¼è‡´æˆ‘ä»¬ä¸å¾—ä¸æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœ x å°±åœ¨æ•°ç»„çš„ç¬¬ä¸€ä½ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±å¹¶ä¸ä¼šéå†æ•´ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡å¾ªç¯å°±é€€å‡ºï¼Œè¿™ä¸ªæ—¶å€™æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(1)$ï¼Œä½†æ˜¯å¦‚æœ x åœ¨æ•°ç»„ä¸­çš„æœ€åä¸€ä½ï¼Œæˆ–æ˜¯æ•°ç»„ä¸­æ ¹æœ¬ä¸å­˜åœ¨ xï¼Œé‚£ä¹ˆå°±éœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ—¶å€™æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº† $O(n)$ ï¼ˆ$n$ æ˜¯æ•°ç»„çš„é•¿åº¦ï¼‰ æ‰€ä»¥è¿™æ®µä»£ç åœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ä¸ä¸€æ ·çš„ã€‚ ä¸ºäº†è¡¨ç¤ºä¸åŒæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦å†å¼•å…¥ä¸‰ä¸ªæ¦‚å¿µï¼šæœ€å¥½æ—¶é—´å¤æ‚åº¦ï¼Œæœ€åæ—¶é—´å¤æ‚åº¦å’Œå¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚ æœ€å¥½/æœ€åæ—¶é—´å¤æ‚åº¦ æœ€å¥½å’Œæœ€åæ—¶é—´å¤æ‚åº¦æ¯”è¾ƒç®€å•ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒä»¬åˆ†åˆ«è¡¨ç¤ºåœ¨æœ€ç†æƒ³å’Œæœ€ä¸ç†æƒ³çš„æƒ…å†µä¸‹ä»£ç çš„æ—¶é—´å¤æ‚åº¦ã€‚ å¯¹åº”ä¸Šè¿°çš„ä¾‹å­ï¼Œå°±æ˜¯ x åœ¨æ•°ç»„ç¬¬ä¸€ä½ï¼Œå’Œ x åœ¨æ•°ç»„æœ€åä¸€ä½æˆ–è€…ä¸åœ¨æ•°ç»„ä¸­çš„æƒ…å†µã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦ å¾ˆæ˜æ˜¾ï¼Œæœ€ç†æƒ³å’Œæœ€ä¸ç†æƒ³çš„æƒ…å†µå‘ç”Ÿçš„æ¦‚ç‡éƒ½å¾ˆä½ï¼Œè¿™æ ·è¯„ä¼°å¤æ‚åº¦çš„è¯ï¼Œä¸å¤Ÿå‡†ç¡®ã€‚ä¸ºäº†æ›´å‡†ç¡®çš„è¯„ä¼°è¿™ç§æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å°±éœ€è¦å¦ä¸€ä¸ªæ¦‚å¿µï¼šå¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚ è¿˜æ˜¯ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œx åœ¨æ•°ç»„ä¸­ä½ç½®çš„å¯èƒ½æ€§æœ‰ $n+1$ ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯åœ¨æ•°ç»„ä¸­çš„ä»»æ„ä½ç½®å’Œä¸åœ¨æ•°ç»„ä¸­ã€‚æˆ‘ä»¬æŠŠæ¯ç§æƒ…å†µä¸‹éœ€è¦æ‰§è¡Œçš„æ¬¡æ•°åŠ èµ·æ¥ï¼Œå†é™¤ä»¥ $n+1$ å°±å¯ä»¥å¾—åˆ°å¹³å‡æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼š$$\\frac{1+2+3+\\cdots+n+n}{n+1}$$ æˆ‘ä»¬æŠŠè¿™ä¸ªå¼å­ç¨å¾®ç®€åŒ–ä¸€ä¸‹ï¼Œæˆ‘ä»¬çŸ¥é“ $1+2+3+\\cdots+n=\\frac{n(n+1)}{2}$ï¼ˆæ¨å¯¼è¿‡ç¨‹å¯ä»¥çœ‹è¿™é‡Œï¼‰æ‰€ä»¥ï¼š$$\\frac{1+2+\\cdots n+n}{n+1}=\\frac{n(n+1)/2+n}{n+1}=\\frac{n(n+3)}{2(n+1)}$$ å¿½ç•¥å¸¸é‡å’Œç³»æ•°ä¹‹åå¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸ªçº¿æ€§é˜¶çš„æ—¶é—´å¤æ‚åº¦ï¼ˆçœ‹ä¸å‡ºæ¥çš„è¯å¸¦å…¥å‡ ä¸ªæ•°ç®—ç®—ä¹Ÿè¡Œï¼‰ï¼Œä¹Ÿå°±æ˜¯ $O(n)$ï¼Œè¿™ä¸ªå°±æ˜¯å¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚ ä½†æ˜¯è¿™æ ·è®¡ç®—å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼Œè¿˜æ˜¯ä¸å¤Ÿå‡†ç¡®ï¼Œå› ä¸ºæ¯ç§æƒ…å†µå‡ºç°çš„æ¦‚ç‡å¹¶ä¸ä¸€æ ·ã€‚é¦–å…ˆä»å¤§æ–¹å‘ä¸Šçœ‹ï¼Œ X åªèƒ½æ˜¯åœ¨æˆ–ä¸åœ¨æ•°ç»„ä¸­ï¼Œè¿™ä¸¤ç§æƒ…å†µå‡†ç¡®çš„æ¦‚ç‡ç»Ÿè®¡èµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å°†å…¶æ¦‚ç‡åˆ†åˆ«å‡è®¾ä¸º 1/2 ï¼ŒåŒæ—¶ï¼Œx åœ¨æ•°ç»„ä¸­ä¸åŒä½ç½®å‡ºç°çš„æ¦‚ç‡ä¹Ÿåˆ†åˆ«ä¸º 1/nï¼Œæ‰€ä»¥ï¼Œæ ¹æ®æ¦‚ç‡ä¹˜æ³•æ³•åˆ™ï¼Œx å‡ºç°åœ¨æ•°ç»„ä¸­å„ä¸ªä¸åŒä½ç½®çš„æ¦‚ç‡ä¸ºï¼š$$\\frac{1}{2}\\star\\frac{1}{n}=\\frac{1}{2n}$$ ç„¶åï¼Œæˆ‘ä»¬å†å°†å„ç§æƒ…å†µçš„æ¦‚ç‡å› ç´ è€ƒè™‘è¿›å»ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—å°±å˜æˆäº†ï¼š$$1*\\frac{1}{2n}+2*\\frac{1}{2n}+\\cdots+n*\\frac{1}{2n}+n*\\frac{1}{2}=\\frac{3n+1}{4}$$ è¿™ä¸ªå€¼å°±æ˜¯æ¦‚ç‡è®ºä¸­çš„åŠ æƒå¹³å‡å€¼ï¼Œä¹Ÿå«åšæœŸæœ›å€¼ï¼Œæ‰€ä»¥æ›´å‡†ç¡®çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼Œåº”è¯¥å«åšåŠ æƒå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼Œæˆ–è€…æœŸæœ›æ—¶é—´å¤æ‚åº¦ã€‚ $\\frac{3n+1}{4}$å»æ‰å¸¸é‡å’Œç³»æ•°ä¹‹åï¼Œç”¨å¤§Oè¡¨è¾¾å¼æè¿°ï¼ŒåŠ ä¸Šæ¦‚ç‡ä¹‹åçš„å¹³å‡å¤æ‚åº¦è¿˜æ˜¯ $O(n)$ï¼Œæœ‰æ—¶ç®€å•å¹³å‡å’ŒåŠ æƒå¹³å‡å¤æ‚åº¦æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿæœ‰æ—¶ä¼šä¸ä¸€æ ·ã€‚ å¹³å‡æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—æ–¹å¼ç¡®å®æœ‰äº›å¤æ‚ï¼Œä½†æ˜¯å¹³æ—¶ä½¿ç”¨å¾—å…¶å®å¹¶ä¸å¤šï¼Œå¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨å•ä¸€å¤æ‚åº¦è¯„ä¼°å³å¯ã€‚ å‡æ‘Šæ—¶é—´å¤æ‚åº¦ ä¸Šæ–‡æåˆ°ï¼Œåªæœ‰åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹æ‰éœ€è¦ä½¿ç”¨å¹³å‡æ—¶é—´å¤æ‚åº¦å»è¯„ä¼°ç¨‹åºï¼Œè€Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦æ›´åŠ ç‰¹æ®Šï¼Œä½¿ç”¨åˆ°çš„æƒ…å†µæ›´å°‘ã€‚å¦‚ä¸‹ä»£ç ï¼š // arrayè¡¨ç¤ºä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„ // ä»£ç ä¸­çš„array.lengthå°±ç­‰äºn int[] array = new int[n]; int count = 0; void insert(int val) { if (count == array.length) { int sum = 0; for (int i = 0; i \u003c array.length; ++i) { sum = sum + array[i]; } array[0] = sum; count = 1; } array[count] = val; ++count; } è¿™æ®µä»£ç å®ç°äº†ä¸€ä¸ªå¾€æ•°ç»„ä¸­æ’å…¥æ•°æ®çš„åŠŸèƒ½ã€‚å½“æ•°ç»„æ»¡äº†ä¹‹åï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­çš„ count == array.length æ—¶ï¼Œæˆ‘ä»¬ç”¨ for å¾ªç¯éå†æ•°ç»„æ±‚å’Œï¼Œå¹¶æ¸…ç©ºæ•°ç»„ï¼Œå°†æ±‚å’Œä¹‹åçš„ sum å€¼æ”¾åˆ°æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œç„¶åå†å°†æ–°çš„æ•°æ®æ’å…¥ã€‚ä½†å¦‚æœæ•°ç»„ä¸€å¼€å§‹å°±æœ‰ç©ºé—²ç©ºé—´ï¼Œåˆ™ç›´æ¥å°†æ•°æ®æ’å…¥æ•°ç»„ã€‚ æˆ‘ä»¬åˆ†æä¸‹è¿™æ®µä»£ç çš„æœ€å¥½ã€æœ€åå’Œå¹³å‡æ—¶é—´å¤æ‚åº¦ã€‚ æœ€å¥½çš„æƒ…å†µå°±æ˜¯æ•°ç»„åˆšå¥½æœ‰ç©ºé—²ï¼Œäºæ˜¯ç›´æ¥æ’å…¥å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼Œæœ€åçš„æƒ…å†µå°±æ˜¯åˆšå¥½ count == array.length ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦éå†æ•´ä¸ªæ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$ ç„¶åæˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹æœŸæœ›æ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œä¸€å…±æœ‰ n+1 ç§æƒ…å†µï¼Œå…¶ä¸­æœ‰ç©ºä½çš„ç§æƒ…å†µæœ‰ n ç§çš„ï¼Œæ²¡æœ‰ç©ºä½çš„æƒ…å†µæœ‰ä¸€ç§ï¼Œè€Œä¸”æ¯ç§æƒ…å†µå‡ºç°çš„æ¦‚ç‡éƒ½æ˜¯ n+1ï¼Œå› æ­¤ï¼ŒæœŸæœ›æ—¶é—´å¤æ‚åº¦ä¸ºï¼š $$1*\\frac{1}{n+1}+1*\\frac{1}{n+1}+\\cdots+1*\\frac{1}{n+1}+n*\\frac{1}{n+1}=\\frac{2n}{n+1}$$ çœç•¥ç³»æ•°å’Œå¸¸é‡ä¹‹åï¼Œå°±æ˜¯ $O(1)$ ä½†æ˜¯è¿™ä¸ªä¾‹å­ä¸­åˆ†æå¹³å‡æ—¶é—´å¤æ‚åº¦ï¼Œå…¶å®å¹¶ä¸éœ€è¦è¿™ä¹ˆå¤æ‚çš„è®¡ç®—ï¼Œä¸ºä»€å‘¢ï¼Ÿ æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ä¸ªä¾‹å­ï¼Œä¼šå‘ç°ä¸¤ä¸ªå¾ˆå¤§çš„åŒºåˆ«ï¼š find() å‡½æ•°ä¸­ï¼Œåªæœ‰åœ¨æå°‘æ•°æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦æ‰ä¼šæ˜¯ $O(1)$ï¼Œè€Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(n)$ï¼Œä½†æ˜¯ insert() å‡½æ•°å¾ˆä¸ä¸€æ ·ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ $O(1)$ï¼Œåªæœ‰åœ¨æå°‘æ•°çš„æœ€ä¸ç†æƒ³æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦æ‰ä¼šæ˜¯ $O(n)$ insert() å‡½æ•°ä¸­ $O(n)$ æ“ä½œå’Œ $O(1)$ æ“ä½œæœ‰å¾ˆå¼ºçš„è§„å¾‹æ€§å’Œé¡ºåºæ€§ï¼šæ¯ä¸€æ¬¡ $O(n)$ çš„æ’å…¥æ“ä½œä¹‹åï¼Œç´§æ¥ç€ $n-1$ æ¬¡çš„ $O(1)$ æ’å…¥æ“ä½œï¼Œå¦‚æ­¤å¾ªç¯ é’ˆå¯¹è¿™ç§æ›´åŠ ç‰¹æ®Šçš„æƒ…å†µï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ç§æ›´åŠ æ–¹æ³•çš„åˆ†ææ–¹æ³•ï¼šæ‘Šè¿˜åˆ†ææ³•ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•åˆ†æå¾—å‡ºçš„æ—¶é—´å¤æ‚åº¦æˆ‘ä»¬ç§°ä¹‹ä¸ºï¼šæ‘Šè¿˜æ—¶é—´å¤æ‚åº¦ã€‚ è¿™ç§åˆ†ææ–¹æ³•çš„æ ¸å¿ƒæ€è·¯æ˜¯ åˆ†ç»„ã€‚ æˆ‘ä»¬çœ‹è¿™ä¸ªä¾‹å­ï¼Œæ¯ä¸€æ¬¡ $O(n)$ å¤æ‚åº¦çš„æ’å…¥æ“ä½œä¹‹åï¼Œç´§æ¥ç€ $n-1$ æ¬¡ $O(1)$ å¤æ‚åº¦çš„æ’å…¥æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠè¿™ n æ¬¡æ“ä½œåˆ†æˆä¸€ç»„ï¼Œå°†ç¬¬ä¸€æ¬¡ $O(n)$ è€—æ—¶å¤šçš„æ“ä½œä¸­æ¶ˆè€—çš„æ—¶é—´ï¼Œå‡æ‘Šåˆ°åé¢ $n-1$ è€—æ—¶å°‘çš„æ“ä½œä¸­ï¼Œè¿™æ ·ä¸€ç»„è¿ç»­æ“ä½œä¸‹æ¥å‡æ‘Šçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(1)$ã€‚è¿™å°±æ˜¯æ‘Šè¿˜åˆ†ææ–¹æ³•çš„å¤§è‡´æ€è·¯ã€‚ æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œåœ¨ä¸€ä¸ªç¨‹åºä¸­ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æ—¶é—´å¤æ‚åº¦éƒ½å¾ˆä½ï¼Œåªæœ‰æå°‘æ•°æ—¶å€™æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ï¼Œè€Œä¸”è¿™äº›æ“ä½œä¹‹é—´å­˜åœ¨å¾ˆå¼ºçš„é¡ºåºå…³ç³»ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥æŠŠè¿™ä¸ªç¨‹åºçš„æ“ä½œè¿›è¡Œåˆ†ç»„ï¼Œå°†è€—æ—¶å¤šçš„æƒ…å†µä¸‹å¤šæ¶ˆè€—çš„æ—¶é—´ï¼Œå‡æ‘Šåˆ°è€—æ—¶å°‘çš„æƒ…å†µä¸­å»ï¼Œè¿™æ ·å°±èƒ½æ›´å¿«çš„å¾—åˆ°è¿™ä¸ªç¨‹åºçš„æ—¶é—´å¤æ‚åº¦ã€‚ ä»è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œåœ¨èƒ½å¤Ÿä½¿ç”¨æ‘Šè¿˜åˆ†ææ–¹æ³•çš„åœºæ™¯ä¸­ï¼Œä¸€èˆ¬å‡æ‘Šæ—¶é—´å¤æ‚åº¦å°±ç­‰äºæœ€å¥½æ—¶é—´å¤æ‚åº¦ã€‚ é€šè¿‡ä¸Šè¿°å¹³å‡æ—¶é—´å¤æ‚åº¦å’Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦çš„ä¸¤ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬èƒ½çœ‹å‡ºæ¥ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯åˆ†æç¨‹åºæ—¶é—´å¤æ‚åº¦çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œè€Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦åˆæ˜¯å¹³å‡æ—¶é—´å¤æ‚åº¦çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå› æ­¤ï¼Œä¼šç”¨åˆ°å‡æ‘Šæ—¶é—´å¤æ‚åº¦çš„åœºåˆå°±æ›´å°‘äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é‡ç‚¹æ˜¯è¦çŸ¥é“è¿™ç§åˆ†ææ€è·¯ï¼Œå¹¶ä¸ç”¨èŠ±å¤ªå¤šç²¾åŠ›åœ¨å»åŒºåˆ†å’Œè®°å¿†ã€‚ ä¸Šæ–‡èŠ±äº†å¾ˆé•¿çš„ç¯‡å¹…è®²äº†æ—¶é—´å¤æ‚åº¦åˆ†æï¼Œç†è§£äº†è¿™äº›å†…å®¹ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥åˆ†æç©ºé—´å¤æ‚åº¦ï¼Œå°±ç®€å•å¾ˆå¤šäº†ã€‚ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:2:3","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":["Computer Science"],"content":"ç©ºé—´å¤æ‚åº¦åˆ†æ åˆ†æç©ºé—´å¤æ‚åº¦å’Œåˆ†ææ—¶é—´å¤æ‚åº¦çš„æ¡†æ¶æ˜¯ä¸€è‡´çš„ï¼Œéƒ½æ˜¯ä½¿ç”¨å¤§ O è¡¨è¾¾å¼ï¼Œä¹Ÿéƒ½æ˜¯è¡¨ç¤ºæ•°æ®è§„æ¨¡ä¸å¤æ‚åº¦ä¹‹é—´çš„è¶‹åŠ¿å…³ç³»ã€‚é‚£ä¹ˆï¼Œç±»æ¯”ä¸€ä¸‹ï¼Œç©ºé—´å¤æ‚åº¦å…¨ç§°å°±æ˜¯æ¸è¿›ç©ºé—´å¤æ‚åº¦ï¼ˆasymptotic space complexityï¼‰ï¼Œè¡¨ç¤ºç®—æ³•æ¶ˆè€—çš„å­˜å‚¨ç©ºé—´ä¸æ•°æ®è§„æ¨¡ä¹‹é—´çš„å¢é•¿å…³ç³»ã€‚ ç©ºé—´å¤æ‚åº¦åˆ†æç›¸è¾ƒäºæ—¶é—´å¤æ‚åº¦åˆ†æï¼Œè¦ç®€å•å¾ˆå¤šã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š void print(int n) { int[] array = new int[n]; for(int i = 0; i \u003c= n-1; i++) { array[i] = (int)(Math.random()*100); } for(int j = 0; j \u003c= n-1; j++) { System.out.println(array[j]); } } è¿™æ®µä»£ç æ˜¯å°†ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ç”¨ 100 ä»¥å†…çš„éšæœºæ•°å¡«æ»¡ï¼Œç„¶åå†éå†è¾“å‡ºã€‚ åœ¨ç©ºé—´ä½¿ç”¨æ–¹é¢ï¼Œé™¤äº†ç¬¬äºŒè¡Œç”³è¯·äº†ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ arrayï¼Œå…¶ä»–æ“ä½œå‡æ²¡æœ‰æ¶‰åŠï¼Œå› æ­¤è¿™æ®µä»£ç çš„ç©ºé—´å¤æ‚åº¦å’Œ n çš„å¤§å°æˆæ­£æ¯”ï¼Œä¹Ÿå°±æ˜¯ $O(n)$ å¸¸ç”¨çš„ç©ºé—´å¤æ‚åº¦æ¯”å¸¸ç”¨çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿå°‘å¾ˆå¤šï¼Œä¸€èˆ¬å°±æ˜¯ $O(1)$ã€ $O(n)$ã€ $O(n^2)$ è¿™ä¸‰ç§ã€‚å¦‚æœç¢°åˆ°ç‰¹æ®Šæƒ…å†µï¼Œä½¿ç”¨åˆ†ææ—¶é—´å¤æ‚åº¦çš„æ€è·¯å»åˆ†æå³å¯ã€‚ æœ¬æ–‡ä¸»è¦å‚è€ƒã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ã€‹å’Œç»´åŸºç™¾ç§‘ã€‚ ","date":"2021-02-06","objectID":"/introduction-to-algorithm-complexity-analysis/:3:0","tags":["Algorithm"],"title":"ç®—æ³•å¤æ‚åº¦åˆ†æå…¥é—¨","uri":"/introduction-to-algorithm-complexity-analysis/"},{"categories":null,"content":"å†™æ¸…æ¥šï¼Œè®²æ˜ç™½ã€‚ ","date":"2021-01-01","objectID":"/about/:0:1","tags":null,"title":"About","uri":"/about/"},{"categories":["Database"],"content":"æœ€è¿‘é¡¹ç›®ä¸Šéœ€è¦ç”¨åˆ° redis é«˜å¯ç”¨æ–¹æ¡ˆï¼Œé‚ä¸Šç½‘æ‰¾äº†ä¸€äº›èµ„æ–™å­¦ä¹ ï¼Œä½†æ˜¯ç½‘ä¸Šå…³äº redis é«˜å¯ç”¨çš„å‡ ç§å®ç°æ–¹å¼æˆ–å£å¾„ä¸ä¸€ï¼Œæˆ–å«ç³Šä¸æ¸…ï¼Œæˆ–ç¼ºæ–¤å°‘ä¸¤ã€‚ç»å†äº†å¤šæ–¹èµ„æ–™å­¦ä¹ å’Œå®é™…éªŒè¯ï¼Œæœ¬æ–‡è¯•å›¾å°† redis åˆ†å¸ƒå¼å’Œé›†ç¾¤æ–¹æ¡ˆä»æ¦‚å¿µç†è§£åˆ°æŠ€æœ¯é€‰å‹åˆ°æ­å»ºä½¿çš„æ•´ä¸ªè¿‡ç¨‹ç”¨æœ€ç®€å•çš„è¯­è¨€è®²è¿°æ¸…æ¥šã€‚ ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:0:0","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"åˆ†å¸ƒå¼ä¸é›†ç¾¤ ä¸‹æ–‡ä¼šæ¶‰åŠåˆ°å¤§é‡çš„åˆ†å¸ƒå¼å’Œé›†ç¾¤æœ¯è¯­ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆæ¥å¤ä¹ ä¸€ä¸‹é›†ç¾¤å’Œåˆ†å¸ƒå¼çš„æ¦‚å¿µï¼ŒåŠ æ·±ä¸€ä¸‹ç†è§£ã€‚ ç›®å‰çš„é¡¹ç›®å¾ˆå°‘ä¼šé‡‡ç”¨å•æœºæ¶æ„äº†ï¼Œä¸€æ˜¯å› ä¸ºå•æœºæ€§èƒ½æœ‰é™ï¼ŒäºŒæ˜¯å› ä¸ºå•æœºæœåŠ¡ä¸€æ—¦æ•…éšœæ•´ä¸ªç³»ç»Ÿå°±æ— æ³•ç»§ç»­æä¾›æœåŠ¡äº†ã€‚æ‰€ä»¥ç›®å‰é›†ç¾¤å’Œåˆ†å¸ƒå¼çš„æ¶æ„ä½¿ç”¨å¾—å¾ˆå¹¿æ³›ï¼Œä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ€§èƒ½é—®é¢˜ï¼Œä¸€ä¸ªæ•…éšœé—®é¢˜ï¼Œé€šè¿‡åˆ†å¸ƒå¼æ¶æ„è§£å†³æ€§èƒ½ï¼ˆé«˜å¹¶å‘ï¼‰é—®é¢˜ï¼Œé€šè¿‡é›†ç¾¤æ¶æ„è§£å†³æ•…éšœæœåŠ¡ï¼ˆé«˜å¯ç”¨ï¼‰é—®é¢˜ã€‚ ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:1:0","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"åˆ†å¸ƒå¼æ¶æ„ åˆ†å¸ƒå¼ï¼šä¸€ä¸ªä¸šåŠ¡åˆ†æ‹†å¤šä¸ªå­ä¸šåŠ¡ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Š ç½‘ä¸Šå¾ˆå¤šæ–‡ç« æŠŠåˆ†å¸ƒå¼æ¶æ„è¯´å¾—å¾ˆå¤æ‚ï¼Œä½†éƒ½æ²¡æœ‰åˆ‡ä¸­å…³é”®ï¼Œå…¶å®ç†è§£èµ·æ¥å¾ˆç®€å•ï¼Œæ‰€æœ‰çš„è®¡ç®—æœºç³»ç»Ÿéƒ½æ˜¯ä¸ºä¸šåŠ¡æœåŠ¡çš„ï¼Œå°†åŒä¸€ä¸ªä¸šåŠ¡æ‹†åˆ†æˆå¤šä¸ªå­ä¸šåŠ¡ï¼Œå„ä¸ªå­ä¸šåŠ¡éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼æ¶æ„ï¼Œé€šè¿‡å°†ä¸šåŠ¡æ‹†ç»†ï¼Œä¸ºä¸åŒçš„å­ä¸šåŠ¡é…ç½®ä¸åŒæ€§èƒ½çš„æœåŠ¡å™¨ï¼Œæé«˜æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½ã€‚æˆ‘ä¸ªäººè®¤ä¸ºç›®å‰å¾ˆç«çš„å¾®æœåŠ¡æ¦‚å¿µå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯åˆ†å¸ƒå¼ã€‚ æŒ‰ç…§ç±»å‹å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šåˆ†å¸ƒå¼è®¡ç®—å’Œåˆ†å¸ƒå¼å­˜å‚¨ã€‚ åˆ†å¸ƒå¼è®¡ç®—å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°†å¤§é‡è®¡ç®—ä»»åŠ¡åˆ†é…åˆ°å¤šä¸ªè®¡ç®—å•å…ƒä¸Šä»¥æé«˜æ€»è®¡ç®—æ€§èƒ½ã€‚ä¾‹å¦‚æš´åŠ›ç ´è§£æŸä¸ªå¯†ç éœ€è¦éå†æŸä¸ªå­—ç¬¦ç»„åˆ10ä¸‡æ¬¡ï¼Œå‡è®¾ä¸€å°è®¡ç®—æœºéœ€è¦10åˆ†é’Ÿï¼Œé‚£ä¹ˆ10å°è®¡ç®—æœºåŒæ—¶éå†ï¼Œæ¯å°éå†1ä¸‡æ¬¡ï¼Œæœ€åå°†ç»“æœæ±‡æ€»ï¼Œé‚£ä¹ˆå°±åªéœ€è¦1åˆ†é’Ÿã€‚è¿™10å°è®¡ç®—æœºç»„åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è®¡ç®—ç³»ç»Ÿï¼Œè¿™é‡Œçš„ä¸šåŠ¡å°±æ˜¯è®¡ç®—ã€‚ åŒç†ï¼Œåˆ†å¸ƒå¼å‚¨å­˜ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°†å¤§é‡æ•°æ®åˆ†é…åˆ°å¤šä¸ªå‚¨å­˜å•å…ƒä¸Šä»¥æé«˜æ€»å­˜å‚¨é‡ã€‚ä¾‹å¦‚100ZBçš„æ•°æ®ä¸€ä¸ªå‚¨å­˜å•å…ƒæ”¾ä¸ä¸‹ï¼Œé‚£å°±æ‹†æˆ100ä»½ï¼Œæ¯ä¸ªå‚¨å­˜å•å…ƒå­˜1ä»½ï¼Œé‚£ä¹ˆè¿™100ä¸ªå­˜å‚¨å•å…ƒç»„åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å‚¨å­˜ç³»ç»Ÿï¼Œè¿™é‡Œçš„ä¸šåŠ¡å°±æ˜¯å­˜å‚¨ã€‚ç›®å‰ä¸»æµçš„å…³ç³»å‹æ•°æ®åº“éƒ½æœ‰æ¯”è¾ƒæˆç†Ÿçš„åˆ†å¸ƒå¼å­˜å‚¨æ–¹æ¡ˆï¼Œå¦‚ MySQL çš„ MySQL Fabricã€MyCat ç­‰ï¼ŒOracle Database æœ‰Oracle Sharding ç­‰ã€‚Redis ä½œä¸ºæµè¡Œçš„éå…³ç³»å‹æ•°æ®åº“ï¼Œç”±äºæ˜¯å†…å­˜æ•°æ®åº“ï¼Œç†è®ºä¸Šä¸€èˆ¬ä¸ä¼šåœ¨ Redis ä¸­å­˜æ”¾å¤ªå¤šçš„æ•°æ®ï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹è¿˜æ˜¯ä¼šæœ‰å‚¨å­˜ç©ºé—´ä¸å¤Ÿçš„æƒ…å†µï¼Œæˆ–è€…éœ€è¦é¢„é˜²å‚¨å­˜ç©ºé—´ä¸å¤Ÿçš„æƒ…å†µå‘ç”Ÿï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ Redis åˆ†å¸ƒå¼æ¶æ„äº†ã€‚ ä¾‹å¦‚æŸé›†å›¢ä¸‹æœ‰å¾ˆå¤šçš„å­å…¬å¸ï¼Œæ¯ä¸ªå­å…¬å¸éƒ½æœ‰å¤šå¥— IT ç³»ç»Ÿï¼Œå…¶ä¸­å¾ˆå¤š IT ç³»ç»Ÿéƒ½æ˜¯éœ€è¦ä½¿ç”¨ Redis çš„ï¼Œé›†å›¢ä¸ºäº†ç»Ÿä¸€ç®¡ç†ï¼Œæ­å»ºäº†ä¸€å¥—ä¸­å¤® Redis ç³»ç»Ÿï¼Œè¦æ±‚æ‰€æœ‰å­å…¬å¸ä¸‹çš„ IT ç³»ç»Ÿç»Ÿä¸€ä½¿ç”¨é›†å›¢çš„ä¸­å¤® Redis åº“ï¼Œè¿™ä¸ªæ—¶å€™å³ä½¿å½“å‰å‚¨å­˜å®¹é‡å¤Ÿç”¨ï¼Œä½†æ˜¯ä¸ºäº†åº”å¯¹åæœŸå‘å±•å°±å¿…é¡»ä½¿ç”¨åˆ°åˆ†å¸ƒå¼å‚¨å­˜ï¼Œå› ä¸ºåˆ†å¸ƒå¼æ¶æ„ç†è®ºä¸Šéƒ½æ”¯æŒæ— é™æ°´å¹³æ‹“å±•ã€‚ ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:1:1","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"é›†ç¾¤æ¶æ„ é›†ç¾¤ï¼šåŒä¸€ä¸ªä¸šåŠ¡ï¼Œéƒ¨ç½²åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Š é›†ç¾¤åŒæ ·ä¹Ÿéå¸¸å¥½ç†è§£ï¼Œå°±æ˜¯åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²åŒä¸€ä¸ªä¸šåŠ¡ï¼Œè¿™æ ·å¯ä»¥èµ·åˆ°ä¸¤ä¸ªä½œç”¨ï¼š åˆ†æ•£æ¯å°æœåŠ¡å™¨çš„å‹åŠ› ä»»æ„ä¸€å°æˆ–è€…å‡ å°æœåŠ¡å™¨å®•æœºä¹Ÿä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿ ä¾‹å¦‚ä¸€ä¸ªå…¸å‹çš„ Web é›†ç¾¤æœåŠ¡æ¶æ„å›¾å¦‚ä¸‹ï¼š è¿™é‡Œä¸‰ä¸ª Web Server æœåŠ¡å™¨å®é™…ä¸Šéƒ½æ˜¯è¿è¡Œç€åŒä¸€å¥—ä¸šåŠ¡ï¼Œä½†æ˜¯ä¸‰å°æœåŠ¡å™¨å°±å¯ä»¥æ˜¾è‘—åˆ†æ•£å•å°æœåŠ¡å™¨å‹åŠ›ï¼Œå¹¶ä¸”ä»»æ„ä¸€å°å®•æœºä¹Ÿä¸ä¼šå¯¼è‡´æ— æ³•æä¾›æœåŠ¡ã€‚ ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:1:2","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"åˆ†å¸ƒå¼ä¸é›†ç¾¤çš„å…³ç³» åˆ†å¸ƒå¼å’Œé›†ç¾¤åŒºåˆ«å¾ˆå¥½ç†è§£ï¼Œç”¨ä¸‹é¢ä¸€å¼ å›¾è¡¨ç¤ºï¼š éœ€è¦æ³¨æ„çš„æ˜¯åˆ†å¸ƒå¼ä¸ä¸€å®šèƒ½ç”¨ä¸Šï¼Œä½†æ˜¯é›†ç¾¤ä¸€èˆ¬éƒ½æ˜¯éœ€è¦çš„ã€‚å› ä¸ºä¸æ˜¯æ‰€æœ‰ç³»ç»Ÿéƒ½éœ€è¦åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼Œä½†é«˜å¯ç”¨æ˜¯ä¸€ä¸ªç³»ç»Ÿèƒ½å¤Ÿé•¿æœŸç¨³å®šè¿è¡ŒåŸºæœ¬ä¿éšœã€‚å› æ­¤ç”¨åˆ°åˆ†å¸ƒå¼æ¶æ„çš„ç³»ç»ŸåŸºæœ¬ä¸Šéƒ½ä¼šç”¨åˆ°é›†ç¾¤ï¼Œè€Œç”¨é›†ç¾¤æ¶æ„çš„ç³»ç»Ÿå´ä¸ä¸€å®šä¼šç”¨åˆ°åˆ†å¸ƒå¼ã€‚ ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:1:3","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"Redis éƒ¨ç½²æŒ‡å— ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:2:0","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"å•èŠ‚ç‚¹æ–¹æ¡ˆï¼šRedis Standalone åŸç†ç®€ä»‹ è¿™æ˜¯æœ€ç®€å•çš„ redis éƒ¨ç½²æ–¹æ¡ˆï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨å’Œè¯»å†™æ“ä½œéƒ½åœ¨åŒä¸€ä¸ª redis æœåŠ¡ä¸Šã€‚ è¿™ç§æ–¹å¼ä¼˜ç‚¹å¾ˆæ˜æ˜¾ï¼šéƒ¨ç½²ç®€å•ï¼Œæ— è®ºæ˜¯éƒ¨ç½²æˆæœ¬è¿˜æ˜¯è¿ç»´æˆæœ¬éƒ½å¾ˆä½ï¼Œæœ¬åœ°æµ‹è¯•æ—¶æœ€å¸¸è§ä¹Ÿæ˜¯æœ€æ–¹ä¾¿çš„æ–¹å¼ã€‚ ä½†åŒæ—¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼šä¸èƒ½å®ç°é«˜å¯ç”¨ï¼Œä¹Ÿä¸èƒ½åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼Œä¹Ÿæ— æ³•è½»æ˜“æ°´å¹³æ‹“å±•ï¼Œæ•°æ®å‚¨å­˜é‡å¾ˆå®¹æ˜“è§é¡¶ã€‚ éƒ¨ç½²å®ä¾‹ å•èŠ‚ç‚¹æ¨¡å¼çš„éƒ¨ç½²æ˜¯æœ€ç®€å•çš„ï¼Œä¸€ä¸‹æ˜¯ Linux ç³»ç»Ÿä¸‹éƒ¨ç½²å•èŠ‚ç‚¹ redis çš„æ–¹æ³•ï¼š # ä¸‹è½½ Redis äºŒè¿›åˆ¶å®‰è£…åŒ…ï¼š wget http://download.redis.io/releases/redis-5.0.4.tar.gz # è§£å‹äºŒè¿›åˆ¶åŒ… tar â€“zxvf redis-5.0.4.tar.gz # è¿›å…¥è§£å‹æ–‡ä»¶å¤¹å¹¶ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ cd redis-5.0.4 make # å®‰è£… cd src make test make install åœ¨ make install å’Œ make test çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼š You need tcl 8.5 or newer in order to run the Redis test make: *** [test] Error 1 è¿™æ˜¯å› ä¸ºç³»ç»Ÿä¸­çš„ TCL è¯­è¨€ç‰ˆæœ¬å¤ªä½ï¼ŒTCL è¯­è¨€æ˜¯ä¸€ç§å·¥å…·è„šæœ¬è¯­è¨€ï¼Œåœ¨å®‰è£… Redis çš„è¿‡ç¨‹ä¸­ make test å‘½ä»¤éœ€è¦ç”¨åˆ°è¿™ä¸ªè„šæœ¬è¯­è¨€ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦å‡çº§ä¸€ä¸‹ç³»ç»Ÿä¸­çš„ TCL ç‰ˆæœ¬ï¼š # ä¸‹è½½ä¸€ä¸ªé«˜äº 8.5 ç‰ˆæœ¬çš„ TCL å®‰è£…åŒ…ï¼Œæ¯”å¦‚ 8.6.8 wget http://downloads.sourceforge.net/tcl/tcl8.6.8-src.tar.gz # è§£å‹ tar -zxvf tcl8.6.8-src.tar.gz -C /usr/local/ # åˆ‡æ¢åˆ°è§£å‹åçš„æºç ç›®å½• cd /usr/local/tcl8.6.8/unix/ # ç¼–è¯‘å’Œå®‰è£… sudo ./configure sudo make sudo make install å‡çº§ TCL åˆ° 8.5 ç‰ˆæœ¬ä»¥åï¼Œç»§ç»­æ‰§è¡Œä¹‹å‰æŠ¥é”™çš„è¯­å¥ï¼Œå®Œæˆ Redis çš„å®‰è£…ï¼Œå®‰è£…å®Œæˆåç”¨ redis-server -v éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼Œè‹¥æˆåŠŸè¾“å‡ºå¦‚ä¸‹ç‰ˆæœ¬ä¿¡æ¯åˆ™ä»£è¡¨å®‰è£…æˆåŠŸï¼š Redis server v=5.0.4 å®‰è£…æˆåŠŸå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼Œä½†æ˜¯é»˜è®¤é…ç½®ä¸‹æ˜¯ä¸æ”¯æŒåå°è¿è¡Œçš„ï¼Œè§‚ç‚¹å‘½ä»¤çª—å£å°±ä¼šç»“æŸ redis è¿›ç¨‹ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å†ç®€å•æ”¹ä¸€ä¸‹ redis çš„é…ç½®ï¼Œè®©å…¶èƒ½å¤Ÿç›´æ¥åå°è¿è¡Œã€‚ # è¿›å…¥åˆ° redis çš„å®‰è£…ç›®å½•ï¼Œç¼–è¾‘ redis.conf vim /usr/redis/redis-5.0.4/redis.conf # å°† daemonize no ä¿®æ”¹æˆ daemonize yes ï¼ˆä½¿ redis æœåŠ¡å¯ä»¥åœ¨åå°è¿è¡Œï¼‰ # åœ¨æŒ‡å®šé…ç½®ä¸‹è¿è¡ŒredisæœåŠ¡ /usr/local/bin/redis-server /usr/redis/redis-5.0.4/redis.conf # æŸ¥çœ‹redisè¿è¡Œæƒ…å†µ ps -ef | grep redis # è¾“å‡º app 21794 1 0 Jan28 ? 03:31:25 ./redis-server *:6379 å¯ä»¥çœ‹åˆ° redis åœ¨é»˜è®¤çš„ 6379 ç«¯å£ä¸‹è¿è¡Œï¼Œé…ç½®æ–‡ä»¶ä¸­è¿˜æœ‰ä¸€äº›å¯ä»¥è°ƒæ•´çš„åœ°æ–¹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ é‚£ä¹ˆå•èŠ‚ç‚¹æ¨¡å¼ redis æœåŠ¡å°±éƒ¨ç½²å®Œæˆäº† ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:2:1","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"Redis é«˜å¯ç”¨æ–¹æ¡ˆï¼šRedis Sentinel åŸç†ç®€ä»‹ Redis Sentinel æ˜¯ Redis å®˜æ–¹æ¨èçš„é«˜å¯ç”¨æ€§(HA)è§£å†³æ–¹æ¡ˆï¼Œè¿™æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­æœ€å®ç”¨ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„æ–¹æ¡ˆã€‚ è¿™é‡Œæ¶‰åŠåˆ°å¦ä¸€ä¸ªæ¦‚å¿µï¼šmaster-slaverï¼ˆä¸»ä»æ¨¡å¼ï¼‰ã€‚å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å¸¸ç”¨çš„ä¸»å¤‡æ¨¡å¼ï¼Œä¾‹å¦‚ nginx çš„ä¸»å¤‡æ¨¡å¼ã€‚ä¸€ä¸ªä¸» redis èŠ‚ç‚¹å¯ä»¥é…ç½®å¤šä¸ªä»èŠ‚ç‚¹ï¼Œå½“ä¸»èŠ‚ç‚¹æŒ‚æ‰æ—¶ï¼Œä»èŠ‚ç‚¹è‡ªåŠ¨é¡¶ä¸Šä»£æ›¿ä¸»èŠ‚ç‚¹ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆçš„é¿å…ä¸€ä¸ªèŠ‚ç‚¹æŒ‚æ‰å¯¼è‡´æ•´ä¸ªç³»ç»ŸæŒ‚æ‰çš„é—®é¢˜ï¼Œå®ç° redis æœåŠ¡çš„é«˜å¯ç”¨ã€‚å¦‚ä¸‹å›¾ï¼š ä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆéœ€è¦è§£å†³ä¸¤ä¸ªåŸºæœ¬é—®é¢˜ï¼š å¦‚ä½•æå‰åˆ¤æ–­å„ä¸ªèŠ‚ç‚¹ï¼ˆå°¤å…¶æ˜¯ä¸»èŠ‚ç‚¹ï¼‰çš„è¿è¡Œå¥åº·çŠ¶å†µï¼Ÿ å½“ä¸»èŠ‚ç‚¹å®•æœºçš„æ—¶å€™å¦‚ä½•ä»å¤šä¸ªä»èŠ‚ç‚¹ä¸­é€‰å‡ºä¸€ä¸ªä½œä¸ºæ–°çš„ä¸»èŠ‚ç‚¹å¹¶å®ç°è‡ªåŠ¨åˆ‡æ¢ï¼Ÿ è¿™æ—¶ Redis Sentinel åº”è¿è€Œç”Ÿï¼Œå®ƒä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š ç›‘æ§ï¼ˆMonitoringï¼‰ï¼šSentinel ä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸ã€‚ æé†’ï¼ˆNotificationï¼‰ï¼šå½“è¢«ç›‘æ§çš„æŸä¸ª Redis æœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶ï¼ŒSentinel å¯ä»¥é€šè¿‡ API å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚ è‡ªåŠ¨æ•…éšœè¿ç§»ï¼ˆAutomatic failoverï¼‰ï¼šå½“ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼ŒSentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œï¼Œ å®ƒä¼šå°†å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä¸­ä¸€ä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œå¹¶è®©å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä»–ä»æœåŠ¡å™¨æ”¹ä¸ºå¤åˆ¶æ–°çš„ä¸»æœåŠ¡å™¨ï¼› å½“å®¢æˆ·ç«¯è¯•å›¾è¿æ¥å¤±æ•ˆçš„ä¸»æœåŠ¡å™¨æ—¶ï¼Œ é›†ç¾¤ä¹Ÿä¼šå‘å®¢æˆ·ç«¯è¿”å›æ–°ä¸»æœåŠ¡å™¨çš„åœ°å€ï¼Œä½¿å¾—é›†ç¾¤å¯ä»¥ä½¿ç”¨æ–°ä¸»æœåŠ¡å™¨ä»£æ›¿å¤±æ•ˆæœåŠ¡å™¨ã€‚ æ€»ç»“æ¥è¯´å°±æ˜¯ sentinel å¯ä»¥ç›‘æ§ä¸€ä¸ªæˆ–è€…å¤šä¸ª master-slaver é›†ç¾¤ï¼Œå®šæ—¶å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œå¥åº·æ£€æŸ¥ï¼Œå¯ä»¥é€šè¿‡ API å‘é€é€šçŸ¥ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œæ•…éšœè½¬ç§»ã€‚è¿™æ—¶r redis ç»“æ„å°±å˜æˆäº† ä½¿ç”¨äº† redis sentinel ä¹‹åå®¢æˆ·ç«¯ä¸å†ç›´æ¥è¿æ¥ redis èŠ‚ç‚¹è·å–æœåŠ¡ï¼Œè€Œæ˜¯ä½¿ç”¨ sentinel ä»£ç†è·å– redis æœåŠ¡ï¼Œç±»ä¼¼ Nginx çš„ä»£ç†æ¨¡å¼ã€‚é‚£ä¹ˆè¿™é‡Œåˆæœ‰ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå°±æ˜¯å¦‚æœ sentinel å®•æœºäº†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±æ‰¾ä¸åˆ° redis æœåŠ¡äº†ï¼Œæ‰€ä»¥ sentinel æœ¬èº«ä¹Ÿæ˜¯éœ€è¦æ”¯æŒé«˜å¯ç”¨ã€‚ **å¥½åœ¨sentinel æœ¬èº«ä¹Ÿæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œå¹¶ä¸”å„ä¸ª sentinel ä¹‹é—´æ”¯æŒè‡ªåŠ¨ç›‘æ§ï¼Œå¦‚æ­¤ä¸€æ¥ redis ä¸»ä»æœåŠ¡å’Œ sentinel æœåŠ¡éƒ½å¯ä»¥æ”¯æŒé«˜å¯ç”¨ã€‚**é¢„æœŸç»“æ„å¦‚ä¸‹ï¼š éƒ¨ç½²å®ä¾‹ master-slaver ä¸€ä¸»äºŒä» é‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±æ¥å®æ“ä¸€ä¸‹ï¼Œä»¥ä¸‹è¿‡ç¨‹å¤§éƒ¨åˆ†å‚è€ƒ redis å®˜æ–¹ Redis Sentinel æ–‡æ¡£ã€‚ å®‰è£… redis å°±ä¸é‡å¤äº†ï¼Œå’Œå•æœº redis ä¸€æ ·ã€‚ redis è§£å‹åï¼Œredis home ç›®å½•ä¸‹æœ‰ redis é…ç½®çš„æ ·ä¾‹æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸ç›´æ¥åœ¨æ­¤æ–‡ä»¶ä¸Šå°±è¡Œä¿®æ”¹ï¼Œåœ¨redis homeç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ master-slave ï¼Œå°†é…ç½®æ–‡ä»¶éƒ½æ”¾äºæ­¤ç›®å½•ä¸‹ï¼Œä¸‹é¢æ˜¯ä¸‰ä¸ª redis èŠ‚ç‚¹é…ç½®çš„å…³é”®éƒ¨åˆ† master é…ç½®æ–‡ä»¶ï¼šredis-6379.conf port 6379 daemonize yes logfile \"6379.log\" dbfilename \"dump-6379.rdb\" dir \"/opt/soft/redis/data\" slave-1 é…ç½®æ–‡ä»¶ï¼šredis-6380.conf port 6380 daemonize yes logfile \"6380.log\" dbfilename \"dump-6380.rdb\" dir \"/opt/soft/redis/data\" # å…³é”®é…ç½®ï¼šå°†è¿™ä¸ª redis æŒ‡å®šä¸ºæŸä¸ªç¬¬ä¸€ä¸ª redis çš„ slaver slaveof 127.0.0.1 6379 slave-2 é…ç½®æ–‡ä»¶ï¼šredis-6381.conf port 6381 daemonize yes logfile \"6381.log\" dbfilename \"dump-6381.rdb\" dir \"/opt/soft/redis/data\" # å…³é”®é…ç½®ï¼šå°†è¿™ä¸ª redis æŒ‡å®šä¸ºæŸä¸ªç¬¬ä¸€ä¸ª redis çš„ slaver slaveof 127.0.0.1 6379 åˆ†åˆ«å¯åŠ¨è¿™ä¸‰ä¸ª redis æœåŠ¡ï¼Œå¯åŠ¨è¿‡ç¨‹å°±ä¸ç½—å—¦äº†ï¼Œå’Œåˆ†åˆ«å¯åŠ¨ä¸‰ä¸ªå•æœº redis æ˜¯ä¸€æ ·çš„ï¼Œåˆ†åˆ«æŒ‡å®šä¸‰ä¸ªé…ç½®æ–‡ä»¶å³å¯ã€‚å¯åŠ¨åå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 6379ã€6380ã€6381 ç«¯å£åˆ†åˆ«åœ¨è¿è¡Œä¸€ä¸ª redis-serverã€‚ æ¥ä¸‹æ¥æŸ¥çœ‹è¿™ä¸‰ä¸ª redis-server ä¹‹é—´çš„å…³ç³»ï¼šè¿æ¥åˆ°ä¸» redis ä¸Šç”¨ info replicationå³å¯æŸ¥çœ‹ å¯ä»¥çœ‹åˆ°å½“å‰è¿æ¥çš„ redis æœåŠ¡ä¸º master è§’è‰²ï¼Œä¸‹é¢æœ‰ä¸¤ä¸ª slaverï¼ŒIP å’Œç«¯å£éƒ½èƒ½çœ‹åˆ°ã€‚ è¿™æ ·æˆ‘ä»¬å°±é¡ºåˆ©çš„å®Œæˆäº† ä¸€ä¸»äºŒä» redis ç¯å¢ƒçš„æ­å»ºï¼Œä¸‹é¢å¼€å§‹æ­å»º sentinel é›†ç¾¤ã€‚ sentinel é›†ç¾¤ sentinel æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ redisï¼Œå¤§éƒ¨åˆ†é…ç½®å’Œæ™®é€šçš„ redis æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸»è¦åŒºåˆ«åœ¨äºç«¯å£å’Œå…¶å“¨å…µç›‘æ§è®¾ç½®ï¼Œä¸‹é¢æ˜¯ä¸‰ä¸ªå…¸å‹çš„ sentinel é…ç½®æ–‡ä»¶ä¸­çš„å…³é”®å†…å®¹ï¼š sentinel-26379.conf #è®¾ç½® sentinel å·¥ä½œç«¯å£ port 26379 #åå°è¿è¡Œ daemonize yes #æ—¥å¿—æ–‡ä»¶åç§° logfile \"26379.log\" #è®¾ç½®å½“å‰ sentinel ç›‘æ§çš„ redis ip å’Œ ç«¯å£ sentinel monitor mymaster 127.0.0.1 6379 2 #è®¾ç½®åˆ¤æ–­ redis èŠ‚ç‚¹å®•æœºæ—¶é—´ sentinel down-after-milliseconds mymaster 60000 #è®¾ç½®è‡ªåŠ¨æ•…éšœè½¬ç§»è¶…æ—¶ sentinel failover-timeout mymaster 180000 #è®¾ç½®åŒæ—¶æ•…éšœè½¬ç§»ä¸ªæ•° sentinel parallel-syncs mymaster 1 sentinel-26380.conf #è®¾ç½® sentinel å·¥ä½œç«¯å£ port 26380 #åå°è¿è¡Œ daemonize yes #æ—¥å¿—æ–‡ä»¶åç§° logfile \"26380.log\" #è®¾ç½®å½“å‰ sentinel ç›‘æ§çš„ redis ip å’Œ ç«¯å£ sentinel monitor mymaster 127.0.0.1 6379 2 #è®¾ç½®åˆ¤æ–­ redis èŠ‚ç‚¹å®•æœºæ—¶é—´ sentinel down-after-milliseconds mymaster 60000 #è®¾ç½®è‡ªåŠ¨æ•…éšœè½¬ç§»è¶…æ—¶ sentinel failover-timeout mymaster 180000 #è®¾ç½®åŒæ—¶æ•…éšœè½¬ç§»ä¸ªæ•° sentinel parallel-syncs mymaster 1 sentinel-26381.conf #è®¾ç½® sentinel å·¥ä½œç«¯å£ port 26391 #åå°è¿è¡Œ daemonize yes #æ—¥å¿—æ–‡ä»¶åç§° logfile \"26381.log\" #è®¾ç½®å½“å‰ sentinel ç›‘æ§çš„ redis ip å’Œ ç«¯å£ sentinel monitor mymaster 127.0.0.1 6379 2 #è®¾ç½®åˆ¤æ–­ redis èŠ‚ç‚¹å®•æœºæ—¶é—´ sentinel down-after-milliseconds mymaster 60000 #è®¾ç½®è‡ªåŠ¨æ•…éšœè½¬ç§»è¶…æ—¶ sentinel failover-timeout mymaster 180000 #è®¾ç½®åŒæ—¶æ•…éšœè½¬ç§»ä¸ªæ•° sentinel parallel-syncs mymaster 1 é’ˆå¯¹å‡ ä¸ªç›‘æ§è®¾ç½®çš„é…ç½®åšä¸€ä¸‹è¯¦ç»†è¯´æ˜ï¼š sentinel monitor [master-group-name] [ip] [port] [quorum] è¿™ä¸ªå‘½ä»¤ä¸­ã€master-group-nameã€‘æ˜¯ master redis çš„åç§°ï¼›ã€ipã€‘å’Œã€portã€‘åˆ†åˆ«æ˜¯å…¶ ip å’Œç«¯å£ï¼Œå¾ˆå¥½ç†è§£ã€‚æœ€åä¸€ä¸ªå‚æ•°ã€quorumã€‘æ˜¯â€æŠ•ç¥¨æ•°â€œ ä¸¾ä¸ªæ —å­ï¼Œredis é›†ç¾¤ä¸­æœ‰3ä¸ª sentinel å®ä¾‹ï¼Œå…¶ä¸­ master æŒ‚æ‰äº†ï¼Œå¦‚æœè¿™é‡Œçš„ç¥¨æ•°æ˜¯2ï¼Œè¡¨ç¤ºæœ‰2ä¸ª sentinel è®¤ä¸º master æŒ‚æ‰å•¦ï¼Œæ‰èƒ½è¢«è®¤ä¸ºæ˜¯æ­£çœŸçš„æŒ‚æ‰å•¦ã€‚å…¶ä¸­ sentinel é›†ç¾¤ä¸­å„ä¸ª sentinel ä¹‹é—´é€šè¿‡ gossip åè®®äº’ç›¸é€šä¿¡ã€‚ å…·ä½“æ€æ ·æŠ•ç¥¨è¿˜æ¶‰åŠåˆ° redis é›†ç¾¤ä¸­çš„ã€ä¸»è§‚ä¸‹çº¿ã€‘å’Œã€å®¢è§‚ä¸‹çº¿ã€‘çš„æ¦‚å¿µï¼Œåé¢å†è¯¦ç»†ä»‹ç»ã€‚ down-after-milliseconds sentinel ä¼šå‘ master å‘é€å¿ƒè·³ PING æ¥ç¡®è®¤ master æ˜¯å¦å­˜æ´»ï¼Œå¦‚æœ master åœ¨â€œä¸€å®šæ—¶é—´èŒƒå›´â€å†…ä¸å›åº”PONG æˆ–è€…æ˜¯å›å¤äº†ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œé‚£ä¹ˆè¿™ä¸ª sentinel ä¼šä¸»è§‚åœ°è®¤ä¸ºè¿™ä¸ª master å·²ç»ä¸å¯ç”¨äº†ã€‚è€Œè¿™ä¸ªdown-after-milliseconds å°±æ˜¯ç”¨æ¥æŒ‡å®šè¿™ä¸ªâ€œä¸€å®šæ—¶é—´èŒƒå›´â€çš„ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚ failover-timeout è¿™ä¸ªå‚æ•° redis å®˜æ–¹æ–‡æ¡£ä¸­å¹¶æœªåšè¯¦ç»†è¯´æ˜ï¼Œä½†æ˜¯å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ sentinel å¯¹ redis èŠ‚ç‚¹è¿›è¡Œè‡ªåŠ¨æ•…éšœè½¬ç§»çš„è¶…æ—¶è®¾ç½®ï¼Œå½“ failoverï¼ˆæ•…éšœè½¬ç§»ï¼‰å¼€å§‹åï¼Œåœ¨æ­¤æ—¶é—´å†…ä»ç„¶æ²¡æœ‰è§¦å‘ä»»ä½• failover æ“ä½œï¼Œå½“å‰sentinel å°†ä¼šè®¤ä¸ºæ­¤æ¬¡æ•…éšœè½¬ç§»å¤±è´¥ã€‚ parallel-syncs å½“æ–°masteräº§ç”Ÿæ—¶ï¼ŒåŒæ—¶è¿›è¡Œ slaveof åˆ°æ–° master å¹¶è¿›è¡ŒåŒæ­¥å¤åˆ¶çš„ slave ä¸ªæ•°,ä¹Ÿå°±æ˜¯åŒæ—¶å‡ ä¸ª slave è¿›è¡ŒåŒæ­¥ã€‚å› ä¸ºåœ¨ salve æ‰§è¡Œ salveof ä¸æ–° master åŒæ­¥æ—¶ï¼Œå°†","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:2:2","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨æ–¹æ¡ˆï¼šRedis Cluster åŸç†ç®€ä»‹ ä½œä¸ºä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œå®ç°é«˜å¯ç”¨æ˜¯ä¸€ä¸ªåŸºæœ¬ä¿éšœï¼Œå½“å‚¨å­˜æœåŠ¡åœ¨å¯é¢„è§çš„å°†æ¥éœ€è¦åšå­˜å‚¨æ‹“å±•æ—¶ï¼Œåˆ†å¸ƒå¼å‚¨å­˜å°±æ˜¯ä¸€ä¸ªå¿…é¡»è¦è€ƒè™‘åˆ°çš„äº‹æƒ…ã€‚ä¾‹å¦‚éƒ¨ç½²ä¸€ä¸ªä¸­å¤® redis å‚¨å­˜æœåŠ¡ï¼Œæä¾›ç»™é›†å›¢ä¸‹æ‰€æœ‰çš„å­å…¬å¸æ‰€æœ‰éœ€è¦çš„ç³»ç»Ÿä½¿ç”¨ï¼Œå¹¶ä¸”ç³»ç»Ÿæ•°é‡åœ¨ä¸æ–­çš„å¢åŠ ï¼Œæ­¤æ—¶åœ¨éƒ¨ç½²æœåŠ¡çš„æ—¶å€™ï¼Œåˆ†å¸ƒå¼å‚¨å­˜ç»“æ„å‡ ä¹æ˜¯å¿…ç„¶çš„é€‰æ‹©ã€‚ Redis 3.0 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡å‰é¢è¯´æ‰€çš„ Redis Sentinelï¼ˆå“¨å…µï¼‰æ¥å®ç°é«˜å¯ç”¨ ( HA )ï¼Œä» 3.0 ç‰ˆæœ¬ä¹‹åï¼Œå®˜æ–¹æ¨å‡ºäº†Redis Clusterï¼Œå®ƒçš„ä¸»è¦ç”¨é€”æ˜¯å®ç°æ•°æ®åˆ†ç‰‡(Data Sharding)ï¼ŒåŒæ—¶æä¾›äº†å®Œæ•´çš„ shardingã€replicationï¼ˆå¤åˆ¶æœºåˆ¶ä»ä½¿ç”¨åŸæœ‰æœºåˆ¶ï¼Œå¹¶ä¸”å…·å¤‡æ„ŸçŸ¥ä¸»å¤‡çš„èƒ½åŠ›ï¼‰ã€failover è§£å†³æ–¹æ¡ˆï¼Œç§°ä¸º Redis Clusterï¼ŒåŒæ ·å¯ä»¥å®ç° HAï¼Œæ˜¯å®˜æ–¹å½“å‰æ¨èçš„æ–¹æ¡ˆã€‚ åœ¨ Redis Sentinel æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éœ€è¦ä¿å­˜å…¨é‡æ•°æ®ï¼Œå†—ä½™æ¯”è¾ƒå¤šï¼Œè€Œåœ¨Redis Cluster æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªåˆ†ç‰‡åªéœ€è¦ä¿å­˜ä¸€éƒ¨åˆ†çš„æ•°æ®ï¼Œå¯¹äºå†…å­˜æ•°æ®åº“æ¥è¯´ï¼Œè¿˜æ˜¯è¦å°½é‡çš„å‡å°‘å†—ä½™ã€‚åœ¨æ•°æ®é‡å¤ªå¤§çš„æƒ…å†µä¸‹ï¼Œæ•…éšœæ¢å¤éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå¦å¤–ï¼Œå†…å­˜çš„ä»·æ ¼ä¹Ÿæ˜¯éå¸¸é«˜æ˜‚çš„ã€‚ Redis Cluste rçš„å…·ä½“å®ç°ç»†èŠ‚æ˜¯é‡‡ç”¨äº† Hash æ§½çš„æ¦‚å¿µï¼Œé›†ç¾¤ä¼šé¢„å…ˆåˆ†é…16384ä¸ªæ§½ï¼ˆslotï¼‰ï¼Œå¹¶å°†è¿™äº›æ§½åˆ†é…ç»™å…·ä½“çš„æœåŠ¡èŠ‚ç‚¹ï¼Œé€šè¿‡å¯¹ Key è¿›è¡Œ CRC16(key)%16384 è¿ç®—å¾—åˆ°å¯¹åº”çš„æ§½æ˜¯å“ªä¸€ä¸ªï¼Œä»è€Œå°†è¯»å†™æ“ä½œè½¬å‘åˆ°è¯¥æ§½æ‰€å¯¹åº”çš„æœåŠ¡èŠ‚ç‚¹ã€‚å½“æœ‰æ–°çš„èŠ‚ç‚¹åŠ å…¥æˆ–è€…ç§»é™¤çš„æ—¶å€™ï¼Œå†æ¥è¿ç§»è¿™äº›æ§½ä»¥åŠå…¶å¯¹åº”çš„æ•°æ®ã€‚åœ¨è¿™ç§è®¾è®¡ä¹‹ä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡ŒåŠ¨æ€æ‰©å®¹æˆ–ç¼©å®¹ã€‚ å½“ç„¶ï¼Œå…³äºé«˜å¯ç”¨çš„å®ç°æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥å°† Redis-Sentinel å’Œ Redis-Cluster ä¸¤ç§æ¨¡å¼ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œä¸è¿‡æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸å¤ªæ¨èã€‚ ä¸‹å›¾å±•ç¤ºäº† Redis Cluster åˆ†é… key å’Œ slot çš„åŸºæœ¬åŸç†ï¼š ä¸€ä¸ªå…¸å‹çš„ Redis Cluster åˆ†å¸ƒå¼é›†ç¾¤ç”±å¤šä¸ªRedisèŠ‚ç‚¹ç»„æˆã€‚ä¸åŒçš„èŠ‚ç‚¹ç»„æœåŠ¡çš„æ•°æ®æ— äº¤é›†ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”æ•°æ® sharding çš„ä¸€ä¸ªåˆ†ç‰‡ã€‚èŠ‚ç‚¹ç»„å†…éƒ¨åˆ†ä¸ºä¸»å¤‡ 2 ç±»ï¼Œå¯¹åº”å‰é¢å™è¿°çš„ master å’Œ slaveã€‚ä¸¤è€…æ•°æ®å‡†å®æ—¶ä¸€è‡´ï¼Œé€šè¿‡å¼‚æ­¥åŒ–çš„ä¸»å¤‡å¤åˆ¶æœºåˆ¶ä¿è¯ã€‚ä¸€ä¸ªèŠ‚ç‚¹ç»„æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª masterï¼ŒåŒæ—¶æœ‰0åˆ°å¤šä¸ª slaveã€‚åªæœ‰ master å¯¹å¤–æä¾›å†™æœåŠ¡ï¼Œè¯»æœåŠ¡å¯ç”± master/slave æä¾›ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š ä¸Šå›¾ä¸­ï¼Œkey-value å…¨é›†è¢«åˆ†æˆäº† 5 ä»½ï¼Œ5ä¸ª slotï¼ˆå®é™…ä¸ŠRedis Clusteræœ‰ 16384 [0-16383] ä¸ªslotï¼Œæ¯ä¸ªèŠ‚ç‚¹æœåŠ¡ä¸€æ®µåŒºé—´çš„slotï¼Œè¿™é‡Œé¢ä»…ä»…ä¸¾ä¾‹ï¼‰ã€‚Aå’ŒBä¸ºmasterèŠ‚ç‚¹ï¼Œå¯¹å¤–æä¾›å†™æœåŠ¡ã€‚åˆ†åˆ«è´Ÿè´£ 1/2/3 å’Œ 4/5 çš„slotã€‚A/A1 å’ŒB/B1/B2 ä¹‹é—´é€šè¿‡ä¸»å¤‡å¤åˆ¶çš„æ–¹å¼åŒæ­¥æ•°æ®ã€‚ ä¸Šè¿°çš„5ä¸ªèŠ‚ç‚¹ï¼Œä¸¤ä¸¤é€šè¿‡ Redis Cluster Bus äº¤äº’ï¼Œç›¸äº’äº¤æ¢å¦‚ä¸‹çš„ä¿¡æ¯ï¼š 1ã€æ•°æ®åˆ†ç‰‡ï¼ˆslotï¼‰å’ŒèŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ï¼› 2ã€é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹å¯ç”¨çŠ¶æ€ï¼› 3ã€é›†ç¾¤ç»“æ„å‘ç”Ÿå˜æ›´æ—¶ï¼Œé€šè¿‡ä¸€å®šçš„åè®®å¯¹é…ç½®ä¿¡æ¯è¾¾æˆä¸€è‡´ã€‚æ•°æ®åˆ†ç‰‡çš„è¿ç§»ã€ä¸»å¤‡åˆ‡æ¢ã€å•ç‚¹ master çš„å‘ç°å’Œå…¶å‘ç”Ÿä¸»å¤‡å…³ç³»å˜æ›´ç­‰ï¼Œéƒ½ä¼šå¯¼è‡´é›†ç¾¤ç»“æ„å˜åŒ–ã€‚ 4ã€publish/subscribeï¼ˆå‘å¸ƒè®¢é˜…ï¼‰åŠŸèƒ½ï¼Œåœ¨Clusterç‰ˆå†…éƒ¨å®ç°æ‰€éœ€è¦äº¤äº’çš„ä¿¡æ¯ã€‚ Redis Cluster Bus é€šè¿‡å•ç‹¬çš„ç«¯å£è¿›è¡Œè¿æ¥ï¼Œç”±äºBusæ˜¯èŠ‚ç‚¹é—´çš„å†…éƒ¨é€šä¿¡æœºåˆ¶ï¼Œäº¤äº’çš„æ˜¯å­—èŠ‚åºåˆ—åŒ–ä¿¡æ¯ã€‚ç›¸å¯¹ Client çš„å­—ç¬¦åºåˆ—åŒ–æ¥è¯´ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ Redis Clusteræ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼å®ç°æ–¹æ¡ˆï¼Œå®¢æˆ·ç«¯å’Œé›†ç¾¤ä¸­ä»»ä¸€èŠ‚ç‚¹è¿æ¥ï¼Œç„¶åé€šè¿‡åé¢çš„äº¤äº’æµç¨‹ï¼Œé€æ¸çš„å¾—åˆ°å…¨å±€çš„æ•°æ®åˆ†ç‰‡æ˜ å°„å…³ç³»ã€‚ æ›´å¤šæ›´è¯¦ç»†çš„ redis cluster çš„è¯´æ˜è¯·ç§»æ­¥Redis Cluster å®˜æ–¹æ–‡æ¡£ éƒ¨ç½²å®ä¾‹ Redis Cluster é›†ç¾¤è‡³å°‘éœ€è¦ä¸‰ä¸ª master èŠ‚ç‚¹ï¼Œæœ¬æ–‡å°†ä»¥å•æœºå¤šå®ä¾‹çš„æ–¹å¼éƒ¨ç½²3ä¸ªä¸»èŠ‚ç‚¹åŠ3ä¸ªä»èŠ‚ç‚¹ï¼Œ6ä¸ªèŠ‚ç‚¹å®ä¾‹åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„ç«¯å£åŠå·¥ä½œç›®å½• å®‰è£… redis åŒä¸Šï¼Œä¸èµ˜è¿°ã€‚ ä¸ºæ¯ä¸ª redis èŠ‚ç‚¹åˆ†åˆ«åˆ›å»ºå·¥ä½œç›®å½• åœ¨rediså®‰è£…ç›®å½• /usr/local/redis-5.0.2 ä¸‹æ–°å»ºç›®å½• redis-clusterï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹å†æ–°å»º6ä¸ªå­ç›®å½•ï¼Œ7000,7001,8000,8001,9000,9001ï¼Œæ­¤æ—¶ç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¿®æ”¹é…ç½® #å¼€å¯åå°è¿è¡Œ daemonize yes #å·¥ä½œç«¯å£ port 7000 #ç»‘å®šæœºå™¨çš„å†…ç½‘IPæˆ–è€…å…¬ç½‘IP,ä¸€å®šè¦è®¾ç½®ï¼Œä¸è¦ç”¨ 127.0.0.1 bind 172.27.0.8 #æŒ‡å®šå·¥ä½œç›®å½•ï¼Œrdb,aofæŒä¹…åŒ–æ–‡ä»¶å°†ä¼šæ”¾åœ¨è¯¥ç›®å½•ä¸‹ï¼Œä¸åŒå®ä¾‹ä¸€å®šè¦é…ç½®ä¸åŒçš„å·¥ä½œç›®å½• dir /usr/local/redis-cluster/7000/ #å¯ç”¨é›†ç¾¤æ¨¡å¼ cluster-enabled yes #ç”Ÿæˆçš„é›†ç¾¤é…ç½®æ–‡ä»¶åç§°ï¼Œé›†ç¾¤æ­å»ºæˆåŠŸåä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œåœ¨å·¥ä½œç›®å½•ä¸‹ cluster-config-file nodes-7000.conf #èŠ‚ç‚¹å®•æœºå‘ç°æ—¶é—´ï¼Œå¯ä»¥ç†è§£ä¸ºä¸»èŠ‚ç‚¹å®•æœºåä»èŠ‚ç‚¹å‡çº§ä¸ºä¸»èŠ‚ç‚¹æ—¶é—´ cluster-node-timeout 5000 #å¼€å¯AOFæ¨¡å¼ appendonly yes #pid fileæ‰€åœ¨ç›®å½• pidfile /var/run/redis_8001.pid æŒ‰ç…§ä¸Šé¢çš„æ ·ä¾‹å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å¦å¤–5ä¸ªç›®å½•ä¸‹ï¼Œå¹¶å¯¹ portã€dirã€cluster-config-file ä¸‰ä¸ªå±æ€§åšå¯¹åº”ä¿®æ”¹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚ å®‰è£… Ruby å’Œ RubyGems ç”±äºåˆ›å»º redis cluster éœ€è¦ç”¨åˆ° redis-trib å‘½ä»¤ï¼Œè€Œè¿™ä¸ªå‘½ä»¤ä¾èµ– Ruby å’Œ RubyGemsï¼Œå› æ­¤éœ€è¦å®‰è£…ä¸€ä¸‹ã€‚ [root@VM_0_15_centos redis-cluster]# yum install ruby [root@VM_0_15_centos redis-cluster]# yum install rubygems [root@VM_0_15_centos redis-cluster]# gem install redis --version 3.3.3 åˆ†åˆ«å¯åŠ¨6ä¸ªèŠ‚ç‚¹ [root@VM_0_15_centos redis-4.0.6]# ./src/redis-server redis-cluster/7000/redis.conf [root@VM_0_15_centos redis-4.0.6]# ./src/redis-server redis-cluster/7001/redis.conf [root@VM_0_15_centos redis-4.0.6]# ./src/redis-server redis-cluster/8000/redis.conf [root@VM_0_15_centos redis-4.0.6]# ./src/redis-server redis-cluster/8001/redis.conf [root@VM_0_15_centos redis-4.0.6]# ./src/redis-server redis-cluster/9000/redis.conf [root@VM_0_15_centos redis-4.0.6]# ./src/redis-server redis-cluster/9001/redis.conf æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€ [root@VM_0_15_centos redis-4.0.6]# ps -ef | grep redis root 20290 1 0 18:33 ? 00:00:02 ./src/redis-server *:8001 [cluster] root 20295 1 0 18:33 ? 00:00:02 ./src/redis-server *:8002 [cluster] root 20300 1 0 18:33 ? 00:00:02 ./src/redis-server *:8003 [cluster] root 20305 1 0 18:33 ? 00:00:02 ./src/redis-server *:8004 [cluster] root 20310 1 0 18:33 ? 00:00:02 ./src/redis-server *:8005 [cluster] root 20312 1 0 18:33 ? 00:00:02 ./src/redis-server *:8006 [cluster] root 22913 15679 0 19:31 pts/2 00:00:00 grep --color=auto redis å¯ä»¥çœ‹åˆ°6ä¸ªèŠ‚ç‚¹ä»¥åŠå…¨éƒ¨æˆåŠŸå¯åŠ¨ åˆ›å»º redis cluster [root@VM_0_15_centos redis-4.0.6]# ./src/redis-trib.rb create --replicas 1 172.27.0.8:7000 172.27.0.8:7001 172.27.0.8:8000 172.27.0.8:8001 172.27.0.8:9000 172.27.0.8:90001 åˆ›å»ºè¿‡ç¨‹ä¸­ä¼šæœ‰éƒ¨åˆ†éœ€è¦ç¡®è®¤çš„åœ°æ–¹ï¼ŒæŒ‰ç…§æç¤ºè¾“å…¥å³å¯ï¼Œé›†ç¾¤åˆ›å»ºå®Œæ¯•åè§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªé›†ç¾¤çš„èŠ‚ç‚¹çŠ¶æ€ 172.27.0.8:7000\u003e cluster nodes 068ac2afe1ade8b69b8322","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:2:3","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"},{"categories":["Database"],"content":"æ€»ç»“ Redis æœåŠ¡çš„éƒ¨ç½²æ–¹æ¡ˆçš„é€‰å‹å¤§å®¶æ ¹æ®è‡ªå·±é¡¹ç›®çš„éœ€æ±‚éƒ¨ç½²å³å¯ï¼Œä¸€èˆ¬æ¥è¯´ redis sentinel å°±å¤Ÿç”¨äº†ï¼Œä¹Ÿæ˜¯ç›®å‰ç”¨å¾—æœ€å¤šçš„æ¨¡å¼ï¼Œä½†æ˜¯ redis 3.0 ä¹‹åå®˜æ–¹æ¨å‡ºçš„ redis-cluster è™½ç„¶æœ¬è´¨æ˜¯ç”¨äºå®ç°æ•°æ®åˆ†ç‰‡å’Œåˆ†å¸ƒå¼å­˜å‚¨ï¼Œä½†æ˜¯å…¶ä¹Ÿå®ç°äº† redis sentinel çš„å…¨éƒ¨åŠŸèƒ½ï¼Œæœ‰å®Œå…¨çš„ HA èƒ½åŠ›ï¼Œå¹¶ä¸”éƒ¨ç½²èµ·æ¥æ›´ç®€å•ï¼Œå› æ­¤æˆä¸ºäº†å®˜æ–¹æ¨èçš„ HA æ–¹æ¡ˆã€‚æˆ‘ä¸ªäººä¹Ÿæ›´åŠ æ¨è redis cluster æ–¹æ¡ˆã€‚ ","date":"2020-10-20","objectID":"/the-ultimate-guide-to-redis-distributed-high-availability/:2:4","tags":["Redis","Distributed"],"title":"Redis åˆ†å¸ƒå¼é«˜å¯ç”¨ç»ˆææŒ‡å—","uri":"/the-ultimate-guide-to-redis-distributed-high-availability/"}]